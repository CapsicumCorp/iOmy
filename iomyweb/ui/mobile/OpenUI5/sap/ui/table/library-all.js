jQuery.sap.declare('sap.ui.table.library-all');if(!jQuery.sap.isDeclared('sap.ui.table.ColumnMenuRenderer')){
/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2016 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
jQuery.sap.declare('sap.ui.table.ColumnMenuRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');jQuery.sap.require('sap.ui.unified.MenuRenderer');sap.ui.define("sap/ui/table/ColumnMenuRenderer",['jquery.sap.global','sap/ui/core/Renderer','sap/ui/unified/MenuRenderer'],function(q,R,M){"use strict";var C=R.extend(M);return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.TablePersoController')){jQuery.sap.declare('sap.ui.table.TablePersoController');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.base.ManagedObject');sap.ui.define("sap/ui/table/TablePersoController",['jquery.sap.global','sap/ui/base/ManagedObject'],function(q,M){"use strict";var T=M.extend("sap.ui.table.TablePersoController",{constructor:function(i,s){M.apply(this,arguments);},metadata:{properties:{"autoSave":{type:"boolean",defaultValue:true},"persoService":{type:"any"},"customDataKey":{type:"string",defaultValue:"persoKey"}},associations:{"table":{type:"sap.ui.table.Table",multiple:false}},library:"sap.ui.table"}});T.prototype.init=function(){this._schemaProperty="_persoSchemaVersion";this._schemaVersion="1.0";this._oInitialPersoData=null;this._aTableEvents=["columnResize","columnMove","columnVisibility","sort","filter","group"];this._aColumnProperties=["visible","width","sorted","sortOrder","grouped","summed"];this._bSaveFilters=false;if(this._bSaveFilters){this._aTableEvents.push("filter");this._aColumnProperties.push("filtered");this._aColumnProperties.push("filterValue");}};T.prototype.exit=function(){var t=this._getTable();if(t){this._manageTableEventHandlers(t,false);}delete this._schemaProperty;delete this._schemaVersion;delete this._oInitialPersoData;delete this._oDialog;};T.prototype.setPersoService=function(s){s=this.validateProperty("persoService",s);if(s&&(!q.isFunction(s.getPersData)||!q.isFunction(s.setPersData)||!q.isFunction(s.delPersData))){throw new Error("Value of property \"persoService\" needs to be null/undefined or an object that has the methods "+"\"getPersData\", \"setPersData\" and \"delPersData\".");}var o=this.getPersoService();this.setProperty("persoService",s,true);var n=this.getPersoService();if(n&&n!==o&&this._getTable()&&(this.getAutoSave()||!o)){this.refresh();}return this;};T.prototype.setAutoSave=function(a){var o=this.getAutoSave();this.setProperty("autoSave",a,true);var n=this.getAutoSave();if(n&&!o){this.savePersonalizations();}return this;};T.prototype.setTable=function(t){var o=this._getTable();if(o){o._oPersoController=undefined;}this.setAssociation("table",t,true);var n=this._getTable();if(n){n._oPersoController=this;}if(o){this._manageTableEventHandlers(o,false);}if(n&&n!==o){this._oInitialPersoData=this._getCurrentTablePersoData(true);this._manageTableEventHandlers(n,true);if(this.getPersoService()&&(this.getAutoSave()||!o)){this.refresh();}}else if(!n){this._oInitialPersoData=null;}return this;};T.prototype.setCustomDataKey=function(c){var o=this.getCustomDataKey();this.setProperty("customDataKey",c,true);var n=this.getCustomDataKey();if(o!==n&&this.getAutoSave()){this.savePersonalizations();}return this;};T.prototype._manageTableEventHandlers=function(t,a){for(var i=0,l=this._aTableEvents.length;i<l;i++){var f=t[(a?"attachEvent":"detachEvent")];f.apply(t,[this._aTableEvents[i],this._tableEventHandler,this]);}};T.prototype.refresh=function(){var t=this;var s=this.getPersoService();if(s){return s.getPersData().done(function(S){var D=(S&&q.isArray(S.aColumns))?S:t._oInitialPersoData;t._adjustTable(D);}).fail(function(){q.sap.log.error("Problem reading persisted personalization data.");});}else{q.sap.log.error("The Personalization Service is not available!");var d=q.Deferred();d.reject();return d.promise();}};T.prototype.savePersonalizations=function(){var s=this.getPersoService();if(s){var d=this._getCurrentTablePersoData();d[this._schemaProperty]=this._schemaVersion;return s.setPersData(d).fail(function(){q.sap.log.error("Problem persisting personalization data.");});}else{q.sap.log.error("The Personalization Service is not available!");var D=q.Deferred();D.reject();return D.promise();}};T.prototype._adjustTable=function(d){var t=this._getTable();if(!t||!d||!q.isArray(d.aColumns)){return;}var c={},C=t.getColumns();for(var i=0,l=C.length;i<l;i++){c[this._getColumnPersoKey(C[i])]=C[i];}var a=d.aColumns;for(var i=0,l=a.length;i<l;i++){var o=a[i];var b=c[o.id];if(b){if(t.indexOfColumn(b)!==o.order){t.removeColumn(b);t.insertColumn(b,o.order);}var m=b.getMetadata();for(var j=0,e=this._aColumnProperties.length;j<e;j++){var p=this._aColumnProperties[j];if(o[p]!==undefined){try{if(m.hasProperty(p)&&b.getProperty(p)!=o[p]){b.setProperty(p,o[p]);}}catch(f){q.sap.log.error("sap.ui.table.TablePersoController: failed to apply the value \""+b[p]+"\" for the property + \""+p+"\".");}}}}}if(typeof t._onPersoApplied==="function"){t._onPersoApplied();}};T.prototype._tableEventHandler=function(e){if(this.getAutoSave()&&!this._iTriggerSaveTimeout){var t=this;this._iTriggerSaveTimeout=setTimeout(function(){t.savePersonalizations();t._iTriggerSaveTimeout=null;},0);}};T.prototype._getCurrentTablePersoData=function(f){var t=this._getTable(),c=t.getColumns();var d={aColumns:[]};for(var i=0,l=c.length;i<l;i++){var C=c[i];var p=this._getColumnPersoKey(C);var o={id:p,order:i};var m=C.getMetadata();for(var j=0,a=this._aColumnProperties.length;j<a;j++){var P=this._aColumnProperties[j];if(m.hasProperty(P)){o[P]=C.getProperty(P);}}if(f){o.text=C.getLabel()&&C.getLabel().getText()||p;}d.aColumns.push(o);}return d;};T.prototype._getTable=function(){return sap.ui.getCore().byId(this.getTable());};T.prototype._getColumnPersoKey=function(c){return this._getPersoKey(this._getTable())+"-"+this._getPersoKey(c);};T.prototype._getPersoKey=function(c){var p=c.data(this.getCustomDataKey());if(!p){p=c.getId();if(p.indexOf(sap.ui.getCore().getConfiguration().getUIDPrefix())===0){q.sap.log.warning("Generated IDs should not be used as personalization keys! The stability cannot be ensured! (Control: \""+c.getId()+"\")");}}return p;};T.prototype.openDialog=function(s){sap.ui.getCore().loadLibrary("sap.m");q.sap.require("sap.m.TablePersoDialog");if(!this._oDialog){var t=this;this._oDialog=new sap.m.TablePersoDialog({persoService:this.getPersoService(),showSelectAll:true,showResetAll:true,grouping:false,contentWidth:s&&s.contentWidth,contentHeight:s&&s.contentHeight||"20rem",initialColumnState:this._oInitialPersoData.aColumns,columnInfoCallback:function(o,p,P){return t._getCurrentTablePersoData(true).aColumns;},confirm:function(){t._adjustTable(this.retrievePersonalizations());if(t.getAutoSave()){t.savePersonalizations();}}});this._oDialog._oDialog.removeStyleClass("sapUiPopupWithPadding");q.sap.syncStyleClass("sapUiSizeCompact",this._getTable(),this._oDialog._oDialog);}this._oDialog.open();};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.TableRenderer')){jQuery.sap.declare('sap.ui.table.TableRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.theming.Parameters');sap.ui.define("sap/ui/table/TableRenderer",['jquery.sap.global','sap/ui/core/theming/Parameters'],function(q,P){"use strict";var T={};T.render=function(r,t){t._createRows();r.write("<div");if(t._bAccMode){var a=[];if(t.getToolbar()){a.push(t.getToolbar().getId());}a.push(t.getId()+"-table");r.writeAttribute("aria-owns",a.join(" "));r.writeAttribute("aria-readonly","true");if(t.getTitle()){r.writeAttribute("aria-labelledby",t.getTitle().getId());}if(t.getSelectionMode()===sap.ui.table.SelectionMode.Multi){r.writeAttribute("aria-multiselectable","true");}}r.writeControlData(t);r.addClass("sapUiTable");r.addClass("sapUiTableSelMode"+t.getSelectionMode());if(t.getColumnHeaderVisible()){r.addClass("sapUiTableCHdr");}if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None&&t.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly){r.addClass("sapUiTableRSel");}var s=sap.ui.table.TableHelper.addTableClass();if(s){r.addClass(s);}r.addClass("sapUiTableSelMode"+t.getSelectionMode());if(t.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar){r.addClass("sapUiTableVScr");}if(t.getEditable()){r.addClass("sapUiTableEdt");}r.addClass("sapUiTableShNoDa");if(t.getShowNoData()&&t._getRowCount()===0){r.addClass("sapUiTableEmpty");}if(t.getEnableGrouping()){r.addClass("sapUiTableGrouping");}r.writeClasses();if(t.getWidth()){r.addStyle("width",t.getWidth());}r.writeStyles();r.write(">");if(t.getTitle()){this.renderHeader(r,t,t.getTitle());}if(t.getToolbar()){this.renderToolbar(r,t,t.getToolbar());}if(t.getExtension()&&t.getExtension().length>0){this.renderExtensions(r,t,t.getExtension());}r.write("<div");r.addClass("sapUiTableCnt");r.writeClasses();r.writeAttribute("data-sap-ui-fastnavgroup","true");if(t._bAccMode){r.writeAttribute("aria-describedby",t.getId()+"-ariacount");}r.write(">");this.renderColHdr(r,t);this.renderTable(r,t);if(t._bAccMode){r.write("<span");r.writeAttribute("id",t.getId()+"-ariadesc");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");if(t.getTitle()&&t.getTitle().getText&&t.getTitle().getText()!=""){r.writeEscaped(t.getTitle().getText());}else{r.write(t._oResBundle.getText("TBL_TABLE"));}r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-ariacount");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-toggleedit");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_TOGGLE_EDIT_KEY"));r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-selectrow");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_ROW_SELECT_KEY"));r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-selectrowmulti");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_ROW_SELECT_MULTI_KEY"));r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-deselectrow");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_ROW_DESELECT_KEY"));r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-deselectrowmulti");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_ROW_DESELECT_MULTI_KEY"));r.write("</span>");r.write("<span");r.writeAttribute("id",t.getId()+"-rownumberofrows");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write("</span>");}r.write("</div>");if(t.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){r.write("<div");r.addClass("sapUiTablePaginator");r.writeClasses();r.write(">");if(!t._oPaginator){q.sap.require("sap.ui.commons.Paginator");t._oPaginator=new sap.ui.commons.Paginator(t.getId()+"-paginator");t._oPaginator.attachPage(q.proxy(t.onvscroll,t));}r.renderControl(t._oPaginator);r.write("</div>");}if(t.getFooter()){this.renderFooter(r,t,t.getFooter());}if(t.getVisibleRowCountMode()==sap.ui.table.VisibleRowCountMode.Interactive){this.renderVariableHeight(r,t);}r.write("</div>");};T.renderHeader=function(r,t,o){r.write("<div");r.addClass("sapUiTableHdr");r.writeClasses();if(t._bAccMode){r.writeAttribute("role","heading");}r.write(">");r.renderControl(o);r.write("</div>");};T.renderToolbar=function(r,t,o){r.write("<div");r.addClass("sapUiTableTbr");if(typeof o.getStandalone!=="function"){r.addClass("sapUiTableMTbr");}r.writeClasses();r.write(">");if(typeof o.getStandalone==="function"&&o.getStandalone()){o.setStandalone(false);}if(sap.m&&sap.m.Toolbar&&o instanceof sap.m.Toolbar){o.setDesign(P.get("sapUiTableToolbarDesign"),true);}r.renderControl(o);r.write("</div>");};T.renderExtensions=function(r,t,e){for(var i=0,l=e.length;i<l;i++){this.renderExtension(r,t,e[i]);}};T.renderExtension=function(r,t,e){r.write("<div");r.addClass("sapUiTableExt");r.writeClasses();r.write(">");r.renderControl(e);r.write("</div>");};T.renderTable=function(r,t){r.write("<div");r.addClass("sapUiTableCCnt");r.writeClasses();r.write(">");r.write("<div");r.addClass("sapUiTableCtrlBefore");r.writeClasses();r.writeAttribute("tabindex","0");r.write("></div>");this.renderRowHdr(r,t);this.renderTableCtrl(r,t);this.renderVSb(r,t);r.write("</div>");this.renderHSb(r,t);};T.renderFooter=function(r,t,f){r.write("<div");r.addClass("sapUiTableFtr");r.writeClasses();r.write(">");r.renderControl(f);r.write("</div>");};T.renderVariableHeight=function(r,t){r.write('<div id="'+t.getId()+'-sb" tabIndex="-1"');r.addClass("sapUiTableSplitterBar");r.addStyle("height","5px");r.writeClasses();r.writeStyles();r.write(">");r.write("</div>");};T.renderColHdr=function(r,t){r.write("<div");r.addClass("sapUiTableColHdrCnt");r.writeClasses();if(t.getColumnHeaderHeight()>0){r.addStyle("height",(t.getColumnHeaderHeight()*t._getHeaderRowCount())+"px");}if(t._bAccMode&&(t.getSelectionMode()===sap.ui.table.SelectionMode.None||t.getSelectionBehavior()===sap.ui.table.SelectionBehavior.RowOnly)){r.writeAttribute("role","row");}r.writeStyles();r.write(">");this.renderColRowHdr(r,t);var c=t.getColumns();if(t.getFixedColumnCount()>0){r.write("<div");r.addClass("sapUiTableColHdrFixed");r.writeClasses();r.write(">");for(var h=0;h<t._getHeaderRowCount();h++){r.write("<div");r.addClass("sapUiTableColHdr");r.writeClasses();r.addStyle("min-width",t._getColumnsWidth(0,t.getFixedColumnCount())+"px");r.writeStyles();r.write(">");var s=1;for(var i=0,l=t.getFixedColumnCount();i<l;i++){if(c[i]&&c[i].shouldRender()){if(s<=1){this.renderCol(r,t,c[i],i,h);var H=c[i].getHeaderSpan();if(q.isArray(H)){s=c[i].getHeaderSpan()[h]+1;}else{s=parseInt(c[i].getHeaderSpan(),10)+1;}}else{this.renderCol(r,t,c[i],i,h,true);}if(h==0){this.renderColRsz(r,t,c[i],i);}s--;}}r.write("<p style=\"clear: both;\"></p>");r.write("</div>");}r.write("</div>");}r.write("<div");r.addClass("sapUiTableColHdrScr");r.writeClasses();if(t.getFixedColumnCount()>0){if(t._bRtlMode){r.addStyle("margin-right","0");}else{r.addStyle("margin-left","0");}r.writeStyles();}r.write(">");for(var h=0;h<t._getHeaderRowCount();h++){r.write("<div");r.addClass("sapUiTableColHdr");r.writeClasses();r.addStyle("min-width",t._getColumnsWidth(t.getFixedColumnCount(),c.length)+"px");r.writeStyles();r.write(">");var s=1;for(var i=t.getFixedColumnCount(),l=c.length;i<l;i++){if(c[i].shouldRender()){if(s<=1){this.renderCol(r,t,c[i],i,h);var H=c[i].getHeaderSpan();if(q.isArray(H)){s=c[i].getHeaderSpan()[h]+1;}else{s=parseInt(c[i].getHeaderSpan(),10)+1;}}else{this.renderCol(r,t,c[i],i,h,true);}if(h==0){this.renderColRsz(r,t,c[i],i);}s--;}}r.write("<p style=\"clear: both;\"></p>");r.write("</div>");}r.write("</div>");r.write("</div>");};T.renderAriaAttributes=function(r,a,A){if(A){for(var k in a){var m=a[k];if(m.escaped){r.writeAttributeEscaped(k,m.value);}else{r.writeAttribute(k,m.value);}}}};T.getAriaAttributesForRowHdr=function(t){return{"aria-label":{value:t._oResBundle.getText("TBL_SELECT_ALL_KEY"),escaped:true}};};T.renderColRowHdr=function(r,t){r.write("<div");r.writeAttribute("id",t.getId()+"-selall");var s=t.getSelectionMode();if((s=="Multi"||s=="MultiToggle")&&t.getEnableSelectAll()){r.writeAttributeEscaped("title",t._oResBundle.getText("TBL_SELECT_ALL"));if(t._getSelectableRowCount()==0||t._getSelectableRowCount()!==t.getSelectedIndices().length){r.addClass("sapUiTableSelAll");}r.addClass("sapUiTableSelAllEnabled");}r.addClass("sapUiTableColRowHdr");r.writeClasses();r.writeAttribute("tabindex","-1");var a=this.getAriaAttributesForRowHdr(t);this.renderAriaAttributes(r,a,t._bAccMode);r.write(">");if(t.getSelectionMode()!==sap.ui.table.SelectionMode.Single){r.write("<div");r.addClass("sapUiTableColRowHdrIco");r.writeClasses();if(t.getColumnHeaderHeight()>0){r.addStyle("height",t.getColumnHeaderHeight()+"px");}r.write(">");r.write("</div>");}r.write("</div>");};T.getAriaAttributesForCol=function(t,c,C){var a={};if(c._menuHasItems()){a["aria-haspopup"]={value:"true"};}a.role={value:"columnheader"};if(C<t.getFixedColumnCount()){a["aria-labelledby"]={value:c.getId()+" "+t.getId()+"-ariafixedcolumn"};}return a;};T.renderCol=function(r,t,c,i,h,I){var l;if(c.getMultiLabels().length>0){l=c.getMultiLabels()[h];}else if(h==0){l=c.getLabel();}r.write("<div");if(h===0){r.writeElementData(c);}else{r.writeAttribute('id',c.getId()+"_"+h);}r.writeAttribute('data-sap-ui-colid',c.getId());r.writeAttribute("data-sap-ui-colindex",i);r.writeAttribute("tabindex","-1");var a=this.getAriaAttributesForCol(t,c,i);this.renderAriaAttributes(r,a,t._bAccMode);r.addClass("sapUiTableCol");if(t.getFixedColumnCount()===i+1){r.addClass("sapUiTableColLastFixed");}r.writeClasses();r.addStyle("width",c.getWidth());if(t.getColumnHeaderHeight()>0){r.addStyle("height",t.getColumnHeaderHeight()+"px");}if(I){r.addStyle("display","none");}r.writeStyles();var s=c.getTooltip_AsString();if(s){r.writeAttributeEscaped("title",s);}r.write("><div");r.addClass("sapUiTableColCell");r.writeClasses();var H=this.getHAlign(c.getHAlign(),t._bRtlMode);if(H){r.addStyle("text-align",H);}r.writeStyles();r.write(">");r.write("<div id=\""+c.getId()+"-icons\" class=\"sapUiTableColIcons\"></div>");if(l){r.renderControl(l);}r.write("</div></div>");};T.renderColRsz=function(r,t,c,i){if(c.getResizable()){r.write("<div");r.writeAttribute("id",c.getId()+"-rsz");r.writeAttribute("data-sap-ui-colindex",i);r.writeAttribute("tabindex","-1");r.addClass("sapUiTableColRsz");r.writeClasses();r.addStyle("left",t._bRtlMode?"99000px":"-99000px");r.writeStyles();r.write("></div>");}};T.renderRowHdr=function(r,t){r.write("<div");r.addClass("sapUiTableRowHdrScr");r.writeClasses();r.write(">");for(var a=0,c=t.getRows().length;a<c;a++){this.renderRowHdrRow(r,t,t.getRows()[a],a);}r.write("</div>");};T.getAriaAttributesForRowHdrRow=function(t,r){var a={"aria-labelledby":{value:t.getId()+"-rownumberofrows "+r.getId()+"-rowselecttext"}};var s=t.getSelectionMode();if(s!==sap.ui.table.SelectionMode.None){a["title"]={value:t._oResBundle.getText("TBL_ROW_SELECT")};a["aria-selected"]={value:"false"};if(s===sap.ui.table.SelectionMode.Multi){if(t.getSelectedIndices().length>1){a["aria-label"]={value:t._oResBundle.getText("TBL_ROW_SELECT_MULTI_KEY")};}}else{a["aria-label"]={value:t._oResBundle.getText("TBL_ROW_SELECT_KEY")};}}return a;};T.renderRowHdrRow=function(r,t,R,i){r.write("<div");r.writeAttribute("id",t.getId()+"-rowsel"+i);r.writeAttribute("data-sap-ui-rowindex",i);r.addClass("sapUiTableRowHdr");if(R._bHidden){r.addClass("sapUiTableRowHidden");}r.writeClasses();if(t.getRowHeight()>0){r.addStyle("height",t.getRowHeight()+"px");}r.writeAttribute("tabindex","-1");var a=this.getAriaAttributesForRowHdrRow(t,R);this.renderAriaAttributes(r,a,t._bAccMode);var c=[];q.each(R.getCells(),function(I,C){c.push(R.getId()+"-col"+I);});r.writeStyles();r.write("></div>");};T.renderTableCtrl=function(r,t){if(t.getFixedColumnCount()>0){r.write("<div");r.addClass("sapUiTableCtrlScrFixed");r.writeClasses();r.write(">");this.renderTableControl(r,t,true);r.write("<span");r.writeAttribute("id",t.getId()+"-ariafixedcolumn");r.addStyle("position","absolute");r.addStyle("top","-20000px");r.writeStyles();r.write(">");r.write(t._oResBundle.getText("TBL_FIXED_COLUMN"));r.write("</div>");}r.write("<div");r.addClass("sapUiTableCtrlScr");r.writeClasses();if(t.getFixedColumnCount()>0){if(t._bRtlMode){r.addStyle("margin-right","0");}else{r.addStyle("margin-left","0");}r.writeStyles();}r.write(">");r.write("<div");r.addClass("sapUiTableCtrlCnt");r.writeClasses();r.write(">");this.renderTableControl(r,t,false);r.write("</div>");r.write("<div");r.addClass("sapUiTableCtrlAfter");r.writeClasses();r.writeAttribute("tabindex","0");r.write("></div>");r.write("</div>");r.write("<div");r.addClass("sapUiTableCtrlEmpty");r.writeClasses();r.writeAttribute("tabindex","0");r.write(">");if(t.getNoData()&&t.getNoData()instanceof sap.ui.core.Control){r.renderControl(t.getNoData());}else{r.write("<span");r.addClass("sapUiTableCtrlEmptyMsg");r.writeClasses();r.write(">");if(typeof t.getNoData()==="string"||t.getNoData()instanceof String){r.writeEscaped(t.getNoData());}else if(t.getNoDataText()){r.writeEscaped(t.getNoDataText());}else{r.writeEscaped(t._oResBundle.getText("TBL_NO_DATA"));}r.write("</span>");}r.write("</div>");};T.renderTableControl=function(r,t,f){var s,e;if(f){s=0;e=t.getFixedColumnCount();}else{s=t.getFixedColumnCount();e=t.getColumns().length;}var F=t.getFixedRowCount();var i=t.getFixedBottomRowCount();var R=t.getRows();if(F>0){this.renderTableControlCnt(r,t,f,s,e,true,false,0,F);}this.renderTableControlCnt(r,t,f,s,e,false,false,F,R.length-i);if(i>0){this.renderTableControlCnt(r,t,f,s,e,false,true,R.length-i,R.length);}};T.getAriaAttributesForTableControlCntColTh=function(c,h){var a={"role":{value:"columnheader"},"scope":{value:"col"}};if(h){a["aria-owns"]={value:""+c.getId()};a["aria-labelledby"]={value:""+c.getId()};}return a;};T.renderTableControlCnt=function(r,t,f,s,e,F,b,S,E){r.write("<table");var i=t.getId()+"-table";if(f){i+="-fixed";r.addClass("sapUiTableCtrlFixed");}else{r.addClass("sapUiTableCtrlScroll");}if(F){i+="-fixrow";r.addClass("sapUiTableCtrlRowFixed");}else if(b){i+="-fixrow-bottom";r.addClass("sapUiTableCtrlRowFixedBottom");}else{r.addClass("sapUiTableCtrlRowScroll");}r.writeAttribute("id",i);if(t._bAccMode){r.writeAttribute("role","grid");}r.addClass("sapUiTableCtrl");r.writeClasses();r.addStyle("min-width",t._getColumnsWidth(s,e)+"px");if(f&&(!!sap.ui.Device.browser.firefox||!!sap.ui.Device.browser.chrome||!!sap.ui.Device.browser.safari)){r.addStyle("width",t._getColumnsWidth(s,e)+"px");}r.writeStyles();r.write(">");r.write("<thead>");r.write("<tr");r.addClass("sapUiTableCtrlCol");if(S==0){r.addClass("sapUiTableCtrlFirstCol");}r.writeClasses();r.write(">");var c=t.getColumns();if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None&&t.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly){r.write("<th");r.addStyle("width","0px");r.writeStyles();if(S==0){var a=this.getAriaAttributesForTableControlCntColTh(C);this.renderAriaAttributes(r,a,t._bAccMode);r.writeAttribute("id",t.getId()+"_colsel");}r.write("></th>");}else{if(c.length===0){r.write("<th></th>");}}for(var d=s,g=e;d<g;d++){var C=c[d];if(C&&C.shouldRender()){r.write("<th");r.addStyle("width",C.getWidth());r.writeStyles();if(S==0){var a=this.getAriaAttributesForTableControlCntColTh(C,true);this.renderAriaAttributes(r,a,t._bAccMode);r.writeAttribute("id",t.getId()+"_col"+d);}r.writeAttribute("data-sap-ui-headcolindex",d);r.write(">");if(S==0&&t._getHeaderRowCount()==0){if(C.getMultiLabels().length>0){r.renderControl(C.getMultiLabels()[0]);}else{r.renderControl(C.getLabel());}}r.write("</th>");}}if(!f&&t._hasOnlyFixColumnWidths()&&c.length>0){r.write("<th></th>");}r.write("</tr>");r.write("</thead>");r.write("<tbody>");var v=t._getVisibleColumns();var h=t._hasOnlyFixColumnWidths();var R=t.getRows();var m=t._getAriaTextsForSelectionMode(true);var j=t._getSelectOnCellsAllowed();for(var k=S,g=E;k<g;k++){this.renderTableRow(r,t,R[k],k,f,s,e,false,v,h,m,j);}r.write("</tbody>");r.write("</table>");};T.getAriaAttributesForRowTr=function(t,r,c){var a={};a["role"]={value:"row"};if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None){a["aria-selected"]={value:"false"};}return a;};T.getAriaAttributesForRowTd=function(t,r,R,c){var a={};if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None&&t.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly){a["role"]={value:"rowheader"};}else{if(c.length===0){a["role"]={value:"gridcell"};}}a["headers"]={value:t.getId()+"_colsel"};a["aria-owns"]={value:t.getId()+"-rowsel"+R};a["role"]={value:"rowheader"};if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None){a["aria-selected"]={value:"false"};}return a;};T.renderTableRow=function(r,t,R,i,f,s,e,F,v,h,m,S){r.write("<tr");r.addClass("sapUiTableTr");if(f){r.writeAttribute("id",R.getId()+"-fixed");}else{r.writeElementData(R);}if(R._bHidden){r.addClass("sapUiTableRowHidden");}if(i%2===0){r.addClass("sapUiTableRowEven");}else{r.addClass("sapUiTableRowOdd");}r.writeClasses();r.writeAttribute("data-sap-ui-rowindex",i);if(t.getRowHeight()>0){r.addStyle("height",t.getRowHeight()+"px");}r.writeStyles();var a=this.getAriaAttributesForRowTr(t);this.renderAriaAttributes(r,a,t._bAccMode);r.write(">");var c=R.getCells();if((t.getSelectionMode()!==sap.ui.table.SelectionMode.None&&t.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly)||c.length===0){r.write("<td");var a=this.getAriaAttributesForRowTd(t,R,i,c);this.renderAriaAttributes(r,a,t._bAccMode);r.write(">");if(t._bAccMode){r.write("<div");r.writeAttribute("id",R.getId()+"-rowselecttext");r.addClass("sapUiTableAriaRowSel");r.writeClasses();r.write(">");r.write("</div>");}r.write("</td>");}for(var b=0,d=c.length;b<d;b++){this.renderTableCell(r,t,R,c[b],b,f,s,e,v);}if(!f&&h&&c.length>0){r.write("<td");r.addClass("sapUiTableTDDummy");r.writeClasses();r.write(">");r.write("</td>");}r.write("</tr>");q.sap.delayedCall(0,this,function(){R._updateSelection(t,m,S);});};T.getAriaAttributesForCell=function(t,f,r,c,C,o){var a={};a["headers"]={value:t.getId()+"_col"+C};a["role"]={value:"gridcell"};var R=t.getId()+"-rownumberofrows";var m=c.getMultiLabels();var M=m.length;var l="";if(t.getColumnHeaderVisible()){var s=c.getId();l=s;if(M>1){for(var i=1;i<M;i++){l+=" "+s+"_"+i;}}}else{var L;if(M==0){L=c.getLabel();if(L){l=L.getId();}}else{for(var i=0;i<M;i++){L=m[i];if(L){l+=" "+L.getId()+" ";}}}}var b=R+" "+t.getId()+"-ariadesc "+l;b+=" "+o.getId();var d="";if(f){b+=" "+t.getId()+"-ariafixedcolumn";}a["aria-labelledby"]={value:b};a["aria-describedby"]={value:t.getId()+"-toggleedit"+d};if(t.getSelectionMode()!==sap.ui.table.SelectionMode.None){a["aria-selected"]={value:"false"};}return a;};T.renderTableCell=function(r,t,R,c,C,f,s,e,v){var i=c.data("sap-ui-colindex");var o=t.getColumns()[i];if(o.shouldRender()&&s<=i&&e>i){r.write("<td");var I=R.getId()+"-col"+C;r.writeAttribute("id",I);r.writeAttribute("tabindex","-1");var a=this.getAriaAttributesForCell(t,f,R,o,i,c);this.renderAriaAttributes(r,a,t._bAccMode);var h=this.getHAlign(o.getHAlign(),t._bRtlMode);if(h){r.addStyle("text-align",h);}r.writeStyles();if(v.length>0&&v[0]===o){r.addClass("sapUiTableTdFirst");}if(o.getGrouped()){r.addClass("sapUiTableTdGroup");}r.writeClasses();r.write("><div");r.addClass("sapUiTableCell");r.writeClasses();if(t.getRowHeight()&&t.getVisibleRowCountMode()==sap.ui.table.VisibleRowCountMode.Auto){r.addStyle("max-height",t.getRowHeight()+"px");}r.writeStyles();r.write(">");this.renderTableCellControl(r,t,c,C);r.write("</div></td>");}};T.renderTableCellControl=function(r,t,c,C){r.renderControl(c);};T.renderVSb=function(r,t){r.write("<div");r.addClass("sapUiTableVSb");r.writeClasses();r.write(">");r.renderControl(t._oVSb);r.write("</div>");};T.renderHSb=function(r,t){r.write("<div");r.addClass("sapUiTableHSb");r.writeClasses();r.write(">");r.renderControl(t._oHSb);r.write("</div>");};T.getHAlign=function(h,r){switch(h){case sap.ui.core.HorizontalAlign.Center:return"center";case sap.ui.core.HorizontalAlign.End:case sap.ui.core.HorizontalAlign.Right:return r?"left":"right";}return r?"right":"left";};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.TreeAutoExpandMode')){jQuery.sap.declare('sap.ui.table.TreeAutoExpandMode');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/table/TreeAutoExpandMode",['jquery.sap.global'],function(q){"use strict";var T={Sequential:"Sequential",Bundled:"Bundled"};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.TreeTableRenderer')){jQuery.sap.declare('sap.ui.table.TreeTableRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/table/TreeTableRenderer",['jquery.sap.global','sap/ui/core/Renderer','./TableRenderer'],function(q,R,T){"use strict";var a=R.extend(T);a.renderTableCellControl=function(r,t,c,C){if(t.isTreeBinding("rows")&&C===0&&!t.getUseGroupMode()){r.write("<span");r.addClass("sapUiTableTreeIcon");r.addClass("sapUiTableTreeIconLeaf");r.writeClasses();r.writeAttribute("tabindex",-1);r.write(">&nbsp;</span>");}r.renderControl(c);};return a;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.library')){jQuery.sap.declare('sap.ui.table.library');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.library');jQuery.sap.require('sap.ui.unified.library');sap.ui.define("sap/ui/table/library",['jquery.sap.global','sap/ui/core/library','sap/ui/unified/library'],function(q){"use strict";sap.ui.getCore().initLibrary({name:"sap.ui.table",version:"1.34.9",dependencies:["sap.ui.core","sap.ui.unified"],types:["sap.ui.table.NavigationMode","sap.ui.table.SelectionBehavior","sap.ui.table.SelectionMode","sap.ui.table.SortOrder","sap.ui.table.VisibleRowCountMode"],interfaces:[],controls:["sap.ui.table.AnalyticalColumnMenu","sap.ui.table.AnalyticalTable","sap.ui.table.ColumnMenu","sap.ui.table.DataTable","sap.ui.table.Table","sap.ui.table.TreeTable"],elements:["sap.ui.table.AnalyticalColumn","sap.ui.table.Column","sap.ui.table.Row"]});sap.ui.table.NavigationMode={Scrollbar:"Scrollbar",Paginator:"Paginator"};sap.ui.table.SelectionBehavior={Row:"Row",RowSelector:"RowSelector",RowOnly:"RowOnly"};sap.ui.table.SelectionMode={MultiToggle:"MultiToggle",Multi:"Multi",Single:"Single",None:"None"};sap.ui.table.SortOrder={Ascending:"Ascending",Descending:"Descending"};sap.ui.table.VisibleRowCountMode={Fixed:"Fixed",Interactive:"Interactive",Auto:"Auto"};sap.ui.table.GroupEventType={group:"group",ungroup:"ungroup",ungroupAll:"ungroupAll",moveUp:"moveUp",moveDown:"moveDown",showGroupedColumn:"showGroupedColumn",hideGroupedColumn:"hideGroupedColumn"};sap.ui.table.ColumnHeader=sap.ui.table.Column;sap.ui.table.SelectionMode.All=sap.ui.table.SelectionMode.Multi;if(!sap.ui.table.TableHelper){sap.ui.table.TableHelper={createLabel:function(c){throw new Error("no Label control available!");},createTextView:function(c){throw new Error("no TextView control available!");},createTextField:function(c){throw new Error("no TextField control available!");},createImage:function(c){throw new Error("no Image control available!");},bFinal:false};}return sap.ui.table;});};if(!jQuery.sap.isDeclared('sap.ui.table.AnalyticalColumnMenuRenderer')){jQuery.sap.declare('sap.ui.table.AnalyticalColumnMenuRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/table/AnalyticalColumnMenuRenderer",['jquery.sap.global','sap/ui/core/Renderer','./ColumnMenuRenderer'],function(q,R,C){"use strict";var A=R.extend(C);return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.AnalyticalTableRenderer')){jQuery.sap.declare('sap.ui.table.AnalyticalTableRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/table/AnalyticalTableRenderer",['jquery.sap.global','sap/ui/core/Renderer','./TableRenderer'],function(q,R,T){"use strict";var A=R.extend(T);A.getAriaAttributesForCell=function(t,f,r,c,C,o){var a=T.getAriaAttributesForCell.apply(this,arguments);if(a["aria-describedby"]){var d=a["aria-describedby"].value.split(" ");var i=d.indexOf(t.getId()+"-toggleedit");delete a["aria-describedby"];if(i>=0){d.splice(i);}if(d.length>0){a["aria-describedby"].value=d.join(" ");}}return a;};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.Column')){jQuery.sap.declare('sap.ui.table.Column');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Element');jQuery.sap.require('sap.ui.core.RenderManager');jQuery.sap.require('sap.ui.model.Filter');jQuery.sap.require('sap.ui.model.Sorter');jQuery.sap.require('sap.ui.model.Type');jQuery.sap.require('sap.ui.model.type.String');sap.ui.define("sap/ui/table/Column",['jquery.sap.global','sap/ui/core/Element','sap/ui/core/RenderManager','sap/ui/model/Filter','sap/ui/model/Sorter','sap/ui/model/Type','sap/ui/model/type/String','./library'],function(q,E,R,F,S,T,a,b){"use strict";var C=E.extend("sap.ui.table.Column",{metadata:{library:"sap.ui.table",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},flexible:{type:"boolean",group:"Behavior",defaultValue:true},resizable:{type:"boolean",group:"Behavior",defaultValue:true},hAlign:{type:"sap.ui.core.HorizontalAlign",group:"Appearance",defaultValue:sap.ui.core.HorizontalAlign.Begin},sorted:{type:"boolean",group:"Appearance",defaultValue:false},sortOrder:{type:"sap.ui.table.SortOrder",group:"Appearance",defaultValue:sap.ui.table.SortOrder.Ascending},sortProperty:{type:"string",group:"Behavior",defaultValue:null},filtered:{type:"boolean",group:"Appearance",defaultValue:false},filterProperty:{type:"string",group:"Behavior",defaultValue:null},filterValue:{type:"string",group:"Behavior",defaultValue:null},filterOperator:{type:"string",group:"Behavior",defaultValue:null},defaultFilterOperator:{type:"string",group:"Behavior",defaultValue:null},filterType:{type:"any",group:"Misc",defaultValue:null},grouped:{type:"boolean",group:"Appearance",defaultValue:false},visible:{type:"boolean",group:"Appearance",defaultValue:true},name:{type:"string",group:"Appearance",defaultValue:null},showFilterMenuEntry:{type:"boolean",group:"Appearance",defaultValue:true},showSortMenuEntry:{type:"boolean",group:"Appearance",defaultValue:true},headerSpan:{type:"any",group:"Behavior",defaultValue:1},autoResizable:{type:"boolean",group:"Behavior",defaultValue:false}},defaultAggregation:"label",aggregations:{label:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},multiLabels:{type:"sap.ui.core.Control",multiple:true,singularName:"multiLabel"},template:{type:"sap.ui.core.Control",multiple:false},menu:{type:"sap.ui.unified.Menu",multiple:false}},events:{columnMenuOpen:{allowPreventDefault:true,parameters:{menu:{type:"sap.ui.unified.Menu"}}}}}});C._DEFAULT_FILTER_TYPE=new a();C.prototype.init=function(){this.oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.table");this._oSorter=null;this.mSkipPropagation={template:true};};C.prototype.exit=function(){var s=sap.ui.getCore().byId(this.getId()+"-sortIcon");if(s){s.destroy();}var f=sap.ui.getCore().byId(this.getId()+"-filterIcon");if(f){f.destroy();}};C.prototype.setParent=function(p,A,s){E.prototype.setParent.apply(this,arguments);var m=this.getAggregation("menu");if(m&&typeof m._updateReferences==="function"){m._updateReferences(this);}};C.prototype.invalidate=function(o){if(o!==this.getTemplate()&&!(o instanceof sap.ui.table.ColumnMenu)){E.prototype.invalidate.apply(this,arguments);}};C.prototype.setLabel=function(l){var L=l;if(typeof(l)==="string"){L=sap.ui.table.TableHelper.createLabel({text:l});}this.setAggregation("label",L);return this;};C.prototype.setTemplate=function(t){var o=t;if(typeof(t)==="string"){o=sap.ui.table.TableHelper.createTextView().bindProperty("text",t);}this.setAggregation("template",o);this.invalidate();return this;};C.prototype.getMenu=function(){var m=this.getAggregation("menu");if(!m){m=this._createMenu();this.setMenu(m);}return m;};C.prototype.invalidateMenu=function(){var m=this.getAggregation("menu");if(m&&m._invalidate){m._invalidate();}};C.prototype._menuHasItems=function(){var m=this.getAggregation("menu");var t=this.getParent();var M=function(){return(this.isSortableByMenu()||this.isFilterableByMenu()||this.isGroupableByMenu()||(t&&t.getEnableColumnFreeze())||(t&&t.getShowColumnVisibilityMenu()));}.bind(this);return!!((m&&m.getItems().length>0)||M());};C.prototype.isFilterableByMenu=function(){return!!(this.getFilterProperty()&&this.getShowFilterMenuEntry());};C.prototype.isSortableByMenu=function(){return!!(this.getSortProperty()&&this.getShowSortMenuEntry());};C.prototype.isGroupableByMenu=function(){var t=this.getParent();return!!(t&&t.getEnableGrouping&&t.getEnableGrouping()&&this.getSortProperty());};C.prototype.setMenu=function(m){this.setAggregation("menu",m,true);return this;};C.prototype._createMenu=function(){q.sap.require("sap.ui.table.ColumnMenu");if(!this._defaultMenu){this._defaultMenu=new sap.ui.table.ColumnMenu(this.getId()+"-menu",{ariaLabelledBy:this});}return this._defaultMenu;};C.prototype.setWidth=function(w){this.setProperty("width",w);this.fireEvent('_widthChanged',{newWidth:w});return this;};C.prototype._setAppDefault=function(p,v){if(!this._appDefaults){this._appDefaults={};}if(p=="sorted"){this._appDefaults.sorted=v;}else if(p=="sortOrder"){this._appDefaults.sortOrder=v;}else if(p=="filtered"){this._appDefaults.filtered=v;}else if(p=="filterValue"){this._appDefaults.filterValue=v;}else if(p=="filterOperator"){this._appDefaults.filterOperator=v;}};C.prototype._restoreAppDefaults=function(){if(this._appDefaults){this.setProperty("sorted",this._appDefaults.sorted,true);this.setProperty("sortOrder",this._appDefaults.sortOrder,true);this.setProperty("filtered",this._appDefaults.filtered,true);this.setProperty("filterValue",this._appDefaults.filterValue,true);this.setProperty("filterOperator",this._appDefaults.filterOperator,true);this._renderSortIcon();this._renderFilterIcon();}};C.prototype.setSorted=function(f){this.setProperty("sorted",f,true);this._setAppDefault("sorted",f);this._renderSortIcon();return this;};C.prototype.setSortOrder=function(t){this.setProperty("sortOrder",t,true);this._setAppDefault("sortOrder",t);this._renderSortIcon();return this;};C.prototype.setFiltered=function(f){this.setProperty("filtered",f,true);this._setAppDefault("filtered",f);this._renderFilterIcon();return this;};C.prototype.setFilterValue=function(v){this.setProperty("filterValue",v,true);this._setAppDefault("filterValue",v);var m=this.getMenu();if(m&&m instanceof sap.ui.table.ColumnMenu){m._setFilterValue(v);}return this;};C.prototype.setFilterOperator=function(v){this.setProperty("filterOperator",v,true);this._setAppDefault("filterOperator",v);return this;};C.prototype.onmousedown=function(e){var m=this.getAggregation("menu");this._bSkipOpen=m&&m.bOpen;};C.prototype.onmouseout=function(e){if(this._bSkipOpen&&q.sap.checkMouseEnterOrLeave(e,this.getDomRef())){this._bSkipOpen=false;}};C.prototype._openMenu=function(d,w){if(this._bSkipOpen){this._bSkipOpen=false;return;}var m=this.getMenu();var e=this.fireColumnMenuOpen({menu:m});if(e){var c=sap.ui.core.Popup.Dock;var f=d;if(!d){d=this.getDomRef();f=this.getFocusDomRef();}m.open(!!w,f,c.BeginTop,c.BeginBottom,d,"none none");}};C.prototype.toggleSort=function(){this.sort(this.getSorted()&&this.getSortOrder()===sap.ui.table.SortOrder.Ascending);};C.prototype.sort=function(d,A){var t=this.getParent();if(t){t.pushSortedColumn(this,A);var n=d?sap.ui.table.SortOrder.Descending:sap.ui.table.SortOrder.Ascending;var e=t.fireSort({column:this,sortOrder:n,columnAdded:A});if(e){var s=[];var c=t._aSortedColumns;var f=t.getColumns();for(var i=0,l=f.length;i<l;i++){f[i].setProperty("sorted",false,true);f[i].setProperty("sortOrder",sap.ui.table.SortOrder.Ascending,true);f[i]._renderSortIcon();if(q.inArray(f[i],c)<0){delete f[i]._oSorter;}}for(var i=0,l=c.length;i<l;i++){c[i].setProperty("sorted",true,true);c[i].setProperty("sortOrder",n,true);c[i]._renderSortIcon();if(this===c[i]){this._oSorter=new S(c[i].getSortProperty(),c[i].getSortOrder()===sap.ui.table.SortOrder.Descending);}s.push(c[i]._oSorter);}if(t.isBound("rows")){t.getBinding("rows").sort(s);if(this._afterSort){this._afterSort();}}this._renderSortIcon();}}return this;};function g(i){var r=sap.ui.getCore().createRenderManager(),h=r.getHTML(i);r.destroy();return h;}C.prototype._renderSortIcon=function(){var t=this.getParent();if(t&&t.getDomRef()){if(this.getSorted()){var c=sap.ui.getCore().getConfiguration().getTheme();var i=sap.ui.getCore().byId(this.getId()+"-sortIcon")||sap.ui.table.TableHelper.createImage(this.getId()+"-sortIcon");i.addStyleClass("sapUiTableColIconsOrder");if(this.getSortOrder()===sap.ui.table.SortOrder.Ascending){i.setSrc(sap.ui.resource("sap.ui.table","themes/"+c+"/img/ico12_sort_asc.gif"));}else{i.setSrc(sap.ui.resource("sap.ui.table","themes/"+c+"/img/ico12_sort_desc.gif"));}var h=g(i);this.$().find(".sapUiTableColIconsOrder").remove();q(h).prependTo(this.getDomRef("icons"));this.$().attr("aria-sort",this.getSortOrder()===sap.ui.table.SortOrder.Ascending?"ascending":"descending");this.$().find(".sapUiTableColCell").addClass("sapUiTableColSorted");}else{this.$().find(".sapUiTableColIconsOrder").remove();this.$().removeAttr("aria-sort");this.$().find(".sapUiTableColCell").removeClass("sapUiTableColSorted");}}};C.prototype._getFilter=function(){var f,p=this.getFilterProperty(),v=this.getFilterValue(),o=this.getFilterOperator(),P,s,t=this.getFilterType()||C._DEFAULT_FILTER_TYPE,i=t instanceof a,B;if(v){if(!o){B=v.match(/(.*)\s*\.\.\s*(.*)/);if(v.indexOf("=")==0){o=sap.ui.model.FilterOperator.EQ;P=v.substr(1);}else if(v.indexOf("!=")==0){o=sap.ui.model.FilterOperator.NE;P=v.substr(2);}else if(v.indexOf("<=")==0){o=sap.ui.model.FilterOperator.LE;P=v.substr(2);}else if(v.indexOf("<")==0){o=sap.ui.model.FilterOperator.LT;P=v.substr(1);}else if(v.indexOf(">=")==0){o=sap.ui.model.FilterOperator.GE;P=v.substr(2);}else if(v.indexOf(">")==0){o=sap.ui.model.FilterOperator.GT;P=v.substr(1);}else if(B){if(B[1]&&B[2]){o=sap.ui.model.FilterOperator.BT;P=B[1];s=B[2];}else if(B[1]&&!B[2]){o=sap.ui.model.FilterOperator.GE;P=B[1];}else{o=sap.ui.model.FilterOperator.LE;P=B[2];}}else if(i&&v.indexOf("*")==0&&v.lastIndexOf("*")==v.length-1){o=sap.ui.model.FilterOperator.Contains;P=v.substr(1,v.length-2);}else if(i&&v.indexOf("*")==0){o=sap.ui.model.FilterOperator.EndsWith;P=v.substr(1);}else if(i&&v.lastIndexOf("*")==v.length-1){o=sap.ui.model.FilterOperator.StartsWith;P=v.substr(0,v.length-1);}else{if(this.getDefaultFilterOperator()){o=this.getDefaultFilterOperator();}else{if(i){o=sap.ui.model.FilterOperator.Contains;}else{o=sap.ui.model.FilterOperator.EQ;}}P=v.substr(0);}if(!s){f=new F(p,o,this._parseFilterValue(P));}else{f=new F(p,o,this._parseFilterValue(P),this._parseFilterValue(s));}}else{f=new F(p,o,this._parseFilterValue(v));}}return f;};C.prototype.filter=function(v){var t=this.getParent();if(t&&t.isBound("rows")){var c=t.fireFilter({column:this,value:v});if(c){this.setProperty("filtered",!!v,true);this.setProperty("filterValue",v,true);var m=this.getMenu();if(m&&m instanceof sap.ui.table.ColumnMenu){m._setFilterValue(v);}var f=[];var d=t.getColumns();for(var i=0,l=d.length;i<l;i++){var o=d[i],h;m=o.getMenu();try{h=o._getFilter();if(m&&m instanceof sap.ui.table.ColumnMenu){m._setFilterState(sap.ui.core.ValueState.None);}}catch(e){if(m&&m instanceof sap.ui.table.ColumnMenu){m._setFilterState(sap.ui.core.ValueState.Error);}continue;}if(h){f.push(h);}}t.getBinding("rows").filter(f,sap.ui.model.FilterType.Control);this._renderFilterIcon();}}return this;};C.prototype._parseFilterValue=function(v){var f=this.getFilterType();if(f){if(q.isFunction(f)){v=f(v);}else{v=f.parseValue(v,"string");}}return v;};C.prototype._renderFilterIcon=function(){var t=this.getParent();if(t&&t.getDomRef()){var c=sap.ui.getCore().getConfiguration().getTheme();var i=sap.ui.getCore().byId(this.getId()+"-filterIcon")||sap.ui.table.TableHelper.createImage({id:this.getId()+"-filterIcon",decorative:false,alt:t._oResBundle.getText("TBL_FILTER_ICON_TEXT")});i.$().remove();i.addStyleClass("sapUiTableColIconsFilter");if(this.getFiltered()){i.setSrc(sap.ui.resource("sap.ui.table","themes/"+c+"/img/ico12_filter.gif"));var h=g(i);q(h).prependTo(this.getDomRef("icons"));this.$().find(".sapUiTableColCell").addClass("sapUiTableColFiltered");}else{this.$().find(".sapUiTableColCell").removeClass("sapUiTableColFiltered");}}};C.prototype._restoreIcons=function(){if(this.getSorted()){this._renderSortIcon();}if(this.getFiltered()){this._renderFilterIcon();}};C.prototype.shouldRender=function(){return this.getVisible()&&!this.getGrouped();};C.prototype.setFilterType=function(t){var o=t;if(typeof(t)==="string"){try{var c=q.sap.parseJS(t);if(typeof(c.type)==="string"){var f=q.sap.getObject(c.type);o=f&&new f(c.formatOptions,c.constraints);}}catch(e){var f=q.sap.getObject(t);o=f&&new f();}if(!(o instanceof T)){q.sap.log.error("The filter type is not an instance of sap.ui.model.Type! Ignoring the filter type!");o=undefined;}}this.setProperty("filterType",o,true);return this;};C.prototype.getIndex=function(){var t=this.getParent();if(t){return t.indexOfColumn(this);}else{return-1;}};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.ColumnMenu')){jQuery.sap.declare('sap.ui.table.ColumnMenu');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.RenderManager');jQuery.sap.require('sap.ui.unified.Menu');jQuery.sap.require('sap.ui.unified.MenuItem');sap.ui.define("sap/ui/table/ColumnMenu",['jquery.sap.global','sap/ui/core/RenderManager','./library','sap/ui/unified/Menu','sap/ui/unified/MenuItem'],function(q,R,a,M,b){"use strict";var C=M.extend("sap.ui.table.ColumnMenu",{metadata:{library:"sap.ui.table"}});C.prototype.init=function(){if(M.prototype.init){M.prototype.init.apply(this,arguments);}this.addStyleClass("sapUiTableColumnMenu");this.oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.table");this._bInvalidated=true;this._iPopupClosedTimeoutId=null;this._oColumn=null;this._oTable=null;this._attachPopupClosed();};C.prototype.exit=function(){if(M.prototype.exit){M.prototype.exit.apply(this,arguments);}window.clearTimeout(this._iPopupClosedTimeoutId);this._detachEvents();this._oColumn=this._oTable=null;};C.prototype.onThemeChanged=function(){if(this.getDomRef()){this._invalidate();}};C.prototype.setParent=function(p){this._detachEvents();this._invalidate();this._updateReferences(p);this._attachEvents();return M.prototype.setParent.apply(this,arguments);};C.prototype._updateReferences=function(p){this._oColumn=p;if(p){this._oTable=this._oColumn.getParent();if(this._oTable){}}};C.prototype._attachEvents=function(){if(this._oTable){this._oTable.attachColumnVisibility(this._invalidate,this);this._oTable.attachColumnMove(this._invalidate,this);}};C.prototype._detachEvents=function(){if(this._oTable){this._oTable.detachColumnVisibility(this._invalidate,this);this._oTable.detachColumnMove(this._invalidate,this);}};C.prototype._invalidate=function(){this._bInvalidated=true;};C.prototype._attachPopupClosed=function(){var t=this;if(!sap.ui.Device.support.touch){this.getPopup().attachClosed(function(){t._iPopupClosedTimeoutId=window.setTimeout(function(){if(t._oColumn){if(t._lastFocusedDomRef){t._lastFocusedDomRef.focus();}else{t._oColumn.focus();}}},0);});}};C.prototype.open=function(){if(this._bInvalidated){this._bInvalidated=false;this.destroyItems();this._addMenuItems();}if(this.getItems().length>0){this._lastFocusedDomRef=arguments[4];M.prototype.open.apply(this,arguments);}};C.prototype._addMenuItems=function(){if(this._oColumn){this._addSortMenuItem(false);this._addSortMenuItem(true);this._addFilterMenuItem();this._addGroupMenuItem();this._addFreezeMenuItem();this._addColumnVisibilityMenuItem();}};C.prototype._addSortMenuItem=function(d){var c=this._oColumn;if(c.isSortableByMenu()){var D=d?"desc":"asc";var i=d?"sort-descending":"sort-ascending";if(c.getSortProperty()&&c.getShowSortMenuEntry()){this.addItem(this._createMenuItem(D,"TBL_SORT_"+D.toUpperCase(),i,function(e){c.sort(d,e.getParameter("ctrlKey")===true);}));}}};C.prototype._addFilterMenuItem=function(){var c=this._oColumn;var t=c.getParent();var e=false;if(t){e=t.getEnableCustomFilter();}if(c.isFilterableByMenu()){if(e){this.addItem(this._createMenuItem("filter","TBL_FILTER_ITEM","filter",function(){t.fireCustomFilter({column:c});}));}else{this.addItem(this._createMenuTextFieldItem("filter","TBL_FILTER","filter",c.getFilterValue(),function(){c.filter(this.getValue());}));}}};C.prototype._addGroupMenuItem=function(){var c=this._oColumn;var t=this._oTable;if(c.isGroupableByMenu()){if(t&&t.getEnableGrouping()&&c.getSortProperty()){this.addItem(this._createMenuItem("group","TBL_GROUP",null,q.proxy(function(){t.setGroupBy(c);},this)));}}};C.prototype._addFreezeMenuItem=function(){var c=this._oColumn;var t=this._oTable;if(t&&t.getEnableColumnFreeze()){var i=q.inArray(c,t.getColumns());var I=i+1==t.getFixedColumnCount();this.addItem(this._createMenuItem("freeze",I?"TBL_UNFREEZE":"TBL_FREEZE",null,function(){var e=t.fireColumnFreeze({column:c});if(e){if(I){t.setFixedColumnCount(0);}else{t.setFixedColumnCount(i+1);}}}));}};C.prototype._addColumnVisibilityMenuItem=function(){var t=this._oTable;if(t&&t.getShowColumnVisibilityMenu()){var c=this._createMenuItem("column-visibilty","TBL_COLUMNS");this.addItem(c);var o=new M(c.getId()+"-menu");o.addStyleClass("sapUiTableColumnVisibilityMenu");c.setSubmenu(o);var d=t.getColumns();if(t.getColumnVisibilityMenuSorter&&typeof t.getColumnVisibilityMenuSorter==="function"){var s=t.getColumnVisibilityMenuSorter();if(typeof s==="function"){d=d.sort(s);}}var B=t.getBinding();var A=sap.ui.model&&sap.ui.model.analytics&&B instanceof sap.ui.model.analytics.AnalyticalBinding;for(var i=0,l=d.length;i<l;i++){var e=d[i];if(A&&e instanceof sap.ui.table.AnalyticalColumn){var Q=B.getAnalyticalQueryResult();var E=Q.getEntityType();var m=B.getModel().getProperty("/#"+E.getTypeDescription().name+"/"+e.getLeadingProperty()+"/sap:visible");if(m&&(m.value==="false"||m.value===false)){continue;}}var f=this._createColumnVisibilityMenuItem(o.getId()+"-item-"+i,e);o.addItem(f);}}};C.prototype._createColumnVisibilityMenuItem=function(i,c){var t=c.getName()||(c.getLabel()&&c.getLabel().getText?c.getLabel().getText():null);return new b(i,{text:t,icon:c.getVisible()?"sap-icon://accept":null,select:q.proxy(function(e){var m=e.getSource();var v=!c.getVisible();if(v||this._oTable._getVisibleColumnCount()>1){var T=c.getParent();var E=true;if(T&&(T instanceof sap.ui.table.Table||T instanceof sap.ui.table.DataTable)){E=T.fireColumnVisibility({column:c,newVisible:v});}if(E){c.setVisible(v);}m.setIcon(v?"sap-icon://accept":null);}},this)});};C.prototype._createMenuItem=function(i,t,I,h){return new b(this.getId()+"-"+i,{text:this.oResBundle.getText(t),icon:I?"sap-icon://"+I:null,select:h||function(){}});};C.prototype._createMenuTextFieldItem=function(i,t,I,v,h){q.sap.require("sap.ui.unified.MenuTextFieldItem");h=h||function(){};return new sap.ui.unified.MenuTextFieldItem(this.getId()+"-"+i,{label:this.oResBundle.getText(t),icon:I?"sap-icon://"+I:null,value:v,select:h||function(){}});};C.prototype._setFilterValue=function(v){var c=this.getParent();var t=(c?c.getParent():undefined);var f=sap.ui.getCore().byId(this.getId()+"-filter");if(f&&(t&&!t.getEnableCustomFilter())){f.setValue(v);}return this;};C.prototype._setFilterState=function(f){var c=this.getParent();var t=(c?c.getParent():undefined);var F=sap.ui.getCore().byId(this.getId()+"-filter");if(F&&(t&&!t.getEnableCustomFilter())){F.setValueState(f);}return this;};return C;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.DataTableRenderer')){jQuery.sap.declare('sap.ui.table.DataTableRenderer');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Renderer');sap.ui.define("sap/ui/table/DataTableRenderer",['jquery.sap.global','sap/ui/core/Renderer','./TreeTableRenderer'],function(q,R,T){"use strict";var D=R.extend(T);return D;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.Row')){jQuery.sap.declare('sap.ui.table.Row');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Element');sap.ui.define("sap/ui/table/Row",['jquery.sap.global','sap/ui/core/Element','./library'],function(q,E,l){"use strict";var R=E.extend("sap.ui.table.Row",{metadata:{library:"sap.ui.table",defaultAggregation:"cells",aggregations:{cells:{type:"sap.ui.core.Control",multiple:true,singularName:"cell"}}}});R.prototype.getIndex=function(){var t=this.getParent();if(t){var r=t.indexOfRow(this);var n=t.getFixedRowCount();if(n>0&&r<n){return r;}var N=t.getFixedBottomRowCount();var v=t.getVisibleRowCount();if(N>0&&r>=v-N){var b=t.getBinding("rows");if(b&&b.getLength()>=v){return b.getLength()-(v-r);}else{return r;}}var f=t.getFirstVisibleRow();return f+r;}return-1;};R.prototype.getDomRefs=function(j){var d={};var a=q.sap.domById;if(j===true){a=q.sap.byId;}var t=this.getParent();if(t){var r=t.indexOfRow(this);d.rowSelector=a(t.getId()+"-rowsel"+r);}d.rowScrollPart=a(this.getId());d.rowFixedPart=a(this.getId()+"-fixed");d.rowSelectorText=a(this.getId()+"-rowselecttext");if(j===true){d.row=d.rowScrollPart;if(d.rowSelector&&d.rowSelector.length>0){d.row=d.row.add(d.rowSelector);}else{d.rowSelector=undefined;}if(d.rowFixedPart.length>0){d.row=d.row.add(d.rowFixedPart);}else{d.rowFixedPart=undefined;}}return d;};R.prototype._updateSelection=function(t,T,s){var i=t.isIndexSelected(this.getIndex());var d=this.getDomRefs(true);var S="rowSelect";if(i){S="rowDeselect";}if(d.rowSelector){d.rowSelector.attr("title",T.mouse[S]);d.rowSelector.attr("aria-label",T.keyboard[S]);}if(d.rowSelectorText){d.rowSelectorText.text(T.keyboard[S]);}var r=d.rowScrollPart;if(d.rowFixedPart){r=r.add(d.rowFixedPart);}if(s){r.attr("title",T.mouse[S]);r.attr("aria-label",T.keyboard[S]);}else{r.removeAttr("title");r.removeAttr("aria-label");}if(d.row){d.row.toggleClass("sapUiTableRowSel",i);d.row.children("td").add(d.row).attr("aria-selected",i.toString());}};return R;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.Table')){jQuery.sap.declare('sap.ui.table.Table');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.IntervalTrigger');jQuery.sap.require('sap.ui.core.ScrollBar');jQuery.sap.require('sap.ui.core.delegate.ItemNavigation');jQuery.sap.require('sap.ui.core.theming.Parameters');jQuery.sap.require('sap.ui.model.SelectionModel');jQuery.sap.require('sap.ui.model.ChangeReason');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('jquery.sap.dom');sap.ui.define("sap/ui/table/Table",['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IntervalTrigger','sap/ui/core/ScrollBar','sap/ui/core/delegate/ItemNavigation','sap/ui/core/theming/Parameters','sap/ui/model/SelectionModel','sap/ui/model/ChangeReason','./Row','./library','sap/ui/core/IconPool','jquery.sap.dom'],function(q,C,I,S,a,P,b,c,R,d,e){"use strict";var T=C.extend("sap.ui.table.Table",{metadata:{library:"sap.ui.table",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'auto'},rowHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderVisible:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCount:{type:"int",group:"Appearance",defaultValue:10},firstVisibleRow:{type:"int",group:"Appearance",defaultValue:0},selectionMode:{type:"sap.ui.table.SelectionMode",group:"Behavior",defaultValue:sap.ui.table.SelectionMode.Multi},selectionBehavior:{type:"sap.ui.table.SelectionBehavior",group:"Behavior",defaultValue:sap.ui.table.SelectionBehavior.RowSelector},selectedIndex:{type:"int",group:"Appearance",defaultValue:-1},editable:{type:"boolean",group:"Behavior",defaultValue:true},navigationMode:{type:"sap.ui.table.NavigationMode",group:"Behavior",defaultValue:sap.ui.table.NavigationMode.Scrollbar},threshold:{type:"int",group:"Appearance",defaultValue:100},enableColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true},enableGrouping:{type:"boolean",group:"Behavior",defaultValue:false},showColumnVisibilityMenu:{type:"boolean",group:"Appearance",defaultValue:false},showNoData:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCountMode:{type:"sap.ui.table.VisibleRowCountMode",group:"Appearance",defaultValue:sap.ui.table.VisibleRowCountMode.Fixed},minAutoRowCount:{type:"int",group:"Appearance",defaultValue:5},fixedColumnCount:{type:"int",group:"Appearance",defaultValue:0},fixedRowCount:{type:"int",group:"Appearance",defaultValue:0},fixedBottomRowCount:{type:"int",group:"Appearance",defaultValue:0},enableColumnFreeze:{type:"boolean",group:"Behavior",defaultValue:false},enableCellFilter:{type:"boolean",group:"Behavior",defaultValue:false},showOverlay:{type:"boolean",group:"Appearance",defaultValue:false},enableSelectAll:{type:"boolean",group:"Behavior",defaultValue:true},enableCustomFilter:{type:"boolean",group:"Behavior",defaultValue:false},enableBusyIndicator:{type:"boolean",group:"Behavior",defaultValue:false},allowColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},noDataText:{type:"string",group:"Appearance",defaultValue:null,deprecated:true}},defaultAggregation:"columns",aggregations:{title:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},footer:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},extension:{type:"sap.ui.core.Control",multiple:true,singularName:"extension"},columns:{type:"sap.ui.table.Column",multiple:true,singularName:"column",bindable:"bindable"},rows:{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable"},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false}},associations:{groupBy:{type:"sap.ui.table.Column",multiple:false}},events:{rowSelectionChange:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},rowIndices:{type:"int[]"}}},columnSelect:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnResize:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},width:{type:"sap.ui.core.CSSSize"}}},columnMove:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newPos:{type:"int"}}},sort:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},sortOrder:{type:"sap.ui.table.SortOrder"},columnAdded:{type:"boolean"}}},filter:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},group:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnVisibility:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},visible:{type:"boolean"}}},cellClick:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}}},cellContextmenu:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},cellDomRef:{type:"Object"},rowIndex:{type:"int"},columnIndex:{type:"int"},columnId:{type:"string"},rowBindingContext:{type:"sap.ui.model.Context"}}},columnFreeze:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},customFilter:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}}}});T.ResizeTrigger=new I(300);e.insertFontFaceStyle();T.prototype.init=function(){this._iBaseFontSize=parseFloat(q("body").css("font-size"))||16;this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.table");this._bAccMode=sap.ui.getCore().getConfiguration().getAccessibility();this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._initSelectionModel(sap.ui.model.SelectionModel.MULTI_SELECTION);this._iColMinWidth=20;if('ontouchstart'in document){this._iColMinWidth=88;}this._oCalcColumnWidths=[];this._aIdxCols2Cells=[];this._aVisibleColumns=[];var f={onAfterRendering:function(E){E.srcControl.$("sb").attr("tabindex","-1").css("outline","none");}};this._oVSb=new S(this.getId()+"-vsb",{size:"100%"});this._oVSb._bLargeDataScrolling=false;this._oVSb.attachScroll(this.onvscroll,this);this._oVSb.addDelegate(f);this._oHSb=new S(this.getId()+"-hsb",{size:"100%",contentSize:"0px",vertical:false});this._oHSb.attachScroll(this.onhscroll,this);this._oHSb.addDelegate(f);this._bActionMode=false;this._iLastFixedColIndex=-1;this._bInheritEditableToControls=false;this._bAllowColumnHeaderTextSelection=false;this._bCallUpdateTableCell=false;this._iTimerDelay=250;this._doubleclickDelay=300;this._clicksRegistered=0;this._bjQueryLess18=q.sap.Version(q.fn.jquery).compareTo("1.8")<0;this._iDataRequestedCounter=0;this._bDataRequestedListenersAttached=false;};T.prototype.exit=function(){this._oVSb.destroy();this._oHSb.destroy();if(this._oPaginator){this._oPaginator.destroy();}this._destroyItemNavigation();this._cleanUpTimers();this._detachEvents();};T.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();}};T.prototype.onBeforeRendering=function(){this._cleanUpTimers();this._detachEvents();};T.prototype.onAfterRendering=function(){this._bOnAfterRendering=true;var $=this.$();if('ontouchstart'in document){$.addClass("sapUiTableTouch");}this._renderOverlay();this._updateVSb(true);this._updateTableContent();this._handleResize();this._attachEvents();var f=this.getColumns();for(var i=0,l=f.length;i<l;i++){if(f[i].getVisible()){f[i]._restoreIcons();}}if(!this._bAllowColumnHeaderTextSelection){this._disableTextSelection($.find(".sapUiTableColHdrCnt"));}this._bOnAfterRendering=false;this._initItemNavigation();if(this._bDetermineVisibleCols===true){this._determineVisibleCols();this._bDetermineVisibleCols=false;}};T.prototype._renderOverlay=function(){var $=this.$(),f=$.find(".sapUiTableOverlay"),s=this.getShowOverlay();if(s&&f.length===0){f=q("<div>").addClass("sapUiOverlay sapUiTableOverlay").css("z-index","1");$.append(f);}else if(!s){f.remove();}};T.prototype.setShowOverlay=function(s){this.setProperty("showOverlay",s,true);this._renderOverlay();return this;};T.prototype._updateTableContent=function(){this._updateNoData();this._updateSelection();if(this._modifyRow){q.each(this.getRows(),function(i,r){this._modifyRow(i+this.getFirstVisibleRow(),r.$());this._modifyRow(i+this.getFirstVisibleRow(),r.$("fixed"));}.bind(this));}var B=this.getBinding("rows");var f=this.getFixedRowCount();var F=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();q.each(this.getRows(),function(i,r){var $=r.getDomRefs(true);if($.rowSelector){if(r.getBindingContext()&&this._isRowSelectable(r.getIndex())){$.rowSelector.attr("title",this._oResBundle.getText("TBL_ROW_SELECT"));}else{$.rowSelector.attr("title","");}}if(f>0){$.row.toggleClass("sapUiTableFixedTopRow",i<f);$.row.toggleClass("sapUiTableFixedLastTopRow",i==f-1);}if(F>0){var g=false;if(B){if(B.getLength()>=v){g=(i==v-F-1);}else{g=(this.getFirstVisibleRow()+i)==(B.getLength()-F-1)&&(this.getFirstVisibleRow()+i)<B.getLength();}}$.row.toggleClass("sapUiTableFixedPreBottomRow",g);}}.bind(this));this._updateRowHeader();if(this._bOnAfterRendering&&(this._bCallUpdateTableCell||typeof this._updateTableCell==="function")){var o=this.mBindingInfos["rows"];q.each(this.getRows(),function(i,r){var A=this.getFirstVisibleRow()+i;q.each(r.getCells(),function(i,g){if(g._updateTableCell){g._updateTableCell(g,g.getBindingContext(o&&o.model),g.$().closest("td"),A);}if(this._updateTableCell){this._updateTableCell(g,g.getBindingContext(o&&o.model),g.$().closest("td"),A);}});}.bind(this));}};T.prototype._initItemNavigation=function(){var $=this.$();var f=this._getVisibleColumnCount();var t=f;var h=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(!this._oColHdrItemNav){this._oColHdrItemNav=new a();this._oColHdrItemNav.setCycling(false);this.addDelegate(this._oColHdrItemNav);}var g=[];if(this.getFixedColumnCount()==0){g=$.find(".sapUiTableCtrl td[tabindex]").get();}else{var j=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowFixed');var k=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowFixed');var l=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowScroll');var m=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowScroll');var n=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowFixedBottom');var o=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowFixedBottom');for(var i=0;i<this.getVisibleRowCount();i++){g=g.concat(j.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());g=g.concat(k.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());g=g.concat(l.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());g=g.concat(m.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());g=g.concat(n.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());g=g.concat(o.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());}}var p=g.length;var r=0;if(h){var s=$.find(".sapUiTableRowHdr").get();for(var i=s.length-1;i>=0;i--){g.splice(i*f,0,s[i]);p++;}p--;t++;r=1;}if(this.getColumnHeaderVisible()){g=$.find(".sapUiTableCol").get().concat(g);}if(h&&this.getColumnHeaderVisible()){var u=$.find(".sapUiTableColRowHdr").get();for(var i=this._getHeaderRowCount()-1;i>=0;i--){g.splice(i*f,0,u[0]);}}if(!this._oItemNavigation){this._iLastSelectedDataRow=this._getHeaderRowCount();this._oItemNavigation=new a();this._oItemNavigation.setTableMode(true);this._oItemNavigation.attachEvent(a.Events.BeforeFocus,function(E){this.$("ariadesc").text("");},this);this._oItemNavigation.attachEvent(a.Events.AfterFocus,function(E){var v=Math.floor(E.getParameter("index")/this._oItemNavigation.iColumns);if(v>0){this._iLastSelectedDataRow=v;}},this);this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setColumns(t);this._oItemNavigation.setRootDomRef($.find(".sapUiTableCnt").get(0));this._oItemNavigation.setItemDomRefs(g);this._oItemNavigation.setFocusedIndex(r);};T.prototype._destroyItemNavigation=function(){if(this._oItemNavigation){this._oItemNavigation.destroy();this._oItemNavigation=undefined;}};T.prototype.getFocusInfo=function(){var i=this.$().find(":focus").attr("id");if(i){return{customId:i};}else{return sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}};T.prototype.applyFocusInfo=function(f){if(f&&f.customId){this.$().find("#"+f.customId).focus();}else{sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}return this;};T.prototype.setTitle=function(t){var o=t;if(typeof(t)==="string"||t instanceof String){o=sap.ui.table.TableHelper.createTextView({text:t,width:"100%"});o.addStyleClass("sapUiTableHdrTitle");}this.setAggregation("title",o);return this;};T.prototype.setFooter=function(f){var F=f;if(typeof(f)==="string"||f instanceof String){F=sap.ui.table.TableHelper.createTextView({text:f,width:"100%"});}this.setAggregation("footer",F);return this;};T.prototype.setSelectionMode=function(s){this.clearSelection();if(s===sap.ui.table.SelectionMode.Single){this._oSelection.setSelectionMode(b.SINGLE_SELECTION);}else{this._oSelection.setSelectionMode(b.MULTI_SELECTION);}this.setProperty("selectionMode",s);return this;};T.prototype.setFirstVisibleRow=function(r,o){this.setProperty("firstVisibleRow",r,true);if(this.getBinding("rows")&&!this._bRefreshing){this.updateRows();}this._updateAriaRowOfRowsText(true);if(o&&!this._$AriaLiveDomRef&&this._bAccMode){if(this._ariaLiveTimer){q.sap.clearDelayedCall(this._ariaLiveTimer);}var s=function(){if(this._oItemNavigation){this._$AriaLiveDomRef=q(this._oItemNavigation.getFocusedDomRef()).attr("aria-live","rude");var t=this;var f=function(){if(t._$AriaLiveDomRef){t._$AriaLiveDomRef.removeAttr("aria-live");delete t._$AriaLiveDomRef;}};q.sap.delayedCall(0,this,f);delete this._ariaLiveTimer;}};this._ariaLiveTimer=q.sap.delayedCall(60,this,s);}return this;};T.prototype.getAllowColumnReordering=function(){q.sap.log.warning("getAllowColumnReordering is deprecated - please use getEnableColumnReordering!");return T.prototype.getEnableColumnReordering.apply(this,arguments);};T.prototype.setAllowColumnReordering=function(){q.sap.log.warning("setAllowColumnReordering is deprecated - please use setEnableColumnReordering!");return T.prototype.setEnableColumnReordering.apply(this,arguments);};T.getMetadata().getAggregation("rows")._doesNotRequireFactory=true;T.prototype.bindRows=function(B,t,s,f){if(typeof B==="string"&&(t instanceof sap.ui.model.Sorter||q.isArray(s)&&s[0]instanceof sap.ui.model.Filter)){f=s;s=t;t=undefined;}return this.bindAggregation("rows",B,t,s,f);};T.prototype._bindAggregation=function(n,p,t,s,f){sap.ui.core.Element.prototype._bindAggregation.apply(this,arguments);var B=this.getBinding("rows");if(n==="rows"&&B){B.attachChange(this._onBindingChange,this);}this._initSelectionModel(sap.ui.model.SelectionModel.MULTI_SELECTION);if(B&&this.isTreeBinding("rows")&&!B.hasListeners("selectionChanged")){B.attachSelectionChanged(this._onSelectionChanged,this);}return this;};T.prototype._initSelectionModel=function(s){if(this._oSelection){this._oSelection.detachSelectionChanged(this._onSelectionChanged,this);}this._oSelection=new sap.ui.model.SelectionModel(s);this._oSelection.attachSelectionChanged(this._onSelectionChanged,this);return this;};T.prototype._onBindingChange=function(E){var r=typeof(E)==="object"?E.getParameter("reason"):E;if(r==="sort"||r==="filter"){this.clearSelection();this.setFirstVisibleRow(0);}};T.prototype.unbindAggregation=function(n,s){var B=this.getBinding("rows");if(n==="rows"&&B){B.detachChange(this._onBindingChange);this._restoreAppDefaultsColumnHeaderSortFilter();this._invalidateColumnMenus();this.updateRows();}s=n==="rows"&&this.isBound("rows");return sap.ui.core.Element.prototype.unbindAggregation.apply(this,[n,s]);};T.prototype.setVisibleRowCountMode=function(v){this.setProperty("visibleRowCountMode",v);this._handleRowCountMode();return this;};T.prototype.setVisibleRowCount=function(v){if(v!=null&&!isFinite(v)){return this;}var f=this.getFixedRowCount()+this.getFixedBottomRowCount();if(v<=f&&f>0){q.sap.log.error("Table: "+this.getId()+" visibleRowCount('"+v+"') must be bigger than number of fixed rows('"+(this.getFixedRowCount()+this.getFixedBottomRowCount())+"')");return this;}v=this.validateProperty("visibleRowCount",v);if(this.getBinding("rows")&&this.getBinding("rows").getLength()<=v){this.setProperty("firstVisibleRow",0);}this.setProperty("visibleRowCount",v);return this;};T.prototype.setTooltip=function(t){q.sap.log.warning("The aggregation tooltip is not supported for sap.ui.table.Table");return this.setAggregation("tooltip",t,true);};T.prototype.refreshRows=function(E){var r=typeof(E)==="object"?E.getParameter("reason"):E;if(r==sap.ui.model.ChangeReason.Refresh){this._attachBindingListener();}this._bBusyIndicatorAllowed=true;this._bRefreshing=true;this._onBindingChange(E);this._updateBindingContexts(true);this._bRefreshing=false;};T.prototype.updateRows=function(r){this._setBusy(r?{changeReason:r}:false);var s=this.getFirstVisibleRow();s=Math.max(s,0);if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar&&this._getRowCount()>0){s=Math.min(s,Math.max(this._getRowCount()-this.getVisibleRowCount(),0));}this.setProperty("firstVisibleRow",s,true);if(this._oVSb.getScrollPosition()!==s){this._oVSb.setScrollPosition(s);this._updateAriaRowOfRowsText(true);}if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){var n=1;if(s<this.getBinding("rows").getLength()){n=Math.ceil((s+1)/this.getVisibleRowCount());}if(n!==this._oPaginator.getCurrentPage()){this.setProperty("firstVisibleRow",(n-1)*this.getVisibleRowCount(),true);this._oPaginator.setCurrentPage(n);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}}}if(this.getDomRef()){var D=(r==c.Change?0:50);this._sBindingTimer=this._sBindingTimer||q.sap.delayedCall(D,this,function(){if(!this.bIsDestroyed){this._determineVisibleCols();this._updateBindingContexts();this._updateVSb();this._updateTableContent();this._sBindingTimer=undefined;this.fireEvent("_rowsUpdated");}});}};T.prototype.insertRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"insertRow\" cannot be used programmatically!");};T.prototype.addRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"addRow\" cannot be used programmatically!");};T.prototype.removeRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"removeRow\" cannot be used programmatically!");};T.prototype.removeAllRows=function(){q.sap.log.error("The control manages the rows aggregation. The method \"removeAllRows\" cannot be used programmatically!");};T.prototype.destroyRows=function(){q.sap.log.error("The control manages the rows aggregation. The method \"destroyRows\" cannot be used programmatically!");};T.prototype.autoResizeColumn=function(i){var o=this.getColumns()[i];this._iColumnResizeStart=null;var n=this._calculateAutomaticColumnWidth(i);if(n==null){return;}o._iNewWidth=n;this._oCalcColumnWidths[i]=o._iNewWidth;this._onColumnResized(null,i);};T.prototype._attachEvents=function(){var $=this.$();$.find(".sapUiTableColHdrScr").scroll(q.proxy(this._oncolscroll,this));$.find(".sapUiTableCtrlScr").scroll(q.proxy(this._oncntscroll,this));$.find(".sapUiTableCtrlScrFixed").scroll(q.proxy(this._oncntscroll,this));$.find(".sapUiTableRowHdr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableRowHdr").index(this);$.find(".sapUiTableCtrlFixed > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableCtrlFixed > tbody > tr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableCtrlFixed > tbody > tr").index(this);$.find(".sapUiTableRowHdr").filter(":eq("+(i)+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableRowHdr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableCtrlScroll > tbody > tr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableCtrlScroll > tbody > tr").index(this);$.find(".sapUiTableRowHdr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableRowHdr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableColRsz").mousedown(q.proxy(this._onColumnResizeStart,this));this._enableColumnAutoResizing();T.ResizeTrigger.addListener(this._checkTableSize,this);this._oHSb.bind($.find(".sapUiTableCtrlScr").get(0));this._oVSb.bind($.find(".sapUiTableCtrlScr").get(0));this._oHSb.bind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.bind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.bind($.find(".sapUiTableRowHdrScr").get(0));q("body").bind('webkitTransitionEnd transitionend',q.proxy(function(E){if(q(E.target).has($).length>0){this._handleResize();}},this));};T.prototype._detachEvents=function(){var $=this.$();$.find(".sapUiTableRowHdrScr").unbind();$.find(".sapUiTableColHdrScr").unbind();$.find(".sapUiTableCtrl > tbody > tr").unbind();$.find(".sapUiTableRowHdr").unbind();T.ResizeTrigger.removeListener(this._checkTableSize,this);$.find(".sapUiTableColRsz").unbind();this._oHSb.unbind($.find(".sapUiTableCtrlScr").get(0));this._oVSb.unbind($.find(".sapUiTableCtrlScr").get(0));this._oHSb.unbind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.unbind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.unbind($.find(".sapUiTableRowHdrScr").get(0));q("body").unbind('webkitTransitionEnd transitionend');};T.prototype._cleanUpTimers=function(){if(this._sBindingTimer){q.sap.clearDelayedCall(this._sBindingTimer);this._sBindingTimer=undefined;}if(this._sScrollBarTimer){q.sap.clearDelayedCall(this._sScrollBarTimer);this._sScrollBarTimer=undefined;}if(this._sDelayedMenuTimer){q.sap.clearDelayedCall(this._sDelayedMenuTimer);this._sDelayedMenuTimer=undefined;}if(this._sDelayedActionTimer){q.sap.clearDelayedCall(this._sDelayedActionTimer);this._sDelayedActionTimer=undefined;}if(this._sColHdrPosTimer){q.sap.clearDelayedCall(this._sColHdrPosTimer);this._sColHdrPosTimer=undefined;}if(this._visibleRowCountTimer){q.sap.clearDelayedCall(this._visibleRowCountTimer);this._visibleRowCountTimer=undefined;}T.ResizeTrigger.removeListener(this._checkTableSize,this);};T.prototype._getFixedBottomRowContexts=function(B){var f=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();var g;if(f>0&&(v-f)<B.getLength()){g=B.getContexts(B.getLength()-f,f,1);}else{g=[];}return g;};T.prototype._createRows=function(s){var f=this.getFirstVisibleRow();var v=this.getVisibleRowCount();s=s===undefined?f:s;var t=new R(this.getId()+"-rows");var g=this.getColumns();var h=0;for(var i=0,l=g.length;i<l;i++){if(g[i].getVisible()){var o=g[i].getTemplate();if(o){var j=o.clone("col"+i);if(this._bInheritEditableToControls&&!this.getEditable()&&j.setEditable){j.setEditable(false);}j.data("sap-ui-colindex",i);j.data("sap-ui-colid",g[i].getId());t.addCell(j);this._aIdxCols2Cells[i]=h++;}}}this.destroyAggregation("rows",true);var k;var B=this.getBinding("rows");var m=this.mBindingInfos["rows"];if(B&&v>0){var n=this.getThreshold()?Math.max(this.getVisibleRowCount(),this.getThreshold()):0;var F=this.getFixedBottomRowCount();k=B.getContexts(s,v-F,n);this._setBusy({requestedLength:v-F,receivedLength:k.length,contexts:k});var p=[];p=this._getFixedBottomRowContexts(B);k=k.concat(p);if(F>0&&(v-F)<B.getLength()){this._setBusy({requestedLength:F,receivedLength:p.length,contexts:p});}}for(var i=0;i<v;i++){var j=t.clone("row"+i);if(k&&k[i]){j.setBindingContext(k[i],m.model);j._bHidden=false;}else{if(m){j.setBindingContext(null,m.model);}else{j.setBindingContext(null);}j._bHidden=true;}this.addAggregation("rows",j,true);}t.destroy();};T.prototype._updateHSb=function(){var $=this.$();var i=$.find(".sapUiTableCtrlScroll").width();if(!!sap.ui.Device.browser.safari){i=Math.max(i,this._getColumnsWidth(this.getFixedColumnCount()));}if(i>$.find(".sapUiTableCtrlScr").width()){if(!$.hasClass("sapUiTableHScr")){$.addClass("sapUiTableHScr");if(!!sap.ui.Device.browser.safari){var f=$.find(".sapUiTableCtrlScroll, .sapUiTableColHdrScr > .sapUiTableColHdr");if(this._bjQueryLess18){f.width(i);}else{f.outerWidth(i);}}}var s=$.find(".sapUiTableCtrlFixed").width();if($.find(".sapUiTableRowHdrScr:visible").length>0){s+=$.find(".sapUiTableRowHdrScr").width();}var g=$.find(".sapUiTableHSb");if(this._bRtlMode){g.css('padding-right',s+'px');}else{g.css('padding-left',s+'px');}var m=g.parent().width();g.css('max-width',m+"px");this._oHSb.setContentSize(i+"px");if(this._oHSb.getDomRef()){this._oHSb.rerender();}}else{if($.hasClass("sapUiTableHScr")){$.removeClass("sapUiTableHScr");if(!!sap.ui.Device.browser.safari){$.find(".sapUiTableCtrlScroll, .sapUiTableColHdr").css("width","");}}}this._syncHeaderAndContent();};T.prototype._updateVSb=function(o){var $=this.$();var D=false;var f=false;var B=this.getBinding("rows");if(B){var F=this.getFixedRowCount();if(F>0){var O=$.find('.sapUiTableCtrl.sapUiTableCtrlRowScroll.sapUiTableCtrlScroll')[0].offsetTop;this.$().find('.sapUiTableVSb').css('top',(O-1)+'px');f=true;}var i=this.getFixedBottomRowCount();if(i>0){var g=$.find('.sapUiTableCtrl.sapUiTableCtrlRowScroll.sapUiTableCtrlScroll')[0].offsetHeight;this.$().find('.sapUiTableVSb').css('height',g+'px');f=true;}var l=B.getLength();var s=Math.max(0,(l||0)-this.getVisibleRowCount());if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){var n=Math.ceil((l||0)/this.getVisibleRowCount());this._oPaginator.setNumberOfPages(n);var p=Math.min(n,Math.ceil((this.getFirstVisibleRow()+1)/this.getVisibleRowCount()));this.setProperty("firstVisibleRow",(Math.max(p,1)-1)*this.getVisibleRowCount(),true);this._oPaginator.setCurrentPage(p);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");}if(this._sScrollBarTimer!=undefined){q.sap.clearDelayedCall(this._sScrollBarTimer);}}else{if(s>0){if(!$.hasClass("sapUiTableVScr")){$.addClass("sapUiTableVScr");D=true;}}else{if(l>0){this.setFirstVisibleRow(0);}if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");D=true;}}if(o||f||s!==this._oVSb.getSteps()||this.getFirstVisibleRow()!==this._oVSb.getScrollPosition()){q.sap.clearDelayedCall(this._sScrollBarTimer);this._sScrollBarTimer=undefined;this._sScrollBarTimer=q.sap.delayedCall(o?0:250,this,function(){var s=0;if(B){s=Math.max(0,(B.getLength()||0)-this.getVisibleRowCount());}if($){$.toggleClass("sapUiTableVScr",s>0);}this._oVSb.setSteps(s);if(this._oVSb.getDomRef()){this._oVSb.rerender();}this._oVSb.setScrollPosition(this.getFirstVisibleRow());this._sScrollBarTimer=undefined;});}}}else{if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){this._oPaginator.setNumberOfPages(0);this._oPaginator.setCurrentPage(0);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}}else{if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");D=true;}}}if(D&&!this._bOnAfterRendering){this._handleResize();}};T.prototype._updateBindingContexts=function(s){var r=this.getRows(),B=this.getBinding("rows"),o=this.mBindingInfos["rows"],f,g,F,i=this.getFixedRowCount(),h=this.getFixedBottomRowCount(),v=this.getVisibleRowCount();if(B){var t;if((i>0||h>0)&&r.length>0){var j=i+h;t=this.getThreshold()?Math.max((this.getVisibleRowCount()-j),this.getThreshold()):0;var k=Math.max(0,r.length-j);g=B.getContexts(this.getFirstVisibleRow()+i,k,t);this._setBusy({requestedLength:k,receivedLength:g.length,contexts:g});if(i>0){f=B.getContexts(0,i);this._setBusy({requestedLength:i,receivedLength:f.length,contexts:f});g=f.concat(g);}var F=this._getFixedBottomRowContexts(B);g=g.concat(F);if(h>0&&(v-h)<B.getLength()){this._setBusy({requestedLength:h,receivedLength:F.length,contexts:F});}}else if(r.length>0){t=this.getThreshold()?Math.max(this.getVisibleRowCount(),this.getThreshold()):0;g=B.getContexts(this.getFirstVisibleRow(),r.length,t);this._setBusy({requestedLength:r.length,receivedLength:g.length,contexts:g});}}if(!s){for(var l=r.length-1;l>=0;l--){var m=g?g[l]:undefined;var n=r[l];if(n){var A=this.getFirstVisibleRow()+l;this._updateRowBindingContext(n,m,o&&o.model,A);}}}};T.prototype._updateRowBindingContext=function(r,o,m,A){var f=r.getCells();var $=r.getDomRefs(true).row;r.setBindingContext(o,m);if(o&&o instanceof sap.ui.model.Context){for(var i=0,l=this._aVisibleColumns.length;i<l;i++){var g=this._aIdxCols2Cells[this._aVisibleColumns[i]];if(f[g]){this._updateCellBindingContext(f[g],o,m,A);}}$.removeClass("sapUiTableRowHidden");r._bHidden=false;}else{$.addClass("sapUiTableRowHidden");$.removeClass('sapUiTableFixedPreBottomRow sapUiTableFixedTopRow');r._bHidden=true;for(var i=0,l=this._aVisibleColumns.length;i<l;i++){var g=this._aIdxCols2Cells[this._aVisibleColumns[i]];if(f[g]){this._updateCellBindingContext(f[g],o,m,A);}}}};T.prototype._updateCellBindingContext=function(o,f,m,A){if(this._bCallUpdateTableCell&&o._updateTableCell){o._updateTableCell(o,f,o.$().closest("td"),A);}if(typeof this._updateTableCell==="function"){this._updateTableCell(o,f,o.$().closest("td"),A);}};T.prototype._hasData=function(){var B=this.getBinding("rows");if(!B||(B.getLength()||0)===0){return false;}return true;};T.prototype._updateNoData=function(){if(this.getShowNoData()){var B=this.getBinding("rows");if(!this._hasData()){if(!this.$().hasClass("sapUiTableEmpty")){this.$().addClass("sapUiTableEmpty");}this.$("ariacount").text(this._oResBundle.getText("TBL_DATA_ROWS",[0]));}else{if(this.$().hasClass("sapUiTableEmpty")){this.$().removeClass("sapUiTableEmpty");}this.$("ariacount").text(this._oResBundle.getText("TBL_DATA_ROWS",[(B.getLength()||0)]));}}};T.prototype._determineVisibleCols=function(){var $=this.$(),t=this;if($.hasClass("sapUiTableHScr")){var r=this._bRtlMode;var s=this._oHSb.getNativeScrollPosition();if(r&&sap.ui.Device.browser.firefox&&s<0){s=s*-1;}var f=s+this._getScrollWidth();if(this._iOldScrollLeft!==s||this._iOldScrollRight!==f||this._bForceVisibleColCalc){var L=r?$.find(".sapUiTableCtrlScroll").width():0;if((sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.firefox)&&r){L=0;}this._aVisibleColumns=[];for(var i=0,l=this.getFixedColumnCount();i<l;i++){this._aVisibleColumns.push(i);}var g=$.find(".sapUiTableCtrl.sapUiTableCtrlScroll .sapUiTableCtrlFirstCol > th[data-sap-ui-headcolindex]");g.each(function(j,E){var w=q(E).width();if(r&&sap.ui.Device.browser.chrome){L-=w;}if(L+w>=s&&L<=f){t._aVisibleColumns.push(parseInt(q(E).data('sap-ui-headcolindex'),10));}if(!r||(sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.firefox)){L+=w;}});this._iOldScrollLeft=s;this._iOldScrollRight=f;this._bForceVisibleColCalc=false;}}else{this._aVisibleColumns=[];var h=this.getColumns();for(var i=0,l=h.length;i<l;i++){if(h[i].shouldRender()){this._aVisibleColumns.push(i);}}}};T.prototype._enableColumnAutoResizing=function(){var t=this;q.each(this.getColumns(),function(i,o){if(!!o.getAutoResizable()){var $=q.find(".sapUiTableColRsz[data-sap-ui-colindex="+i+"]");if($){t._bindSimulatedDoubleclick($,null,t._onAutomaticColumnResize);}}});};T.prototype.removeColumn=function(o){var r=this.removeAggregation('columns',o);this._bDetermineVisibleCols=true;if(typeof o==="number"&&o>-1){o=this.getColumns()[o];}var i=q.inArray(o,this._aSortedColumns);if(this._iNewColPos===undefined&&i>=0){this._aSortedColumns.splice(i,1);}return r;};T.prototype.removeAllColumns=function(){var r=this.removeAllAggregation('columns');this._aSortedColumns=[];return r;};T.prototype.destroyColumns=function(){var r=this.destroyAggregation('columns');this._aSortedColumns=[];return r;};T.prototype.addColumn=function(o){var t=this;this.addAggregation('columns',o);o.attachEvent('_widthChanged',function(E){t._bForceVisibleColCalc=true;});this._bDetermineVisibleCols=true;return this;};T.prototype.insertColumn=function(o,i){var t=this;this.insertAggregation('columns',o,i);o.attachEvent('_widthChanged',function(){t._bForceVisibleColCalc=true;});this._bDetermineVisibleCols=true;return this;};T.prototype._getRowCount=function(){var B=this.getBinding("rows");return B?(B.getLength()||0):0;};T.prototype._getSelectableRowCount=function(){return this._getRowCount();};T.prototype._getScrollTop=function(){if(this.$().hasClass("sapUiTableVScr")){return this._oVSb.getScrollPosition()||0;}else{if(this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){return(((this._oPaginator.getCurrentPage()||1)-1)*this.getVisibleRowCount());}else{return 0;}}};T.prototype._getScrollWidth=function(){return this.$().find(".sapUiTableCtrlScr").width();};T.prototype._getScrollHeight=function(){return this.$().find(".sapUiTableCtrlScr").height();};T.prototype._getVisibleColumns=function(){var f=[];var g=this.getColumns();for(var i=0,l=g.length;i<l;i++){if(g[i].shouldRender()){f.push(g[i]);}}return f;};T.prototype._getVisibleColumnCount=function(){return this._getVisibleColumns().length;};T.prototype._getHeaderRowCount=function(){if(!this.getColumnHeaderVisible()){return 0;}else if(!this._useMultiHeader()){return 1;}var h=0;q.each(this._getVisibleColumns(),function(i,o){h=Math.max(h,o.getMultiLabels().length);});return h;};T.prototype._useMultiHeader=function(){var u=false;q.each(this._getVisibleColumns(),function(i,o){if(o.getMultiLabels().length>0){u=true;return false;}});return u;};T.prototype._getColumnsWidth=function(s,E){var f=this.getColumns();var g=0;if(s!==0&&!s){s=0;}if(E!==0&&!E){E=f.length;}for(var i=s,l=E;i<l;i++){if(f[i]&&f[i].shouldRender()){g+=this._CSSSizeToPixel(f[i].getWidth());}}return g;};T.prototype._CSSSizeToPixel=function(s,r){var p=this._iColMinWidth;if(s){if(q.sap.endsWith(s,"px")){p=parseInt(s,10);}else if(q.sap.endsWith(s,"em")||q.sap.endsWith(s,"rem")){p=Math.ceil(parseFloat(s)*this._getBaseFontSize());}}if(r){return p+"px";}else{return parseInt(p,10);}};T.prototype._getBaseFontSize=function(){return this._iBaseFontSize;};T.prototype._handleResize=function(){if(!this.getDomRef()){return;}this._updateHSb();this._updateColumnHeader();this._updateRowHeader();this._handleRowCountMode();};T.prototype._checkTableSize=function(){if(!this.getDomRef()){return;}var p=this.getDomRef().parentNode,h=p.offsetHeight,w=p.offsetWidth;if(p!=this._lastParent||h!=this._lastParentHeight||w!=this._lastParentWidth){this._handleResize();this._lastParent=p;this._lastParentHeight=h;this._lastParentWidth=w;if(this.getBinding("rows")){this.updateRows();}}};T.prototype._handleRowCountMode=function(){if(this.getVisibleRowCountMode()==sap.ui.table.VisibleRowCountMode.Auto){var $=this.$();var i=$.parent().height();var r=this._calculateRowsToDisplay(i);if(isNaN(r)){return;}var t=this;this._visibleRowCountTimer=setTimeout(function(){t.setVisibleRowCount(r);},0);}};T.prototype._updateRowHeader=function(){if(this.getFixedRowCount()>=0||this.getFixedColumnCount()>=0||this.getRowHeight()<=0){var $=this.$();var f=$.find(".sapUiTableCtrlFixed > tbody > tr");var g=$.find(".sapUiTableCtrlScroll > tbody > tr");var h=$.find(".sapUiTableRowHdr");if(this.getFixedColumnCount()>0&&!this.getRowHeight()){f.css('height','');g.css('height','');}for(var i=0,l=g.length;i<l;i++){var H=Math.max(f[i]?(f[i].getBoundingClientRect().bottom-f[i].getBoundingClientRect().top):0,g[i]?(g[i].getBoundingClientRect().bottom-g[i].getBoundingClientRect().top):0);if(this._bjQueryLess18){q(h[i]).height(H);if(this.getFixedColumnCount()>0&&!this.getRowHeight()){q(f[i]).height(H);q(g[i]).height(H);}}else{q(h[i]).outerHeight(H);if(this.getFixedColumnCount()>0&&!this.getRowHeight()){q(f[i]).outerHeight(H);q(g[i]).outerHeight(H);}}}}};T.prototype._syncColumnHeaders=function(u){var D=this.getDomRef();if(!D){return;}var $=this.$();var r=D.getBoundingClientRect();var t=r.right-r.left;var v=this._getVisibleColumns();if(v.length==0){return;}var f=0;var g=this._bRtlMode;var l=g?99000:-99000;var h=$.find(".sapUiTableColHdr");var k=$.find(".sapUiTableCtrlFirstCol > th");var H=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(H&&k.length>0){var o=k.get(0);f=o.getBoundingClientRect().right-o.getBoundingClientRect().left;k=k.not(":nth-child(1)");}var m={};k.each(function(A,E){var B=E.getAttribute("data-sap-ui-headcolindex");var F=E.getBoundingClientRect();var G;var V=v[A];if(V){G=F.right-F.left;}if(A==0){G+=f;}var J=v[A]?v[A].getHeaderSpan():1,K=[],L;if(J){if(!q.isArray(J)){J=[J];}q.each(J,function(Q,U){J[Q]=Math.max(U,1);});L=J;}else{L=[1];}for(var i=0;i<L.length;i++){K[i]={width:G,span:1};for(var j=1;j<L[i];j++){var M=k[A+j];var N=M.getBoundingClientRect();if(M){K[i].width+=N.right-N.left;K[i].span=L[i];}}}if(V){var O=document.getElementById(V.getId()+"-rsz");m[B]={domRefColumnTh:E,domRefColumnDivs:[],domRefColumnResizer:O,domRefColumnResizerPosition:undefined,rect:F,aHeaderData:K};}});var n=h.find(".sapUiTableCol");n.each(function(j,E){var A=parseInt(E.getAttribute("data-sap-ui-colindex"),10);var B=m[A];B.domRefColumnDivs.push(E);var F=0;if(B){if(!g){F=B.rect.right-r.left;}else{F=B.rect.left-r.left;}}if(!F||F<=0||F>=t){F=l;}B.domRefColumnResizerPosition=F;});q.each(m,function(j,A){for(var i=0;i<A.domRefColumnDivs.length;i++){var B=A.aHeaderData[0];if(A.aHeaderData[i]){B=A.aHeaderData[i];}A.domRefColumnDivs[i].style.width=B.width+"px";A.domRefColumnDivs[i].setAttribute("data-sap-ui-colspan",B.span);if(A.domRefColumnResizer){A.domRefColumnResizer.style.left=A.domRefColumnResizerPosition+"px";}}});var p=this._getHeaderRowCount();var s=this.getColumnHeaderHeight()>0;if(!s&&!u){var w=$.find(".sapUiTableColHdrCnt,.sapUiTableColRowHdr");var x=n.length;for(var i=0;i<x;i++){n[i].style.height='auto';}w.height("auto");var y=Math.max(h.height(),w.height());var z=Math.floor(y/p);if(this._bjQueryLess18){n.height(z);w.height(y);}else{n.outerHeight(z);w.outerHeight(y);}}};T.prototype._updateColumnHeader=function(u){if(this._sColHdrPosTimer){q.sap.clearDelayedCall(this._sColHdrPosTimer);}if(this._bOnAfterRendering){this._syncColumnHeaders.apply(this,arguments);}else{this._sColHdrPosTimer=q.sap.delayedCall(150,this,this._syncColumnHeaders,arguments);}};T.prototype._disableTextSelection=function(E){q(E||document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(o){o.preventDefault();return false;});};T.prototype._enableTextSelection=function(E){q(E||document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart");};T.prototype._clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty();}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}else if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(f){}}};T.prototype.onvscroll=function(E){this._leaveActionMode();this.setFirstVisibleRow(this._getScrollTop(),true);};T.prototype._syncHeaderAndContent=function(){if(!this._bSyncScrollLeft){this._bSyncScrollLeft=true;var $=this.$();var s=this._oHSb.getNativeScrollPosition();$.find(".sapUiTableCtrlScr").scrollLeft(s);if(!!sap.ui.Device.browser.webkit&&this._bRtlMode){var o=$.find(".sapUiTableColHdrScr").get(0);s=o.scrollWidth-o.clientWidth-this._oHSb.getScrollPosition();}$.find(".sapUiTableColHdrScr").scrollLeft(s);this._bSyncScrollLeft=false;}};T.prototype.onhscroll=function(E){if(!this._bOnAfterRendering){this._syncHeaderAndContent();this._updateColumnHeader(true);if(this.getBinding("rows")){this.updateRows();}}};T.prototype._oncolscroll=function(E){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableColHdrScr");if(!!sap.ui.Device.browser.webkit&&this._bRtlMode){var s=this.$().find(".sapUiTableColHdrScr").get(0);this._oHSb.setScrollPosition(s.scrollWidth-s.clientWidth-$.scrollLeft());}else{this._oHSb.setNativeScrollPosition($.scrollLeft());}}};T.prototype._oncntscroll=function(E){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableCtrlScr");this._oHSb.setNativeScrollPosition($.scrollLeft());}};T.prototype.onmousedown=function(E){var l=E.button===0;var i=this._isTouchMode(E);if(l){var $=q(E.target);var f=this.$("sb");if(E.target==f[0]){q(document.body).bind("selectstart",q.proxy(this._splitterSelectStart,this));var o=f.offset();var h=f.height();var w=f.width();q(document.body).append("<div id=\""+this.getId()+"-ghost\" class=\"sapUiHSBGhost\" style =\" height:"+h+"px; width:"+w+"px; left:"+o.left+"px; top:"+o.top+"px\" ></div>");f.append("<div id=\""+this.getId()+"-overlay\" style =\"left: 0px;"+" right: 0px; bottom: 0px; top: 0px; position:absolute\" ></div>");var D=q(document);if(i){D.bind("touchend",q.proxy(this._onGhostMouseRelease,this));D.bind("touchmove",q.proxy(this._onGhostMouseMove,this));}else{D.bind("mouseup",q.proxy(this._onGhostMouseRelease,this));D.bind("mousemove",q.proxy(this._onGhostMouseMove,this));}this._disableTextSelection();return;}var g=$.closest(".sapUiTableCol");if(g.length===1){this._bShowMenu=true;this._sDelayedMenuTimer=q.sap.delayedCall(200,this,function(){this._bShowMenu=false;});var j=this._isTouchMode(E)&&($.hasClass("sapUiTableColDropDown")||$.hasClass("sapUiTableColResizer"));if(this.getEnableColumnReordering()&&!j){var k=parseInt(g.attr("data-sap-ui-colindex"),10);if(k>this._iLastFixedColIndex){var m=this.getColumns()[k];this._sDelayedActionTimer=q.sap.delayedCall(200,this,function(){this._onColumnMoveStart(m,i);});}}}var n=!!(E.metaKey||E.ctrlKey);if(!!sap.ui.Device.browser.firefox&&n){E.preventDefault();}}};T.prototype.onmouseup=function(E){q.sap.clearDelayedCall(this._sDelayedActionTimer);if(E.isMarked()){return;}if(this.$().find(".sapUiTableCtrl td :focus").length>0){this._enterActionMode(this.$().find(".sapUiTableCtrl td :focus"));}else{this._leaveActionMode(E);}};T.prototype.onclick=function(E){q.sap.clearDelayedCall(this._sDelayedActionTimer);if(E.isMarked()){return;}if(!this._findAndfireCellEvent(this.fireCellClick,E)){this._onSelect(E);}else{E.preventDefault();}};T.prototype.oncontextmenu=function(E){var t=q(E.target);var h=t.closest('.sapUiTableCol');if(h.length>0){var o=sap.ui.getCore().byId(h.attr("data-sap-ui-colid"));if(o){o._openMenu(h[0],false);}E.preventDefault();}else{if(this._findAndfireCellEvent(this.fireCellContextmenu,E,this._oncellcontextmenu)){E.preventDefault();}}};T.prototype._oncellcontextmenu=function(p){if(this.getEnableCellFilter()){if(!this._oContextMenu){q.sap.require("sap.ui.unified.Menu");q.sap.require("sap.ui.unified.MenuItem");this._oContextMenu=new sap.ui.unified.Menu(this.getId()+"-contextmenu");this.addDependent(this._oContextMenu);}var o=sap.ui.getCore().byId(p.columnId);var s=o.getFilterProperty();if(o&&o.isFilterableByMenu()&&p.rowBindingContext){this._oContextMenu.destroyItems();this._oContextMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_FILTER"),select:[function(){var g=this.getContextByIndex(p.rowIndex);var v=g.getProperty(s);if(this.getEnableCustomFilter()){this.fireCustomFilter({column:o,value:v});}else{this.filter(o,v);}},this]}));var f=sap.ui.core.Popup.Dock;this._oContextMenu.open(false,p.cellDomRef,f.BeginTop,f.BeginBottom,p.cellDomRef,"none none");return true;}}};T.prototype._bindSimulatedDoubleclick=function(f,g,D){var h="click";var t=this;if(!!sap.ui.Device.support.touch){h="touchend";}q(f).on(h,function(E){E.preventDefault();E.stopPropagation();t._clicksRegistered=t._clicksRegistered+1;if(t._clicksRegistered<2){t._singleClickTimer=q.sap.delayedCall(t._doubleclickDelay,t,function(){t._clicksRegistered=0;if(g){g.call(t,E);}},[E]);}else{q.sap.clearDelayedCall(t._singleClickTimer);t._clicksRegistered=0;D.call(t,E);}});};T.prototype._findAndfireCellEvent=function(f,E,g){var $=q(E.target);var h=$.closest("td[role='gridcell']");var i=h.attr("id");var m=/.*-row(\d*)-col(\d*)/i.exec(i);var j=false;if(m){var r=m[1];var k=m[2];var o=this.getRows()[r];var l=o&&o.getCells()[k];var n=o&&o.getIndex();var s=l.data("sap-ui-colid");var p;if(this.getBindingInfo("rows")){p=o.getBindingContext(this.getBindingInfo("rows").model);}var t={rowIndex:n,columnIndex:k,columnId:s,cellControl:l,rowBindingContext:p,cellDomRef:h.get(0)};j=!f.call(this,t);if(!j&&typeof g==="function"){t.cellDomRef=h[0];j=g.call(this,t);}}return j;};T.prototype.onfocusin=function(E){var $=q(E.target);var n=this.$().hasClass("sapUiTableEmpty");var f=$.hasClass("sapUiTableCtrlBefore");this._updateAriaRowOfRowsText();if(!this._bIgnoreFocusIn&&(f||$.hasClass("sapUiTableCtrlAfter"))){this.$("ariadesc").text(this._oResBundle.getText("TBL_TABLE"));this._leaveActionMode();if(q.contains(this.$().find('.sapUiTableColHdrCnt')[0],E.target)){q(this._oItemNavigation.getFocusedDomRef()||this._oItemNavigation.getRootDomRef()).focus();}else{if(f){if(n){this._bIgnoreFocusIn=true;this.$().find(".sapUiTableCtrlEmpty").focus();this._bIgnoreFocusIn=false;}else{this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex()%this._oItemNavigation.iColumns,E);}}else{this._oItemNavigation.focusItem((this._oItemNavigation.getFocusedIndex()%this._oItemNavigation.iColumns)+(this._oItemNavigation.iColumns*this._iLastSelectedDataRow),E);}}if(!n){E.preventDefault();}}else if(q.sap.endsWith(E.target.id,"-rsz")){E.preventDefault();E.stopPropagation();}};T.prototype._getAbsoluteRowIndex=function(r){var i=0;var f=this.getFirstVisibleRow();var F=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();var g=v-F;if(F>0&&r>=g){i=this.getBinding().getLength()-v+r;}else{i=f+r;}return i;};T.prototype._onSelect=function(E){var $=q(E.target);var s=E.shiftKey;var f=!!(E.metaKey||E.ctrlKey);var g=$.closest(".sapUiTableCol");if(this._bShowMenu&&g.length===1){var i=parseInt(g.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[i];if($.hasClass("sapUiTableColDropDown")){var h=this.fireColumnSelect({column:o});if(h){o._openMenu(g[0],E.type=="keyup");}}else{this._onColumnSelect(o,g[0],this._isTouchMode(E),E.type=="keyup");}return;}var j=$.closest(".sapUiTableRowHdr");if(j.length===1){var i=parseInt(j.attr("data-sap-ui-rowindex"),10);this._onRowSelect(this._getAbsoluteRowIndex(i),s,f);return;}var k;if(E.target){var l=q(E.target).closest("td");if(l.length>0){k=l[0];}}if(k&&(k.getAttribute("role")=="gridcell"||q(k).hasClass("sapUiTableTDDummy"))&&(this.getSelectionBehavior()===sap.ui.table.SelectionBehavior.Row||this.getSelectionBehavior()===sap.ui.table.SelectionBehavior.RowOnly)){var j=$.closest(".sapUiTableCtrl > tbody > tr");if(j.length===1){var i=parseInt(j.attr("data-sap-ui-rowindex"),10);this._onRowSelect(this._getAbsoluteRowIndex(i),s,f);return;}}if(q.sap.containsOrEquals(this.getDomRef("selall"),E.target)){this._toggleSelectAll();return;}};T.prototype._isRowSelectable=function(r){return true;};T.prototype._onRowSelect=function(r,s,f){if(!!sap.ui.Device.browser.internet_explorer&&s){this._clearTextSelection();}var B=this.getBinding("rows");if(!B){return;}if(r<0||r>=(B.getLength()||0)){return;}if(!this._isRowSelectable(r)){return;}this._iSourceRowIndex=r;var o=this.getSelectionMode();if(o!==sap.ui.table.SelectionMode.None){if(o===sap.ui.table.SelectionMode.Single){if(!this.isIndexSelected(r)){this.setSelectedIndex(r);}else{this.clearSelection();}}else{if(o===sap.ui.table.SelectionMode.MultiToggle){f=true;}if(s){var i=this.getSelectedIndex();if(i>=0){this.addSelectionInterval(i,r);}else{this.setSelectedIndex(r);}}else{if(!this.isIndexSelected(r)){if(f){this.addSelectionInterval(r,r);}else{this.setSelectedIndex(r);}}else{if(f){this.removeSelectionInterval(r,r);}else{if(this.getSelectedIndices().length===1){this.clearSelection();}else{this.setSelectedIndex(r);}}}}}}this._iSourceRowIndex=undefined;};T.prototype._onColumnSelect=function(o,D,i,w){if(i){var $=q(D);var f=$.find(".sapUiTableColCell");if($.find(".sapUiTableColCellMenu").length<1){f.hide();var s="";if(o._menuHasItems()){s="<div class='sapUiTableColDropDown'></div>";}var g="";if(o.getResizable()){g="<div class='sapUiTableColResizer''></div>";}var h=q("<div class='sapUiTableColCellMenu'>"+s+g+"</div>");$.append(h);$.bind("focusout",function(){this.cell.show();this.menu.remove();this.self.unbind("focusout");}.bind({cell:f,menu:h,self:$}));if(o.getResizable()){$.find(".sapUiTableColResizer").bind("touchstart",q.proxy(this._onColumnResizeStart,this));}}return;}var E=this.fireColumnSelect({column:o});if(E){o._openMenu(D,w);}};T.prototype._onColumnMoveStart=function(o,i){this._disableTextSelection();var $=o.$();var f=parseInt($.attr("data-sap-ui-colindex"),10);if(f<this.getFixedColumnCount()){return;}this.$().addClass("sapUiTableDragDrop");this._$colGhost=$.clone().removeAttr("id");$.css({"opacity":".25"});this._$colGhost.addClass("sapUiTableColGhost").css({"left":-10000,"top":-10000,"position":"absolute","z-index":this.$().zIndex()+10});this.$().find(".sapUiTableCol").each(function(h,E){var $=q(this);$.css({position:"relative"});$.data("pos",{left:$.position().left,center:$.position().left+$.outerWidth()/2,right:$.position().left+$.outerWidth()});});this._$colGhost.appendTo(document.body);var g=q(document.body);if(i){g.bind("touchmove",q.proxy(this._onColumnMove,this));g.bind("touchend",q.proxy(this._onColumnMoved,this));}else{g.mousemove(q.proxy(this._onColumnMove,this));g.mouseup(q.proxy(this._onColumnMoved,this));}};T.prototype._onColumnMove=function(E){var $=this.$();var l=E.pageX;var L=E.pageY;if(E&&this._isTouchMode(E)){l=E.targetTouches[0].pageX;L=E.targetTouches[0].pageY;E.stopPropagation();E.preventDefault();}var r=this._bRtlMode;var i=l-$.offset().left;var D=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var f=this.getColumns()[D].$();var o=this._iNewColPos;this._iNewColPos=D;var t=this;$.find(".sapUiTableCol").each(function(g,h){var j=q(h);var k=parseInt(j.attr("data-sap-ui-colindex"),10);var H=sap.ui.getCore().byId(j.attr("data-sap-ui-colid")).getHeaderSpan();var s;if(H){if(q.isArray(H)){s=H[0];}else{s=H;}}else{s=1;}if(j.get(0)!==f.get(0)){var p=j.data("pos");var B=i>=p.left&&i<=p.center;var A=i>=p.center&&i<=p.right;if(!r){if(B){t._iNewColPos=k;}else if(A){t._iNewColPos=k+s;}else{t._iNewColPos=t._iNewColPos;}}else{if(A){t._iNewColPos=k;}else if(B){t._iNewColPos=k+s;}else{t._iNewColPos=t._iNewColPos;}}if((B||A)&&k>D){t._iNewColPos--;}}});if(this._iNewColPos<=this._iLastFixedColIndex){this._iNewColPos=o;}if(this._iNewColPos<this.getFixedColumnCount()){this._iNewColPos=o;}this._animateColumnMove(D,o,this._iNewColPos);this._$colGhost.css({"left":l+5,"top":L+5});};T.prototype._animateColumnMove=function(f,o,n){var r=this._bRtlMode;var D=this.getColumns()[f].$();if(o!==n){for(var i=Math.min(o,n),l=Math.max(o,n);i<=l;i++){var g=this.getColumns()[i];if(i!==f&&g.getVisible()){g.$().stop(true,true).animate({left:"0px"});}}var O=0;if(n<f){for(var i=n;i<f;i++){var g=this.getColumns()[i];if(g.getVisible()){var $=g.$();O-=$.outerWidth();$.stop(true,true).animate({left:D.outerWidth()*(r?-1:1)+"px"});}}}else{for(var i=f+1,l=n+1;i<l;i++){var g=this.getColumns()[i];if(g.getVisible()){var $=g.$();O+=$.outerWidth();$.stop(true,true).animate({left:D.outerWidth()*(r?1:-1)+"px"});}}}D.stop(true,true).animate({left:O*(r?-1:1)+"px"});}};T.prototype._onColumnMoved=function(E){this.$().removeClass("sapUiTableDragDrop");var D=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[D];var B=q(document.body);B.unbind("touchmove",this._onColumnMove);B.unbind("touchend",this._onColumnMoved);B.unbind("mousemove",this._onColumnMove);B.unbind("mouseup",this._onColumnMoved);this._$colGhost.remove();this._$colGhost=undefined;this._enableTextSelection();var f=this.fireColumnMove({column:o,newPos:this._iNewColPos});var m=D<this._iNewColPos;if(f&&this._iNewColPos!==undefined&&this._iNewColPos!==D){this.removeColumn(o);this.insertColumn(o,this._iNewColPos);var h=o.getHeaderSpan(),s;if(h){if(q.isArray(h)){s=h[0];}else{s=h;}}else{s=1;}if(s>1){if(!m){this._iNewColPos++;}for(var i=1;i<s;i++){var g=this.getColumns()[m?D:D+i];this.removeColumn(g);this.insertColumn(g,this._iNewColPos);this.fireColumnMove({column:g,newPos:this._iNewColPos});if(!m){this._iNewColPos++;}}}this._oColHdrItemNav.setFocusedIndex(this._iNewColPos);}else{this._animateColumnMove(D,this._iNewColPos,D);o.$().css({"backgroundColor":"","backgroundImage":"","opacity":""});}setTimeout(function(){var O=this._oItemNavigation.getFocusedIndex();this._oItemNavigation.focusItem(0,E);this._oItemNavigation.focusItem(O,E);}.bind(this),0);delete this._iNewColPos;};T.prototype._onAutomaticColumnResize=function(E){var i,o,h,m,f=1,r=false;q.sap.log.debug("doubleclick fired");this._disableTextSelection();this._$colResize=q(E.target);this._$colResize.addClass("sapUiTableColRszActive");var p=parseInt(this._$colResize.prevAll(".sapUiTableCol").first().attr("data-sap-ui-colindex"),10);i=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);if(p!=i){r=true;}if(r){o=this.getColumns()[p];h=o.getHeaderSpan();if(h instanceof Array){m=Math.max.apply(Math,h);}else if(!!h){m=h;}if(i+h-1!=p){f=m;i=p+m;}}if(f>1){while(i>p){i--;this.autoResizeColumn(i);}}else{this.autoResizeColumn(i);}E.preventDefault();E.stopPropagation();};T.prototype._getResizerIdForColumn=function(i,f){if(f>0){f--;}var o=this.getColumns()[this._aIdxCols2Cells[i+f]];return o.getId()+"-rsz";};T.prototype._onColumnResizeStart=function(E){if(this._isTouchMode(E)){this._iColumnResizeStart=E.targetTouches[0].pageX;this._disableTextSelection();var $=q(E.target).closest(".sapUiTableCol");var i=parseInt($.attr("data-sap-ui-colindex"),10);var f=$.attr("data-sap-ui-colspan");var r=this._getResizerIdForColumn(i,f);this._$colResize=q.sap.byId(r);q(document.body).bind("touchmove",q.proxy(this._onColumnResize,this));q(document.body).bind("touchend",q.proxy(this._onColumnResized,this));return;}var l=E.button===0;if(l){this._iColumnResizeStart=E.pageX;this._disableTextSelection();this._$colResize=q(E.target);q(document.body).mousemove(q.proxy(this._onColumnResize,this)).mouseup(q.proxy(this._onColumnResized,this));}};T.prototype._onColumnResize=function(E){var l;if(this._isTouchMode(E)){l=E.targetTouches[0].pageX;E.stopPropagation();E.preventDefault();}else{l=E.pageX;}if(this._iColumnResizeStart&&l<this._iColumnResizeStart+3&&l>this._iColumnResizeStart-3){return;}if(this._isTouchMode(E)){this._$colResize.addClass("sapUiTableColTouchRszActive");}else{this._$colResize.addClass("sapUiTableColRszActive");}var $=this.$();var r=this._bRtlMode;var i=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[i];var f=$.find(".sapUiTableCtrlFirstCol > th[data-sap-ui-headcolindex='"+i+"']");var g=f.position().left;var w;if(!r){if(this.getFixedColumnCount()>0&&i>=this.getFixedColumnCount()){var F=$.find(".sapUiTableColHdrFixed").width();g=g+F;g=g-$.find(".sapUiTableCtrlScr").scrollLeft();}var O=$.find(".sapUiTableCtrlFirstCol > th:first").offset().left;var h=l-O;w=h-g;}else{var s;if(this.getFixedColumnCount()>0&&i<this.getFixedColumnCount()){s=$.find('.sapUiTableCtrlScrFixed');}else{s=$.find('.sapUiTableCtrlScr');}var j=s.scrollLeft();if(sap.ui.Device.browser.internet_explorer){j=s[0].scrollWidth-j-s[0].clientWidth;}else if(sap.ui.Device.browser.firefox){j=j+s[0].scrollWidth-s[0].clientWidth;}var D=g-j-l+s.offset().left;w=f.outerWidth()+D;}w=Math.max(w,this._iColMinWidth);var k=$.find(".sapUiTableCnt").offset().left;var m=l-k;m-=this._$colResize.width()/2;this._$colResize.css("left",m);o._iNewWidth=w;};T.prototype._onColumnResized=function(E,i){var f;if(!this._$colResize&&(i===null||i===undefined)){return;}if(i===null||i===undefined){f=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);}else{f=i;}var o=this.getColumns()[f];var r=false;if(o._iNewWidth){var w;var A=this.$().find(".sapUiTableCtrl").width();if(!this._checkPercentageColumnWidth()){w=o._iNewWidth+"px";}else{var g=Math.round(100/A*o._iNewWidth);w=g+"%";}if(this._updateColumnWidth(o,w,true)){this._resizeDependentColumns(o,w);}delete o._iNewWidth;r=true;}var B=q(document.body);B.unbind("touchmove",this._onColumnResize);B.unbind("touchend",this._onColumnResized);B.unbind("mousemove",this._onColumnResize);B.unbind("mouseup",this._onColumnResized);o.focus();if(this._$colResize){this._$colResize.removeClass("sapUiTableColTouchRszActive sapUiTableColRszActive");this._$colResize=undefined;}this._enableTextSelection();if(r){this.invalidate();}};T.prototype._resizeDependentColumns=function(o,w){if(this._checkPercentageColumnWidth()){var v=this._getVisibleColumns();var f;q.each(v,function(u,x){if(o===x){f=u;}});var O=0;var l=v.length-1;var t;if(f===undefined){t=0;}else{t=parseInt(w,10);}var p=0;var g=[];var h=this;q.each(v,function(u,x){var y=h._getColumnPercentageWidth(x);if((((f===l&&u<f)||((f!==l)&&u>f))&&x.getFlexible())||f===undefined){O+=x.$().outerWidth();p+=y;g.push(x);}else if(u!==f){t+=y;}});var j=t;q.each(g,function(u,x){var y=h._getColumnPercentageWidth(x);var N=Math.round((100-j)/p*y);if(u===g.length-1){N=100-t;}else{t+=N;}h._updateColumnWidth(x,N+"%");});}else if(!this._hasOnlyFixColumnWidths()){var v=this._getVisibleColumns(),A=this.$().find(".sapUiTableCtrl").width(),f,r=0,L=0,k=0,n=0;q.each(v,function(u,x){if(!q.sap.endsWith(x.getWidth(),"px")&&!q.sap.endsWith(x.getWidth(),"em")&&!q.sap.endsWith(x.getWidth(),"rem")){n++;return false;}if(f!=undefined){k+=this._CSSSizeToPixel(x.getWidth());r++;}else if(o!==x){L+=this._CSSSizeToPixel(x.getWidth());}if(o===x){f=u;L+=this._CSSSizeToPixel(w);}}.bind(this));if(n>0||(L+k>A)){return;}A-=L;for(var i=f+1;i<v.length;i++){var o=v[i],m=this._CSSSizeToPixel(o.getWidth()),s=m/k*100,N=A/100*s;this._updateColumnWidth(o,Math.round(N)+'px');}}};T.prototype._getColumnPercentageWidth=function(o){var s=o.getWidth();var i=parseInt(o.getWidth(),10);var t=this.$().find(".sapUiTableCtrl").width();if(q.sap.endsWith(s,"px")||q.sap.endsWith(s,"em")||q.sap.endsWith(s,"rem")){i=Math.round(100/t*i);}else if(!q.sap.endsWith(s,"%")){i=Math.round(100/t*o.$().width());}return i;};T.prototype._updateColumnWidth=function(o,w,f){var E=true;if(f){E=this.fireColumnResize({column:o,width:w});}if(E){o.setProperty("width",w,true);this.$().find('th[aria-owns="'+o.getId()+'"]').css('width',w);}return E;};T.prototype._checkPercentageColumnWidth=function(){var f=this.getColumns();var h=false;q.each(f,function(i,o){if(q.sap.endsWith(o.getWidth(),"%")){h=true;return false;}});return h;};T.prototype._hasOnlyFixColumnWidths=function(){var o=true;q.each(this.getColumns(),function(i,f){var w=f.getWidth();if(f.getFlexible()||!w||w.substr(-2)!=="px"){o=false;return false;}});return o;};T.prototype.pushSortedColumn=function(o,A){if(!A){this._aSortedColumns=[];}this._aSortedColumns.push(o);};T.prototype.getSortedColumns=function(){return this._aSortedColumns;};T.prototype.sort=function(o,s,A){if(q.inArray(o,this.getColumns())>=0){o.sort(s===sap.ui.table.SortOrder.Descending,A);}};T.prototype.filter=function(o,v){if(q.inArray(o,this.getColumns())>=0){o.filter(v);}};T.prototype._getSelectOnCellsAllowed=function(){var s=this.getSelectionBehavior();var f=this.getSelectionMode();return f!==sap.ui.table.SelectionMode.None&&(s===sap.ui.table.SelectionBehavior.Row||s===sap.ui.table.SelectionBehavior.RowOnly);};T.prototype._getAriaTextsForSelectionMode=function(f,s){if(!s){s=this.getSelectionMode();}var r=this._oResBundle;var t={mouse:{rowSelect:"",rowDeselect:""},keyboard:{rowSelect:"",rowDeselect:""}};if(s===sap.ui.table.SelectionMode.Single){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");}else if(s===sap.ui.table.SelectionMode.Multi){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT_MULTI");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT_MULTI");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_MULTI_KEY");if(f===true){if(this.getSelectedIndices().length===1){t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");}else if(this.getSelectedIndices().length===0){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");}}}else if(s===sap.ui.table.SelectionMode.MultiToggle){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_TOGGLE");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_TOGGLE_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");if(f===true&&this.getSelectedIndices().length===0){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");}}return t;};T.prototype._updateSelection=function(){if(this.getSelectionMode()===sap.ui.table.SelectionMode.None){return;}var t=this._getAriaTextsForSelectionMode(true);var s=this._getSelectOnCellsAllowed();var r=this.getRows();for(var i=0;i<r.length;i++){var o=r[i];o._updateSelection(this,t,s);}this.setProperty("selectedIndex",this.getSelectedIndex(),true);};T.prototype._onSelectionChanged=function(E){var r=E.getParameter("rowIndices");var i=this._iSourceRowIndex!==undefined?this._iSourceRowIndex:this.getSelectedIndex();this._updateSelection();var s=this.getSelectionMode();if(s==="Multi"||s==="MultiToggle"){this.$("selall").attr('title',this._oResBundle.getText("TBL_SELECT_ALL")).addClass("sapUiTableSelAll");}this.fireRowSelectionChange({rowIndex:i,rowContext:this.getContextByIndex(i),rowIndices:r});};T.prototype.getContextByIndex=function(i){var B=this.getBinding("rows");return i>=0&&B?B.getContexts(i,1)[0]:null;};T.prototype.getSelectedIndex=function(){return this._oSelection.getLeadSelectedIndex();};T.prototype.setSelectedIndex=function(i){if(i===-1){this.clearSelection();}else{this._oSelection.setSelectionInterval(i,i);}return this;};T.prototype.clearSelection=function(){this._oSelection.clearSelection();return this;};T.prototype.selectAll=function(){var s=this.getSelectionMode();if(!this.getEnableSelectAll()||(s!="Multi"&&s!="MultiToggle")){return this;}var B=this.getBinding("rows");if(B){this._oSelection.setSelectionInterval((B.getLength()||0)-1,0);this.$("selall").attr('title',this._oResBundle.getText("TBL_DESELECT_ALL")).removeClass("sapUiTableSelAll");}return this;};T.prototype.getSelectedIndices=function(){return this._oSelection.getSelectedIndices();};T.prototype.addSelectionInterval=function(i,f){this._oSelection.addSelectionInterval(i,f);return this;};T.prototype.setSelectionInterval=function(i,f){this._oSelection.setSelectionInterval(i,f);return this;};T.prototype.removeSelectionInterval=function(i,f){this._oSelection.removeSelectionInterval(i,f);return this;};T.prototype.isIndexSelected=function(i){return this._oSelection.isSelectedIndex(i);};T.prototype._scrollNext=function(){if(this.getFirstVisibleRow()<this._getRowCount()-this.getVisibleRowCount()){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+1,this._getRowCount()-this.getVisibleRowCount()));}};T.prototype._scrollPrevious=function(){if(this.getFirstVisibleRow()>0){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-1,0));}};T.prototype._scrollPageUp=function(){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-this.getVisibleRowCount(),0));};T.prototype._scrollPageDown=function(){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+this.getVisibleRowCount()-this.getFixedBottomRowCount(),this._getRowCount()-this.getVisibleRowCount()));};T.prototype._isTopRow=function(E){var $=q(E.target);var r=parseInt($.add($.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"),10);var f=this.getFixedRowCount();if(f>0&&r>=f){return r===f;}return r===0;};T.prototype._isBottomRow=function(E){var $=q(E.target);var r=parseInt($.add($.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"),10);var f=this.getFixedBottomRowCount();if(f>0&&r<=this.getVisibleRowCount()-1-f){return r===this.getVisibleRowCount()-1-f;}return r===this.getVisibleRowCount()-1;};T.prototype._enterActionMode=function(f){if(f.length>0&&!this._bActionMode){if(f.filter(":sapTabbable").length==0){return;}this._bActionMode=true;this.removeDelegate(this._oItemNavigation);q(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","-1");f.filter(":sapTabbable").eq(0).focus();}};T.prototype._leaveActionMode=function(E){if(this._bActionMode){this._bActionMode=false;this.addDelegate(this._oItemNavigation);q(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","0");if(E){if(q(E.target).closest("td[tabindex='-1']").length>0){var i=q(this._oItemNavigation.aItemDomRefs).index(q(E.target).closest("td[tabindex='-1']").get(0));this._oItemNavigation.focusItem(i,null);}else{if(q.sap.containsOrEquals(this.$().find(".sapUiTableCCnt").get(0),E.target)){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}}else{this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}};T.prototype._getFocusedRowIndex=function(){var f=this._oItemNavigation.iFocusedIndex;var i=this._oItemNavigation.iColumns;var s=f%i;var g=this.getFirstVisibleRow()+(f-s)/i;if(!this.getColumnHeaderVisible()){g++;}return g-1;};T.prototype._isFocusedRowSelected=function(){var s=this._getFocusedRowIndex();var i=this.isIndexSelected(s);var f=(this._oItemNavigation.iFocusedIndex%this._oItemNavigation.iColumns==0);if(f){return i;}else{var h=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(h){return null;}else{return i;}}};T.prototype.onkeyup=function(E){if(!this._bEventSapSelect===true){return;}this._bEventSapSelect=false;if(E.keyCode!==q.sap.KeyCodes.ENTER&&E.keyCode!==q.sap.KeyCodes.SPACE&&E.keyCode!==q.sap.KeyCodes.F4||E.srcControl!==this&&q.inArray(E.srcControl,this.getRows())===-1&&q.inArray(E.srcControl,this.getColumns())===-1){return;}var p=q(E.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B){if(B.isExpanded(r)){B.collapse(r);}else{B.expand(r);}}E.preventDefault();return;}this._bShowMenu=true;this._onSelect(E);this._bShowMenu=false;E.preventDefault();};T.prototype.onsapselect=function(){this._bEventSapSelect=true;};T.prototype.onsapselectmodifiers=function(){this._bEventSapSelect=true;};T.prototype.onsapspace=function(E){var $=q(E.target);if(((this.getSelectionBehavior()==sap.ui.table.SelectionBehavior.Row||this.getSelectionBehavior()==sap.ui.table.SelectionBehavior.RowOnly)&&E.srcControl instanceof sap.ui.table.Row)||$.hasClass("sapUiTableRowHdr")||$.hasClass("sapUiTableColRowHdr")||$.hasClass("sapUiTableCol")){E.preventDefault();}};T.prototype.onkeydown=function(E){var $=this.$();if(!this._bActionMode&&E.keyCode==q.sap.KeyCodes.F2||E.keyCode==q.sap.KeyCodes.ENTER){if($.find(".sapUiTableCtrl td:focus").length>0){this._enterActionMode($.find(".sapUiTableCtrl td:focus").find(":sapFocusable"));E.preventDefault();E.stopPropagation();}}else if(this._bActionMode&&E.keyCode==q.sap.KeyCodes.F2){this._leaveActionMode(E);}else if(E.keyCode==q.sap.KeyCodes.TAB&&this._bActionMode){if(this.getFixedColumnCount()>0){var f=q(E.target);if(f.is("td[role=gridcell]")==false){f=f.parents("td[role=gridcell]");}var g=f.parent("tr[data-sap-ui-rowindex]");var h=g.closest(".sapUiTableCtrl");var r=parseInt(g.attr("data-sap-ui-rowindex"),10);var i=g.find("td[role=gridcell]");var j=i.index(f);var t=i.length;if(j===(t-1)){var k;if(h.hasClass("sapUiTableCtrlFixed")){k=$.find(".sapUiTableCtrl.sapUiTableCtrlScroll");}else{k=$.find(".sapUiTableCtrl.sapUiTableCtrlFixed");r++;if(r==this.getVisibleRowCount()){r=0;}}var l=k.find("tr[data-sap-ui-rowindex='"+r+"']");var m=l.find("td :sapFocusable[tabindex='0']").first();if(m.length>0){m.focus();E.preventDefault();}}}}else if(E.keyCode==q.sap.KeyCodes.A&&(E.metaKey||E.ctrlKey)){var o=this._oItemNavigation;var F=o.getFocusedIndex();this._toggleSelectAll();o.focusItem(F,E);E.preventDefault();E.stopImmediatePropagation(true);}else if(E.keyCode===q.sap.KeyCodes.F10&&(E.shiftKey)){this.oncontextmenu(E);}};T.prototype.onsapescape=function(E){this._leaveActionMode(E);};T.prototype.onsaptabprevious=function(E){var $=this.$();if(this._bActionMode){this._leaveActionMode();E.preventDefault();}else{var i=this._oItemNavigation;var n=this.$().hasClass("sapUiTableEmpty");var s=$.find('.sapUiTableCCnt')[0];var f=q.contains(s,E.target);if(f&&this.getColumnHeaderVisible()){var g=i.getFocusedIndex()%i.iColumns;i.focusItem(g,E);E.preventDefault();}else if(i.getFocusedDomRef()===E.target&&q.sap.containsOrEquals(s,E.target)||(!this.getColumnHeaderVisible()&&n&&f)){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlBefore").focus();this._bIgnoreFocusIn=false;}}};T.prototype.onsaptabnext=function(E){var $=this.$();if(this._bActionMode){this._leaveActionMode();E.preventDefault();}else{var i=this._oItemNavigation;var f=q.contains($.find('.sapUiTableColHdrCnt')[0],E.target);var n=this.$().hasClass("sapUiTableEmpty");if(f&&!n){i.focusItem(i.getFocusedIndex()+i.iColumns*this._iLastSelectedDataRow,E);E.preventDefault();}else if(i.getFocusedDomRef()===E.target||(n&&f)){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlAfter").focus();this._bIgnoreFocusIn=false;}}};T.prototype._updateAriaRowOfRowsText=function(f){var A=document.getElementById(this.getId()+"-rownumberofrows");if(!A){return;}var i=this._oItemNavigation;if(i){var g=i.getFocusedIndex();var h=g%i.iColumns;var F=this.getFirstVisibleRow();var t=this._getRowCount();var r=Math.floor(g/i.iColumns)+F+1-this._getHeaderRowCount();var s=this._oResBundle.getText("TBL_ROW_ROWCOUNT",[r,t]);if(r>0&&h===0||f){A.innerText=s;}else{A.innerText=" ";}}};T.prototype.onsapdown=function(E){if(!this._bActionMode&&this._isBottomRow(E)){if(this.getFirstVisibleRow()!=this._getRowCount()-this.getVisibleRowCount()){E.stopImmediatePropagation(true);if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar){this._scrollNext();}else{this._scrollPageDown();}}}E.preventDefault();};T.prototype.onsapdownmodifiers=function(E){if(E.shiftKey){var f=this._getFocusedRowIndex();var i=this._isFocusedRowSelected();if(i===true){this.addSelectionInterval(f+1,f+1);}else if(i===false){this.removeSelectionInterval(f+1,f+1);}if(this._isBottomRow(E)){this._scrollNext();}}else if(E.altKey){this._toggleGroupHeader(E);}};T.prototype.onsapupmodifiers=function(E){if(E.shiftKey){var f=this._getFocusedRowIndex();var i=this._isFocusedRowSelected();if(i===true){this.addSelectionInterval(f-1,f-1);}else if(i===false){this.removeSelectionInterval(f-1,f-1);}if(this._isTopRow(E)){if(this.getFirstVisibleRow()!=0){E.stopImmediatePropagation(true);}this._scrollPrevious();}}else if(E.altKey){this._toggleGroupHeader(E);}};T.prototype.onsapup=function(E){if(!this._bActionMode&&this._isTopRow(E)){if(this.getFirstVisibleRow()!=0){E.stopImmediatePropagation(true);}if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar){this._scrollPrevious();}else{this._scrollPageUp();}}E.preventDefault();};T.prototype.onsappagedown=function(E){if(!this._bActionMode){var $=this.$();var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var h=$.find(".sapUiTableColHdrScr>.sapUiTableColHdr").length;if(this.getColumnHeaderVisible()&&i.iFocusedIndex<(i.iColumns*h)){var f=i.iFocusedIndex%i.iColumns;if((i.iFocusedIndex<=(i.iColumns*h)&&i.iFocusedIndex>=(i.iColumns*h)-i.iColumns)||(f===0&&r)){this.setFirstVisibleRow(0);i.focusItem(i.iColumns*h+f,E);}else{i.focusItem(i.iColumns*h-i.iColumns+f,E);}E.stopImmediatePropagation(true);}else{if(this._isBottomRow(E)){this._scrollPageDown();}var F=this.getFixedBottomRowCount();if(this.getFirstVisibleRow()===this._getRowCount()-this.getVisibleRowCount()){F=0;}var g=(i.aItemDomRefs.length/i.iColumns)-F;var f=i.iFocusedIndex%i.iColumns;var j=(g-1)*i.iColumns+f;i.focusItem(j,E);E.stopImmediatePropagation(true);}E.preventDefault();}};T.prototype.onsappagedownmodifiers=function(E){if(!this._bActionMode&&E.altKey){var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var f=i.iFocusedIndex%i.iColumns;var n;if(f==0&&r){n=1;}else{var v=this._aVisibleColumns.length;var m=this._getVisibleColumns().length;if(!r){m--;}if(v===0){n=m;}else{n=Math.min(m,f+v);}}i.focusItem(i.iFocusedIndex-(f-n),E);E.stopImmediatePropagation(true);E.preventDefault();}};T.prototype.onsappageup=function(E){if(!this._bActionMode){var $=this.$();var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var h=$.find(".sapUiTableColHdrScr>.sapUiTableColHdr").length;var f=i.iFocusedIndex%i.iColumns;if(this.getColumnHeaderVisible()&&i.iFocusedIndex<(i.iColumns*h)){if(i.iFocusedIndex>i.iColumns){i.focusItem(f,E);}E.stopImmediatePropagation(true);}else{if(this.getColumnHeaderVisible()&&this.getFirstVisibleRow()==0&&this._isTopRow(E)){if(r&&f===0){i.focusItem(f,E);}else{i.focusItem(i.iColumns*h-i.iColumns+f,E);}E.stopImmediatePropagation(true);}else{var g=this.getColumnHeaderVisible()?i.iColumns*h:0;i.focusItem(g+f,E);E.stopImmediatePropagation(true);if(this._isTopRow(E)){this._scrollPageUp();}}}E.preventDefault();}};T.prototype.onsappageupmodifiers=function(E){if(!this._bActionMode&&E.altKey){var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var f=i.iFocusedIndex%i.iColumns;if(f>0){var n;if(f==1&&r){n=0;}else{var v=this._aVisibleColumns.length;if(v===0){if(r){n=1;}else{n=0;}}else{var m=1;if(!r){m=0;}n=Math.max(m,f-v);}}i.focusItem(i.iFocusedIndex-(f-n),E);}E.stopImmediatePropagation(true);E.preventDefault();}};T.prototype.onsaphome=function(E){var i=(this.getSelectionBehavior()==sap.ui.table.SelectionBehavior.RowOnly);var f=q(E.target).parents(".sapUiTableGroupHeader").length>0;if(f){E.stopImmediatePropagation(true);return;}var F=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=F%g;var o=0;if(!i){o=1;}if(s>this.getFixedColumnCount()+o){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-s+this.getFixedColumnCount()+o,null);}else if(!i){if(s>1){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-s+1,null);}else if(s==1){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-1,null);}else{E.stopImmediatePropagation(true);}}};T.prototype.onsapend=function(E){var i=q(E.target).parents(".sapUiTableGroupHeader").length>0;if(i){E.stopImmediatePropagation(true);return;}var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=f%g;var h=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var o=0;if(!h){o=1;}if(s===0&&h){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(f+1,null);}else if(s<this.getFixedColumnCount()-o){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(f-s+this.getFixedColumnCount()-o,null);}};T.prototype.onsaphomemodifiers=function(E){if(E.metaKey||E.ctrlKey){var $=this.$();var t=$.find(".sapUiTableColHdrCnt")[0];var i=q.contains(t,E.target);if(i){E.stopImmediatePropagation(true);return;}var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=Math.ceil(f/g)-1;var h=f%g;if(this.getColumnHeaderVisible()){if(s==1){E.stopImmediatePropagation(true);this._oItemNavigation.focusItem(h,E);}else if(s>1){E.stopImmediatePropagation(true);this.setFirstVisibleRow(0);var j=h+g;this._oItemNavigation.focusItem(j,E);}}else{E.stopImmediatePropagation(true);this.setFirstVisibleRow(0);var j=f-s*g;this._oItemNavigation.focusItem(j,E);}}};T.prototype.onsapendmodifiers=function(E){if(E.metaKey||E.ctrlKey){var $=this.$();var t=$.find(".sapUiTableColHdrCnt")[0];var i=q.contains(t,E.target);var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=f%g;E.stopImmediatePropagation(true);if(i){this._oItemNavigation.focusItem(f+g,E);}else{this.setFirstVisibleRow(this._getRowCount()-this.getVisibleRowCount());var h=this._oItemNavigation.aItemDomRefs.length-(g-s);this._oItemNavigation.focusItem(h,E);}}};T.prototype.onsapleft=function(E){this._collapseGroupHeader(E);};T.prototype.onsapright=function(E){this._expandGroupHeader(E);};T.prototype._toggleGroupHeader=function(E){var p=q(E.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&B.isExpanded(r)){B.collapse(r);}else{B.expand(r);}E.preventDefault();E.stopImmediatePropagation();}};T.prototype._collapseGroupHeader=function(E){var p=q(E.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&B.isExpanded(r)){B.collapse(r);}E.preventDefault();E.stopImmediatePropagation();}};T.prototype._expandGroupHeader=function(E){var p=q(E.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&!B.isExpanded(r)){B.expand(r);}E.preventDefault();E.stopImmediatePropagation();}};T.prototype.onsapleftmodifiers=function(E){var t=q(E.target);if(t.hasClass('sapUiTableCol')){var f=parseInt(t.attr('data-sap-ui-colindex'),10),v=this._getVisibleColumns(),o=v[this._aVisibleColumns.indexOf(f)];if(E.shiftKey){var n=parseInt(o.getWidth(),10)-16;o.setWidth((n>20?n:20)+"px");E.preventDefault();E.stopImmediatePropagation();}else if(E.ctrlKey||E.metaKey){if(f-1>=0){var N=0;for(var p=this._aVisibleColumns.indexOf(f)-1;p>=0;p--){N=this._aVisibleColumns[p];if(v[p].$().css("display")!=="none"){break;}}this.removeColumn(o);this.insertColumn(o,N);var h=o.getHeaderSpan();if(h>1){for(var i=1;i<h;i++){o=v[f+i];this.removeColumn(o);this.insertColumn(o,N+i);}}}E.preventDefault();E.stopImmediatePropagation();}}};T.prototype.onsaprightmodifiers=function(E){var t=q(E.target);if(t.hasClass('sapUiTableCol')){var f=parseInt(t.attr('data-sap-ui-colindex'),10);var v=this._getVisibleColumns();var p=this._aVisibleColumns.indexOf(f);var o=v[p];if(E.shiftKey){o.setWidth(parseInt(o.getWidth(),10)+16+"px");E.preventDefault();E.stopImmediatePropagation();}else if(E.ctrlKey||E.metaKey){var h=o.getHeaderSpan();if(p<v.length-h){var n=v[p+1].getHeaderSpan(),N=this._aVisibleColumns[p+n];for(var i=h-1;i>=0;i--){o=v[p+i];this.removeColumn(o);this.insertColumn(o,N+i);}}E.preventDefault();E.stopImmediatePropagation();}}};T.prototype.setGroupBy=function(v){var g=v;if(typeof g==="string"){g=sap.ui.getCore().byId(g);}var r=false;if(g&&g instanceof sap.ui.table.Column){if(q.inArray(g,this.getColumns())===-1){throw new Error("Column has to be part of the columns aggregation!");}var E=this.fireGroup({column:g,groupedColumns:[g.getId()],type:sap.ui.table.GroupEventType.group});var o=sap.ui.getCore().byId(this.getGroupBy());if(o){o.setGrouped(false);r=true;}if(E&&g instanceof sap.ui.table.Column){g.setGrouped(true);}}if(!g||r){var B=this.getBindingInfo("rows");delete B.binding;this._bindAggregation("rows",B);}return this.setAssociation("groupBy",g);};T.prototype.getBinding=function(n){n=n||"rows";var B=sap.ui.core.Element.prototype.getBinding.call(this,n);if(this.getEnableGrouping()){q.sap.require("sap.ui.model.ClientListBinding");var g=sap.ui.getCore().byId(this.getGroupBy());var f=g&&g.getGrouped()&&n==="rows"&&B&&B instanceof sap.ui.model.ClientListBinding;if(f&&!B._modified){B._modified=true;this._modifyRow=function(r,$){this.$().find(".sapUiTableRowHdrScr").css("display","block");var m=this.$().find("div[data-sap-ui-rowindex='"+$.attr("data-sap-ui-rowindex")+"']");if(B.isGroupHeader(r)){$.addClass("sapUiTableGroupHeader sapUiTableRowHidden");var s=B.isExpanded(r)?"sapUiTableGroupIconOpen":"sapUiTableGroupIconClosed";m.html("<div class=\"sapUiTableGroupIcon "+s+"\" tabindex=\"-1\">"+B.getTitle(r)+"</div>");m.addClass("sapUiTableGroupHeader").removeAttr("title");}else{$.removeClass("sapUiTableGroupHeader");m.html("");m.removeClass("sapUiTableGroupHeader");}};this.onclick=function(E){if(q(E.target).hasClass("sapUiTableGroupIcon")){var $=q(E.target).parents("[data-sap-ui-rowindex]");if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B.isExpanded(r)){B.collapse(r);q(E.target).removeClass("sapUiTableGroupIconOpen").addClass("sapUiTableGroupIconClosed");}else{B.expand(r);q(E.target).removeClass("sapUiTableGroupIconClosed").addClass("sapUiTableGroupIconOpen");}}}else{if(T.prototype.onclick){T.prototype.onclick.apply(this,arguments);}}};var p=g.getSortProperty();B.sort(new sap.ui.model.Sorter(p));var l=B.getLength(),h=B.getContexts(0,l);var k;var j=0;for(var i=l-1;i>=0;i--){var N=h[i].getProperty(p);if(!k){k=N;}if(k!==N){var G=h[i+1].getModel().getContext("/sap.ui.table.GroupInfo"+i);G.__groupInfo={oContext:h[i+1],name:k,count:j,groupHeader:true,expanded:true};h.splice(i+1,0,G);k=N;j=0;}j++;}var G=h[0].getModel().getContext("/sap.ui.table.GroupInfo");G.__groupInfo={oContext:h[0],name:k,count:j,groupHeader:true,expanded:true};h.splice(0,0,G);q.extend(B,{getLength:function(){return h.length;},getContexts:function(s,l){return h.slice(s,s+l);},isGroupHeader:function(m){var o=h[m];return o&&o.__groupInfo&&o.__groupInfo.groupHeader;},getTitle:function(m){var o=h[m];return o&&o.__groupInfo&&o.__groupInfo.name+" - "+o.__groupInfo.count;},isExpanded:function(m){var o=h[m];return this.isGroupHeader(m)&&o.__groupInfo&&o.__groupInfo.expanded;},expand:function(m){if(this.isGroupHeader(m)&&!h[m].__groupInfo.expanded){for(var i=0;i<h[m].__childs.length;i++){h.splice(m+1+i,0,h[m].__childs[i]);}delete h[m].__childs;h[m].__groupInfo.expanded=true;this._fireChange();}},collapse:function(m){if(this.isGroupHeader(m)&&h[m].__groupInfo.expanded){h[m].__childs=h.splice(m+1,h[m].__groupInfo.count);h[m].__groupInfo.expanded=false;this._fireChange();}}});}}return B;};T.prototype.resetGrouping=function(){var B=this.getBinding("rows");if(B&&B._modified){this.$().find(".sapUiTableRowHdrScr").css("display","");this.onclick=T.prototype.onclick;this._modifyRow=undefined;var o=this.getBindingInfo("rows");this.unbindRows();this.bindRows(o);}};T.prototype.setEnableGrouping=function(E){this.setProperty("enableGrouping",E);if(!E){this.resetGrouping();}this._invalidateColumnMenus();return this;};T.prototype.setEnableCustomFilter=function(E){this.setProperty("enableCustomFilter",E);this._invalidateColumnMenus();return this;};T.prototype.setEnableColumnFreeze=function(E){this.setProperty("enableColumnFreeze",E);this._invalidateColumnMenus();return this;};T.prototype.setShowColumnVisibilityMenu=function(s){this.setProperty("showColumnVisibilityMenu",s);this._invalidateColumnMenus();return this;};T.prototype.setFixedColumnCount=function(f){var g=this._getVisibleColumns();var h=g[f-1]&&g[f-1].getHeaderSpan();if(h){var H;if(q.isArray(h)){H=parseInt(h[0],10);}else{H=parseInt(h,10);}f+=H-1;}var $=this.$().find(".sapUiTableCtrlFirstCol > th");for(var i=0;i<f;i++){var o=g[i];if(o){var j=q.inArray(o,this.getColumns());if(!o.getWidth()){o.setWidth($.filter("[data-sap-ui-headcolindex='"+j+"']").width()+"px");}}}this.setProperty("fixedColumnCount",f);this._invalidateColumnMenus();return this;};T.prototype.setFixedRowCount=function(f){if(!(parseInt(f,10)>=0)){q.sap.log.error("Number of fixed rows must be greater or equal 0");return this;}if((f+this.getFixedBottomRowCount())<this.getVisibleRowCount()){this.setProperty("fixedRowCount",f);}else{q.sap.log.error("Table '"+this.getId()+"' fixed rows('"+(f+this.getFixedBottomRowCount())+"') must be smaller than numberOfVisibleRows('"+this.getVisibleRowCount()+"')");}return this;};T.prototype.setFixedBottomRowCount=function(f){if(!(parseInt(f,10)>=0)){q.sap.log.error("Number of fixed bottom rows must be greater or equal 0");return this;}if((f+this.getFixedRowCount())<this.getVisibleRowCount()){this.setProperty("fixedBottomRowCount",f);}else{q.sap.log.error("Table '"+this.getId()+"' fixed rows('"+(f+this.getFixedRowCount())+"') must be smaller than numberOfVisibleRows('"+this.getVisibleRowCount()+"')");}return this;};T.prototype._invalidateColumnMenus=function(){var f=this.getColumns();for(var i=0,l=f.length;i<l;i++){f[i].invalidateMenu();}};T.prototype._splitterSelectStart=function(E){E.preventDefault();E.stopPropagation();return false;};T.prototype._isTouchMode=function(E){return!!E.originalEvent["touches"];};T.prototype._onGhostMouseRelease=function(E){var s=this.getDomRef("ghost");var l=this._isTouchMode(E)?E.changedTouches[0].pageY:E.pageY;var n=l-this.$().offset().top;this.setVisibleRowCount(this._calculateRowsToDisplay(n));q(s).remove();this.$("overlay").remove();q(document.body).unbind("selectstart",this._splitterSelectStart);var D=q(document);D.unbind("touchend",this._onGhostMouseRelease);D.unbind("touchmove",this._onGhostMouseMove);D.unbind("mouseup",this._onGhostMouseRelease);D.unbind("mousemove",this._onGhostMouseMove);this._enableTextSelection();};T.prototype._onGhostMouseMove=function(E){var s=this.getDomRef("ghost");var l=this._isTouchMode(E)?E.targetTouches[0].pageY:E.pageY;var m=this.$().offset().top;if(l>m){q(s).css("top",l+"px");}};T.prototype._calculateRowsToDisplay=function(h){var m=this.getMinAutoRowCount()||5;if(!h){return m;}var $=this.$();if(!$.get(0)){return m;}var u=this._calculateUsedHeight($.find('.sapUiTableCCnt'),$);var r=this.getRows();if(!r.length){return m;}var D=r[0].getDomRefs(true);var f=D.rowFixedPart||D.rowScrollPart;var i=f.outerHeight();if(!i){var s="sap.ui.table.Table:sapUiTableRowHeight";if($.parents().hasClass('sapUiSizeCompact')){s="sap.ui.table.Table:sapUiTableCompactRowHeight";}i=parseInt(P.get(s),10);}var M=window.innerHeight-2*i;var g=h-u;var A=Math.min(g,M);return Math.max((this.getFixedRowCount()+this.getFixedBottomRowCount())+1,Math.max(m,Math.floor((A+1)/i)));};T.prototype._calculateUsedHeight=function($,f){if(!$||$.length==0||!f||$.is(f)){return 0;}return Math.max(0,f.height()-$.height());};T.prototype.setShowNoData=function(s){this.setProperty('showNoData',s,true);s=this.getProperty('showNoData');if(!s){this.$().removeClass("sapUiTableEmpty");}else{this._updateNoData();}return this;};T.prototype.setNoDataText=function(t){this.setProperty("noDataText",t,true);this.$().find('.sapUiTableCtrlEmptyMsg').text(t);};T.prototype.exportData=function(s){q.sap.require("sap.ui.core.util.Export");s=s||{};if(!s.rows){var B=this.getBinding("rows"),o=this.getBindingInfo("rows");var f=B.aFilters.concat(B.aApplicationFilters);s.rows={path:o.path,model:o.model,sorter:B.aSorters,filters:f,parameters:o.parameters};}if(!s.exportType){q.sap.require("sap.ui.core.util.ExportTypeCSV");s.exportType=new sap.ui.core.util.ExportTypeCSV();}var m=s.rows.model;if(!m){var p=s.rows.path;var g=p.indexOf(">");if(g>0){m=p.substr(0,g);}}if(!s.columns){s.columns=[];var h=this.getColumns();for(var i=0,l=h.length;i<l;i++){var j=h[i];if(j.getSortProperty()){s.columns.push({name:j.getLabel().getText(),template:{content:{path:j.getSortProperty(),model:m}}});}}}var E=new sap.ui.core.util.Export(s);this.addDependent(E);return E;};T.prototype._calculateAutomaticColumnWidth=function(f){var t=["sap.m.Text","sap.m.Label","sap.m.Link","sap.ui.commons.TextView","sap.ui.commons.Label","sap.ui.commons.Link"];var $=this.$();var h=0;var g=$.find('td[headers=\"'+this.getId()+'_col'+f+'\"]').children("div");var o=this.getColumns();var j=o[f];if(!j){return null;}var H=j.getHeaderSpan();var k=j.getLabel();var l=this;var m=j.getTemplate();var n=q.inArray(m.getMetadata().getName(),t)!=-1||sap.ui.commons&&sap.ui.commons.TextField&&m instanceof sap.ui.commons.TextField||sap.m&&sap.m.Input&&m instanceof sap.m.Input;var p=document.createElement("div");document.body.appendChild(p);q(p).addClass("sapUiTableHiddenSizeDetector");var r=j.getMultiLabels();if(r.length==0&&!!k){r=[k];}if(r.length>0){q.each(r,function(v,L){var w;if(!!L.getText()){q(p).text(L.getText());h=p.scrollWidth;}else{h=L.$().scrollWidth;}h=h+$.find("#"+j.getId()+"-icons").first().width();$.find(".sapUiTableColIcons#"+j.getId()+"_"+v+"-icons").first().width();if(H instanceof Array&&H[v]>1){w=H[v];}else if(H>1){w=H;}if(!!w){var i=w-1;while(i>f){h=h-(l._oCalcColumnWidths[f+i]||0);i-=1;}}});}var s=Math.max.apply(null,g.map(function(){var _=q(this);return parseInt(_.css('padding-left'),10)+parseInt(_.css('padding-right'),10)+parseInt(_.css('margin-left'),10)+parseInt(_.css('margin-right'),10);}).get());var u=Math.max.apply(null,g.children().map(function(){var w=0,W=0;var _=q(this);var i=_.text()||_.val();if(n){q(p).text(i);W=p.scrollWidth;}else{W=this.scrollWidth;}if(h>W){W=h;}w=W+parseInt(_.css('margin-left'),10)+parseInt(_.css('margin-right'),10)+s+1;return w;}).get());q(p).remove();return Math.max(u,this._iColMinWidth);};T.prototype._onPersoApplied=function(){var f=this.getColumns();var s=[];for(var i=0,l=f.length;i<l;i++){var o=f[i];if(o.getSorted()){s.push(new sap.ui.model.Sorter(o.getSortProperty(),o.getSortOrder()===sap.ui.table.SortOrder.Descending));}}if(s.length>0&&this.getBinding("rows")){this.getBinding("rows").sort(s);}this.refreshRows();};T.prototype._toggleSelectAll=function(){if(!this.$("selall").hasClass("sapUiTableSelAll")){this.clearSelection();}else{this.selectAll();}if(!!sap.ui.Device.browser.internet_explorer){this.$("selall").focus();}};T.prototype._restoreAppDefaultsColumnHeaderSortFilter=function(){var f=this.getColumns();q.each(f,function(i,o){o._restoreAppDefaults();});};T.prototype._setBusy=function(p){var B,i,s;if(!this.getEnableBusyIndicator()||!this._bBusyIndicatorAllowed){return;}B=this.getBinding("rows");if(!B){return;}this.setBusy(false);if(p){if(p.contexts&&p.contexts.length!==undefined){s=false;for(i=0;i<p.contexts.length;i++){if(p.contexts[i]===undefined){s=true;break;}}}else if(p.changeReason===c.Expand){this.setBusy(true);}var l=B.getLength();if(s||(B.isInitial())||(p.receivedLength===0&&this._iDataRequestedCounter!==0)||(p.receivedLength<p.requestedLength&&p.receivedLength!==l&&p.receivedLength!==l-this.getFirstVisibleRow())){this.setBusy(true);}}};T.prototype.setEnableBusyIndicator=function(v){this.setProperty("enableBusyIndicator",v,true);};T.prototype.setColumnHeaderVisible=function(f){this.setProperty("columnHeaderVisible",f);this._iLastSelectedDataRow=this._getHeaderRowCount();};T.prototype._attachDataRequestedListeners=function(){var B=this.getBinding("rows");if(B){B.detachDataRequested(this._onBindingDataRequestedListener,this);B.detachDataReceived(this._onBindingDataReceivedListener,this);this._iDataRequestedCounter=0;B.attachDataRequested(this._onBindingDataRequestedListener,this);B.attachDataReceived(this._onBindingDataReceivedListener,this);}};T.prototype._onBindingDataRequestedListener=function(E){if(E.getSource()==this.getBinding("rows")){this._iDataRequestedCounter++;}};T.prototype._onBindingDataReceivedListener=function(E){if(E.getSource()==this.getBinding("rows")){this._iDataRequestedCounter--;}};T.prototype._attachBindingListener=function(){this._attachDataRequestedListeners();};T.prototype._setLargeDataScrolling=function(l){if(this._oVSb){this._oVSb._bLargeDataScrolling=!!l;}else{q.sap.log.error("Vertical Scrollbar wasn't initialized yet.");}};return T;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.TreeTable')){jQuery.sap.declare('sap.ui.table.TreeTable');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.odata.ODataTreeBindingAdapter');jQuery.sap.require('sap.ui.model.ClientTreeBindingAdapter');jQuery.sap.require('sap.ui.model.TreeBindingCompatibilityAdapter');sap.ui.define("sap/ui/table/TreeTable",['jquery.sap.global','./Table','sap/ui/model/odata/ODataTreeBindingAdapter','sap/ui/model/ClientTreeBindingAdapter','sap/ui/model/TreeBindingCompatibilityAdapter','./library'],function(q,T,O,C,a,l){"use strict";var b=T.extend("sap.ui.table.TreeTable",{metadata:{library:"sap.ui.table",properties:{expandFirstLevel:{type:"boolean",defaultValue:false},useGroupMode:{type:"boolean",group:"Appearance",defaultValue:false},groupHeaderProperty:{type:"string",group:"Data",defaultValue:null},collapseRecursive:{type:"boolean",defaultValue:true},rootLevel:{type:"int",group:"Data",defaultValue:0}},events:{toggleOpenState:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},expanded:{type:"boolean"}}}}}});b.prototype.init=function(){T.prototype.init.apply(this,arguments);this._iLastFixedColIndex=0;if(sap.ui.getCore().getConfiguration().getTheme()==="sap_bluecrystal"||sap.ui.getCore().getConfiguration().getTheme()==="sap_hcb"){q.sap.require("sap.ui.core.IconPool");sap.ui.core.IconPool.insertFontFaceStyle();}};b.prototype.bindRows=function(B,t,s,f){var p,o,s,f;if(typeof B=="string"){p=arguments[0];o=arguments[1];s=arguments[2];f=arguments[3];B={path:p,sorter:s,filters:f,template:o};}if(typeof B==="object"){B.parameters=B.parameters||{};B.parameters.rootLevel=this.getRootLevel();B.parameters.collapseRecursive=this.getCollapseRecursive();B.parameters.numberOfExpandedLevels=B.parameters.numberOfExpandedLevels||(this.getExpandFirstLevel()?1:0);B.parameters.rootNodeID=B.parameters.rootNodeID;}return this.bindAggregation("rows",B);};b.prototype.setSelectionMode=function(s){var B=this.getBinding("rows");if(B&&B.clearSelection){B.clearSelection();this.setProperty("selectionMode",s);}else{T.prototype.setSelectionMode.call(this,s);}return this;};b.prototype.refreshRows=function(r){this._bBusyIndicatorAllowed=true;this._attachBindingListener();var B=this.getBinding("rows");if(B&&this.isTreeBinding("rows")&&!B.hasListeners("selectionChanged")){B.attachSelectionChanged(this._onSelectionChanged,this);}this._bRefreshing=true;this._onBindingChange(r);this._updateBindingContexts(true);this._bRefreshing=false;};b.prototype.setFixedRowCount=function(r){q.sap.log.warning("TreeTable: the property \"fixedRowCount\" is not supported and will be ignored!");return this;};b.prototype.onAfterRendering=function(){T.prototype.onAfterRendering.apply(this,arguments);this.$().find("[role=grid]").attr("role","treegrid");};b.prototype.isTreeBinding=function(n){n=n||"rows";if(n==="rows"){return true;}return sap.ui.core.Element.prototype.isTreeBinding.apply(this,arguments);};b.prototype.getBinding=function(n){n=n||"rows";var B=sap.ui.core.Element.prototype.getBinding.call(this,n);if(B&&this.isTreeBinding(n)&&n==="rows"&&!B.getLength){if(sap.ui.model.odata.ODataTreeBinding&&B instanceof sap.ui.model.odata.ODataTreeBinding){a(B,this);}else if(sap.ui.model.odata.v2.ODataTreeBinding&&B instanceof sap.ui.model.odata.v2.ODataTreeBinding){O.apply(B);}else if(sap.ui.model.ClientTreeBinding&&B instanceof sap.ui.model.ClientTreeBinding){C.apply(B);}else{q.sap.log.error("Binding not supported by sap.ui.table.TreeTable");}}return B;};b.prototype._updateTableContent=function(){T.prototype._updateTableContent.apply(this,arguments);var B=this.getBinding("rows"),f=this.getFirstVisibleRow(),r=this.getRows(),c=r.length,F=this.getFixedBottomRowCount(),i=c-F;var I=f;if(B){var d=B.getLength();for(var R=0;R<c;R++){if(F>0&&R>=i){I=d-c+R;}else{I=f+R;}var o=this.getContextByIndex(I),D=r[R].getDomRefs(true),$=D.rowFixedPart||D.rowScrollPart;this._updateExpandIcon($,o,I);if(this.getUseGroupMode()){var e=this.$().find("div[data-sap-ui-rowindex='"+$.attr("data-sap-ui-rowindex")+"']");if(B.hasChildren&&B.hasChildren(o)){$.addClass("sapUiTableGroupHeader sapUiTableRowHidden");var s=B.isExpanded(f+R)?"sapUiTableGroupIconOpen":"sapUiTableGroupIconClosed";e.html("<div class=\"sapUiTableGroupIcon "+s+"\" tabindex=\"-1\">"+this.getModel().getProperty(this.getGroupHeaderProperty(),o)+"</div>");e.addClass("sapUiTableGroupHeader").removeAttr("title");}else{$.removeClass("sapUiTableGroupHeader");if(o){$.removeClass("sapUiTableRowHidden");}e.html("");e.removeClass("sapUiTableGroupHeader");}}}}};b.prototype._updateTableCell=function(){return true;};b.prototype._updateExpandIcon=function($,c,A){var B=this.getBinding("rows");if(B){var L=0,i=false;if(B.getLevel){L=B.getLevel(c);i=B.isExpanded(A);}else if(B.findNode){var n=B.findNode(A);L=n?n.level:0;i=n&&n.nodeState?n.nodeState.expanded:false;}var t=$.find(".sapUiTableTreeIcon");var s="sapUiTableTreeIconLeaf";var f=$.children("td.sapUiTableTdFirst");if(!this.getUseGroupMode()){if(this._bRtlMode===true){t.css("marginRight",L*17);}else{t.css("marginLeft",L*17);}}if(B.hasChildren&&B.hasChildren(c)){s=i?"sapUiTableTreeIconNodeOpen":"sapUiTableTreeIconNodeClosed";f.attr('aria-expanded',i);var N=i?this._oResBundle.getText("TBL_COLLAPSE"):this._oResBundle.getText("TBL_EXPAND");t.attr('title',N);}else{f.attr('aria-expanded',false);t.attr('aria-label',this._oResBundle.getText("TBL_LEAF"));}t.removeClass("sapUiTableTreeIconLeaf sapUiTableTreeIconNodeOpen sapUiTableTreeIconNodeClosed").addClass(s);$.attr("data-sap-ui-level",L);f.attr('aria-level',L+1);}};b.prototype.onclick=function(e){if(q(e.target).hasClass("sapUiTableGroupIcon")){this._onGroupSelect(e);}else if(q(e.target).hasClass("sapUiTableTreeIcon")){this._onNodeSelect(e);}else{if(T.prototype.onclick){T.prototype.onclick.apply(this,arguments);}}};b.prototype.onsapselect=function(e){if(q(e.target).hasClass("sapUiTableTreeIcon")){this._onNodeSelect(e);}else{if(T.prototype.onsapselect){T.prototype.onsapselect.apply(this,arguments);}}};b.prototype.onkeydown=function(e){T.prototype.onkeydown.apply(this,arguments);var t=q(e.target),$=t.closest('td');if(e.keyCode==q.sap.KeyCodes.TAB&&this._bActionMode&&$.find('.sapUiTableTreeIcon').length>0){if(t.hasClass('sapUiTableTreeIcon')){if(!t.hasClass("sapUiTableTreeIconLeaf")){$.find(':sapFocusable:not(.sapUiTableTreeIcon)').first().focus();}}else{$.find('.sapUiTableTreeIcon:not(.sapUiTableTreeIconLeaf)').focus();}e.preventDefault();}};b.prototype._onNodeSelect=function(e){var $=q(e.target).parents("tr");if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var c=this.getContextByIndex(r);this.fireToggleOpenState({rowIndex:r,rowContext:c,expanded:!this.getBinding().isExpanded(r)});this.getBinding("rows").toggleIndex(r);}e.preventDefault();e.stopPropagation();};b.prototype._onGroupSelect=function(e){var $=q(e.target).parents("[data-sap-ui-rowindex]");if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var c=this.getContextByIndex(r);if(this.getBinding().isExpanded(r)){q(e.target).removeClass("sapUiTableGroupIconOpen").addClass("sapUiTableGroupIconClosed");}else{q(e.target).removeClass("sapUiTableGroupIconClosed").addClass("sapUiTableGroupIconOpen");}this.fireToggleOpenState({rowIndex:r,rowContext:c,expanded:!this.getBinding().isExpanded(r)});this.getBinding("rows").toggleIndex(r);}e.preventDefault();e.stopPropagation();};b.prototype.expand=function(r){var B=this.getBinding("rows");if(B){B.expand(r);}return this;};b.prototype.collapse=function(r){var B=this.getBinding("rows");if(B){B.collapse(r);}return this;};b.prototype.collapseAll=function(){var B=this.getBinding("rows");if(B){B.collapseToLevel(0);this.setFirstVisibleRow(0);}return this;};b.prototype.expandToLevel=function(L){var B=this.getBinding("rows");if(B&&B.expandToLevel){B.expandToLevel(L);}return this;};b.prototype.isExpanded=function(r){var B=this.getBinding("rows");if(B){return B.isExpanded(r);}return false;};b.prototype.isIndexSelected=function(r){var B=this.getBinding("rows");if(B&&B.isIndexSelected){return B.isIndexSelected(r);}else{return T.prototype.isIndexSelected.call(this,r);}};b.prototype.setSelectedIndex=function(r){if(r===-1){this.clearSelection();}var B=this.getBinding("rows");if(B&&B.findNode&&B.setNodeSelection){B.setSelectedIndex(r);}else{T.prototype.setSelectedIndex.call(this,r);}return this;};b.prototype.getSelectedIndices=function(){var B=this.getBinding("rows");if(B&&B.findNode&&B.getSelectedIndices){return B.getSelectedIndices();}else{return T.prototype.getSelectedIndices.call(this);}};b.prototype.setSelectionInterval=function(f,t){var B=this.getBinding("rows");if(B&&B.findNode&&B.setSelectionInterval){B.setSelectionInterval(f,t);}else{T.prototype.setSelectionInterval.call(this,f,t);}return this;};b.prototype.addSelectionInterval=function(f,t){var B=this.getBinding("rows");if(B&&B.findNode&&B.addSelectionInterval){B.addSelectionInterval(f,t);}else{T.prototype.addSelectionInterval.call(this,f,t);}return this;};b.prototype.removeSelectionInterval=function(f,t){var B=this.getBinding("rows");if(B&&B.findNode&&B.removeSelectionInterval){B.removeSelectionInterval(f,t);}else{T.prototype.removeSelectionInterval.call(this,f,t);}return this;};b.prototype.selectAll=function(){var s=this.getSelectionMode();if(!this.getEnableSelectAll()||(s!="Multi"&&s!="MultiToggle")||!this._getSelectableRowCount()){return this;}var B=this.getBinding("rows");if(B.selectAll){B.selectAll();this.$("selall").attr('title',this._oResBundle.getText("TBL_DESELECT_ALL")).removeClass("sapUiTableSelAll");}else{T.prototype.selectAll.call(this);}return this;};b.prototype.getSelectedIndex=function(){var B=this.getBinding("rows");if(B&&B.findNode){return B.getSelectedIndex();}else{return T.prototype.getSelectedIndex.call(this);}};b.prototype.clearSelection=function(){var B=this.getBinding("rows");if(B&&B.clearSelection){B.clearSelection();}else{T.prototype.clearSelection.call(this);}return this;};b.prototype._enterActionMode=function(t){var $=t.eq(0);T.prototype._enterActionMode.apply(this,arguments);if(t.length>0&&$.hasClass("sapUiTableTreeIcon")&&!$.hasClass("sapUiTableTreeIconLeaf")){$.attr("tabindex",0).focus();this._bActionMode=true;}};b.prototype._leaveActionMode=function(e){T.prototype._leaveActionMode.apply(this,arguments);this.$().find(".sapUiTableTreeIcon").attr("tabindex",-1);};b.prototype.getContextByIndex=function(r){var B=this.getBinding("rows");if(B){return B.getContextByIndex(r);}};b.prototype.setRootLevel=function(r){this.setFirstVisibleRow(0);var B=this.getBinding("rows");if(B){if(B.setRootLevel){B.setRootLevel(r);}}this.setProperty("rootLevel",r,true);return this;};b.prototype.setCollapseRecursive=function(c){var B=this.getBinding("rows");if(B){if(B.setCollapseRecursive){B.setCollapseRecursive(c);}}this.setProperty("collapseRecursive",!!c,true);return this;};return b;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.AnalyticalColumn')){jQuery.sap.declare('sap.ui.table.AnalyticalColumn');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/table/AnalyticalColumn",['jquery.sap.global','./Column','./library'],function(q,C,l){"use strict";var A=C.extend("sap.ui.table.AnalyticalColumn",{metadata:{library:"sap.ui.table",properties:{leadingProperty:{type:"string",group:"Misc",defaultValue:null},summed:{type:"boolean",group:"Misc",defaultValue:false},inResult:{type:"boolean",group:"Misc",defaultValue:false},showIfGrouped:{type:"boolean",group:"Appearance",defaultValue:false},groupHeaderFormatter:{type:"any",group:"Behavior",defaultValue:null}}}});A.prototype.init=function(){C.prototype.init.apply(this,arguments);this._bSkipUpdateAI=false;};A._DEFAULT_FILTERTYPES={"Time":new sap.ui.model.type.Time({UTC:true}),"DateTime":new sap.ui.model.type.DateTime({UTC:true}),"Float":new sap.ui.model.type.Float(),"Integer":new sap.ui.model.type.Integer(),"Boolean":new sap.ui.model.type.Boolean()};A.prototype._createMenu=function(){q.sap.require("sap.ui.table.AnalyticalColumnMenu");return new sap.ui.table.AnalyticalColumnMenu(this.getId()+"-menu");};A.prototype.setGrouped=function(g){var p=this.getParent();var t=this;if(p&&p instanceof sap.ui.table.AnalyticalTable){if(g){p._addGroupedColumn(this.getId());}else{p._aGroupedColumns=q.grep(p._aGroupedColumns,function(v){return v!=t.getId();});}}var r=this.setProperty("grouped",g);this._updateTableColumnDetails();this._updateTableAnalyticalInfo(true);return r;};A.prototype.setSummed=function(s){var r=this.setProperty("summed",s,true);this._updateTableAnalyticalInfo();return r;};A.prototype.setVisible=function(v){C.prototype.setVisible.apply(this,arguments);this._updateTableColumnDetails();this._updateTableAnalyticalInfo();return this;};A.prototype.getLabel=function(){var L=this.getAggregation("label");if(!L){if(!this._oBindingLabel){var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){var b=p.getBinding("rows");if(b){this._oBindingLabel=sap.ui.table.TableHelper.createLabel();var m=b.getModel();if(m.oMetadata&&m.oMetadata.isLoaded()){this._oBindingLabel.setText(b.getPropertyLabel(this.getLeadingProperty()));}else{var t=this;m.attachMetadataLoaded(function(){t._oBindingLabel.setText(b.getPropertyLabel(t.getLeadingProperty()));});}}}}L=this._oBindingLabel;}return L;};A.prototype.getFilterProperty=function(){var p=this.getProperty("filterProperty");if(!p){var P=this.getParent();if(P&&P instanceof sap.ui.table.AnalyticalTable){var b=P.getBinding("rows");var L=this.getLeadingProperty();if(b&&q.inArray(L,b.getFilterablePropertyNames())>-1){p=L;}}}return p;};A.prototype.getSortProperty=function(){var p=this.getProperty("sortProperty");if(!p){var P=this.getParent();if(P&&P instanceof sap.ui.table.AnalyticalTable){var b=P.getBinding("rows");var L=this.getLeadingProperty();if(b&&q.inArray(L,b.getSortablePropertyNames())>-1){p=L;}}}return p;};A.prototype.getFilterType=function(){var f=this.getProperty("filterType");if(!f){var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){var b=p.getBinding("rows");var L=this.getLeadingProperty(),P=b&&b.getProperty(L);if(P){switch(P.type){case"Edm.Time":f=A._DEFAULT_FILTERTYPES["Time"];break;case"Edm.DateTime":case"Edm.DateTimeOffset":f=A._DEFAULT_FILTERTYPES["DateTime"];break;case"Edm.Single":case"Edm.Double":case"Edm.Decimal":f=A._DEFAULT_FILTERTYPES["Float"];break;case"Edm.SByte":case"Edm.Int16":case"Edm.Int32":case"Edm.Int64":f=A._DEFAULT_FILTERTYPES["Integer"];break;case"Edm.Boolean":f=A._DEFAULT_FILTERTYPES["Boolean"];break;}}}}return f;};A.prototype._afterSort=function(){this._updateTableAnalyticalInfo();};A.prototype._updateTableAnalyticalInfo=function(s){if(this._bSkipUpdateAI){return;}var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){p.updateAnalyticalInfo(s);}};A.prototype._updateTableColumnDetails=function(){if(this._bSkipUpdateAI){return;}var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){p._updateTableColumnDetails();}};A.prototype.shouldRender=function(){if(!this.getVisible()){return false;}return(!this.getGrouped()||this._bLastGroupAndGrouped||this.getShowIfGrouped())&&(!this._bDependendGrouped||this._bLastGroupAndGrouped);};A.prototype.getTooltip_AsString=function(){var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){var b=p.getBinding("rows");if(b&&this.getLeadingProperty()){return b.getPropertyQuickInfo(this.getLeadingProperty());}}return sap.ui.core.Element.prototype.getTooltip_AsString.apply(this);};A.prototype._menuHasItems=function(){var m=function(){var t=this.getParent();var b=t.getBinding("rows");var r=b&&b.getAnalyticalQueryResult();return(t&&r&&r.findMeasureByPropertyName(this.getLeadingProperty()));}.bind(this);return C.prototype._menuHasItems.apply(this)||m();};A.prototype.isFilterableByMenu=function(){var f=this.getFilterProperty();if(!f||!this.getShowFilterMenuEntry()){return false;}var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){var b=p.getBinding("rows");if(b){if(q.inArray(f,b.getFilterablePropertyNames())>-1&&!b.isMeasure(f)&&b.getProperty(f)){return true;}}}return false;};A.prototype.isGroupableByMenu=function(){var p=this.getParent();if(p&&p instanceof sap.ui.table.AnalyticalTable){var b=p.getBinding("rows");if(b){var r=b.getAnalyticalQueryResult();if(r&&r.findDimensionByPropertyName(this.getLeadingProperty())&&q.inArray(this.getLeadingProperty(),b.getSortablePropertyNames())>-1&&q.inArray(this.getLeadingProperty(),b.getFilterablePropertyNames())>-1){return true;}}}return false;};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.AnalyticalColumnMenu')){jQuery.sap.declare('sap.ui.table.AnalyticalColumnMenu');jQuery.sap.require('jquery.sap.global');sap.ui.define("sap/ui/table/AnalyticalColumnMenu",['jquery.sap.global','./ColumnMenu','./library'],function(q,C,l){"use strict";var A=C.extend("sap.ui.table.AnalyticalColumnMenu",{metadata:{library:"sap.ui.table"}});A.prototype.init=function(){C.prototype.init.apply(this);};A.prototype._addMenuItems=function(){C.prototype._addMenuItems.apply(this);if(this._oColumn){this._addSumMenuItem();}};A.prototype._addGroupMenuItem=function(){var c=this._oColumn,t=this._oTable;if(c.isGroupableByMenu()){this._oGroupIcon=this._createMenuItem("group","TBL_GROUP",c.getGrouped()?"accept":null,q.proxy(function(e){var m=e.getSource(),g=c.getGrouped();c.setGrouped(!g);t.fireGroup({column:c,groupedColumns:t._aGroupedColumns,type:sap.ui.table.GroupEventType.group});m.setIcon(!g?"sap-icon://accept":null);},this));this.addItem(this._oGroupIcon);}};A.prototype._addSumMenuItem=function(){var c=this._oColumn,t=this._oTable,b=t.getBinding("rows"),r=b&&b.getAnalyticalQueryResult();if(t&&r&&r.findMeasureByPropertyName(c.getLeadingProperty())){this._oSumItem=this._createMenuItem("total","TBL_TOTAL",c.getSummed()?"accept":null,q.proxy(function(e){var m=e.getSource(),s=c.getSummed();c.setSummed(!s);m.setIcon(!s?"sap-icon://accept":null);},this));this.addItem(this._oSumItem);}};A.prototype.open=function(){C.prototype.open.apply(this,arguments);var c=this._oColumn;this._oSumItem&&this._oSumItem.setIcon(c.getSummed()?"sap-icon://accept":null);this._oGroupIcon&&this._oGroupIcon.setIcon(c.getGrouped()?"sap-icon://accept":null);};return A;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.AnalyticalTable')){jQuery.sap.declare('sap.ui.table.AnalyticalTable');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.model.analytics.ODataModelAdapter');jQuery.sap.require('sap.ui.core.IconPool');sap.ui.define("sap/ui/table/AnalyticalTable",['jquery.sap.global','./AnalyticalColumn','./Table','./TreeTable','./library','sap/ui/model/analytics/ODataModelAdapter','sap/ui/core/IconPool'],function(q,A,T,a,b,O,I){"use strict";var c=T.extend("sap.ui.table.AnalyticalTable",{metadata:{library:"sap.ui.table",properties:{sumOnTop:{type:"boolean",group:"Appearance",defaultValue:false},numberOfExpandedLevels:{type:"int",group:"Misc",defaultValue:0},autoExpandMode:{type:"string",group:"Misc",defaultValue:"Bundled"},columnVisibilityMenuSorter:{type:"any",group:"Appearance",defaultValue:null},collapseRecursive:{type:"boolean",defaultValue:true},dirty:{type:"boolean",group:"Appearance",defaultValue:null,deprecated:true}}}});c.prototype._getFixedBottomRowContexts=function(B){return B.getGrandTotalContext();};c.prototype.init=function(){T.prototype.init.apply(this,arguments);this.addStyleClass("sapUiAnalyticalTable");this.attachBrowserEvent("contextmenu",this._onContextMenu);this.setSelectionMode(sap.ui.table.SelectionMode.MultiToggle);this.setShowColumnVisibilityMenu(true);this.setEnableColumnFreeze(true);this.setEnableCellFilter(true);this._aGroupedColumns=[];if(sap.ui.getCore().getConfiguration().getTheme()==="sap_bluecrystal"){q.sap.require("sap.ui.core.IconPool");sap.ui.core.IconPool.insertFontFaceStyle();}};c.prototype.setFixedRowCount=function(){q.sap.log.error("The property fixedRowCount is not supported by the AnalyticalTable and must not be set!");return this;};c.prototype.setFixedBottomRowCount=function(){q.sap.log.error("The property fixedBottomRowCount is managed by the AnalyticalTable and must not be set!");return this;};c.prototype.onAfterRendering=function(){T.prototype.onAfterRendering.apply(this,arguments);this.$().find("[role=grid]").attr("role","treegrid");};c.prototype.setDirty=function(d){q.sap.log.error("The property \"dirty\" is deprecated. Please use \"showOverlay\".");this.setProperty("dirty",d,true);this.setShowOverlay(this.getDirty());return this;};c.prototype.getModel=function(m,n){var m=T.prototype.getModel.apply(this,arguments);if(m){sap.ui.model.analytics.ODataModelAdapter.apply(m);}return m;};c.prototype._onBindingChange=function(e){T.prototype._onBindingChange.apply(this,arguments);var r=typeof(e)==="object"?e.getParameter("reason"):e;if(r!=="sort"){this._invalidateColumnMenus();}};c.prototype.bindRows=function(B){var o=this._sanitizeBindingInfo.apply(this,arguments);var r=this.bindAggregation("rows",o);this._bSupressRefresh=true;this._updateColumns();this._bSupressRefresh=false;return r;};c.prototype._bindAggregation=function(n,p,t,s,f){if(n==="rows"){this.setProperty("firstVisibleRow",0,true);this._sanitizeBindingInfo.call(this,p,t,s,f);}return T.prototype._bindAggregation.apply(this,arguments);};c.prototype._initSelectionModel=function(s){this._oSelection=new sap.ui.model.SelectionModel(s);return this;};c.prototype.setSelectionMode=function(s){if(s===sap.ui.table.SelectionMode.None){q.sap.log.fatal("SelectionMode 'None' is not supported by the AnalyticalTable.");return this;}var B=this.getBinding("rows");if(B&&B.clearSelection){B.clearSelection();}this.setProperty("selectionMode",s);return this;};c.prototype.setSelectionBehavior=function(B){if(B===sap.ui.table.SelectionBehavior.RowOnly){q.sap.log.fatal("SelectionBehavior 'RowOnly' is not supported by the AnalyticalTable.");return this;}else{return T.prototype.setSelectionBehavior.apply(this,arguments);}};c.prototype._sanitizeBindingInfo=function(B){var p,t,s,f;if(typeof B=="string"){p=arguments[0];t=arguments[1];s=arguments[2];f=arguments[3];B={path:p,sorter:s,filters:f};if(t instanceof sap.ui.base.ManagedObject){B.template=t;}else if(typeof t==="function"){B.factory=t;}}var C=this.getColumns();for(var i=0,l=C.length;i<l;i++){if(C[i].getSorted()){B.sorter=B.sorter||[];B.sorter.push(new sap.ui.model.Sorter(C[i].getSortProperty()||C[i].getLeadingProperty(),C[i].getSortOrder()===sap.ui.table.SortOrder.Descending));}}B.parameters=B.parameters||{};B.parameters.analyticalInfo=this._getColumnInformation();B.parameters.sumOnTop=this.getSumOnTop();B.parameters.numberOfExpandedLevels=this.getNumberOfExpandedLevels();B.parameters.autoExpandMode=this.getAutoExpandMode();var m=this.getModel(B.model);if(m){O.apply(m);}return B;};c.prototype._setSuppressRefresh=function(s){this._bSupressRefresh=s;return this;};c.prototype._attachBindingListener=function(){var B=this.getBinding("rows");if(B&&!B.hasListeners("selectionChanged")){B.attachSelectionChanged(this._onSelectionChanged,this);}T.prototype._attachDataRequestedListeners.apply(this);};c.prototype._getColumnInformation=function(){var C=[],t=this.getColumns();for(var i=0;i<this._aGroupedColumns.length;i++){var o=sap.ui.getCore().byId(this._aGroupedColumns[i]);if(!o){continue;}C.push({name:o.getLeadingProperty(),visible:o.getVisible(),grouped:o.getGrouped(),total:o.getSummed(),sorted:o.getSorted(),sortOrder:o.getSortOrder(),inResult:o.getInResult(),formatter:o.getGroupHeaderFormatter()});}for(var i=0;i<t.length;i++){var o=t[i];if(q.inArray(o.getId(),this._aGroupedColumns)>-1){continue;}if(!o instanceof A){q.sap.log.error("You have to use AnalyticalColumns for the Analytical table");}C.push({name:o.getLeadingProperty(),visible:o.getVisible(),grouped:o.getGrouped(),total:o.getSummed(),sorted:o.getSorted(),sortOrder:o.getSortOrder(),inResult:o.getInResult(),formatter:o.getGroupHeaderFormatter()});}return C;};c.prototype._updateTableContent=function(){T.prototype._updateTableContent.apply(this,arguments);var B=this.getBinding("rows"),f=this.getFirstVisibleRow(),F=this.getFixedBottomRowCount(),C=this.getVisibleRowCount(),d=this.getColumns();var r=function(o){var $=o.getDomRefs(true);$.row.removeAttr("data-sap-ui-level");$.row.removeData("sap-ui-level");$.row.removeAttr('aria-level');$.row.removeAttr('aria-expanded');$.row.removeClass("sapUiTableGroupHeader sapUiAnalyticalTableSum sapUiAnalyticalTableDummy");$.rowSelector.html("");};var R=this.getRows();if(!B){for(var i=0;i<R.length;i++){r(R[i]);}return;}for(var e=0,l=Math.min(C,R.length);e<l;e++){var g=e>(C-F-1)&&B.getLength()>C,h=g?(B.getLength()-1-(C-1-e)):f+e,o=R[e],$=o.$(),j=o.$("fixed"),m=this.$().find("div[data-sap-ui-rowindex="+$.attr("data-sap-ui-rowindex")+"]");var n;if(g&&B.bProvideGrandTotals){n=B.getGrandTotalContextInfo();}else{n=this.getContextInfoByIndex(h);}var L=n?n.level:0;if(!n||!n.context){r(o);if(n&&!n.context){$.addClass("sapUiAnalyticalTableDummy");m.addClass("sapUiAnalyticalTableDummy");m.html('<div class="sapUiAnalyticalTableLoading">'+this._oResBundle.getText("TBL_CELL_LOADING")+'</div>');}continue;}var p=[this.getId()+"-rownumberofrows"];var s="";if(B.nodeHasChildren&&B.nodeHasChildren(n)){$.addClass("sapUiTableGroupHeader");j.addClass("sapUiTableGroupHeader");m.attr("aria-haspopup",true);var G=B.getGroupName(n.context,n.level);var t=n.nodeState.expanded?"sapUiTableGroupIconOpen":"sapUiTableGroupIconClosed";if(n.nodeState.expanded&&!this.getSumOnTop()){$.addClass("sapUiTableRowHidden");j.addClass("sapUiTableRowHidden");m.addClass("sapUiTableRowHidden");}var u="";if('ontouchstart'in document){u="<div class='sapUiTableGroupMenuButton'></div>";}m.html("<div id=\""+o.getId()+"-groupHeader\" class=\"sapUiTableGroupIcon "+t+"\" tabindex=\"-1\" title=\""+G+"\">"+G+"</div>"+u);p.push(o.getId()+"-groupHeader");$.removeClass("sapUiAnalyticalTableSum sapUiAnalyticalTableDummy");j.removeClass("sapUiAnalyticalTableSum sapUiAnalyticalTableDummy");m.removeClass("sapUiAnalyticalTableSum sapUiAnalyticalTableDummy");m.addClass("sapUiTableGroupHeader").removeAttr("title").removeAttr("aria-label");$.attr('aria-expanded',n.nodeState.expanded);j.attr('aria-expanded',n.nodeState.expanded);m.attr('aria-expanded',n.nodeState.expanded);if(n.level>0){s=B.getGroupName(n.context,n.level);}else{s=this._oResBundle.getText("TBL_GRAND_TOTAL_ROW");}}else{$.removeAttr('aria-expanded');m.removeAttr('aria-expanded');j.removeAttr('aria-expanded');m.attr("aria-haspopup",false);m.removeAttr('aria-describedby');$.removeClass("sapUiTableGroupHeader sapUiTableRowHidden sapUiAnalyticalTableSum sapUiAnalyticalTableDummy");j.removeClass("sapUiTableGroupHeader sapUiTableRowHidden sapUiAnalyticalTableSum");m.html("");m.removeClass("sapUiTableGroupHeader sapUiAnalyticalTableDummy sapUiAnalyticalTableSum");if(!n.nodeState.sum){p.push(this.getId()+"-rows-row"+m.attr("data-sap-ui-rowindex")+"-rowselecttext");}if(n.nodeState.sum&&n.context&&n.context.getObject()){$.addClass("sapUiAnalyticalTableSum");j.addClass("sapUiAnalyticalTableSum");m.addClass("sapUiAnalyticalTableSum");s;if(n.level>0){s=this._oResBundle.getText("TBL_GROUP_TOTAL_ROW")+" "+B.getGroupName(n.context,n.level);}else{s=this._oResBundle.getText("TBL_GRAND_TOTAL_ROW");}}}$.attr("data-sap-ui-level",L);j.attr("data-sap-ui-level",L);m.attr("data-sap-ui-level",L);m.attr('aria-level',L+1);$.attr('aria-level',L+1);j.attr('aria-level',L+1);$.data("sap-ui-level",L);j.data("sap-ui-level",L);m.data("sap-ui-level",L);if('ontouchstart'in document){var S=0;if(this.$().hasClass("sapUiTableVScr")){S+=this.$().find('.sapUiTableVSb').width();}var v=m.find(".sapUiTableGroupMenuButton");if(this._bRtlMode){v.css("right",(this.$().width()-v.width()+m.position().left-S)+"px");}else{v.css("left",(this.$().width()-v.width()-m.position().left-S)+"px");}}var w=o.getCells();var M=[];for(var i=0,x=w.length;i<x;i++){var y=w[i].data("sap-ui-colindex");var z=d[y];var D=q(w[i].$().closest("td"));if(B.isMeasure(z.getLeadingProperty())){D.addClass("sapUiTableMeasureCell");if(!n.nodeState.sum||z.getSummed()){D.removeClass("sapUiTableCellHidden");M.push(z.getId());M.push(D[0].id);}else{D.addClass("sapUiTableCellHidden");}var E=D[0].id+"-ariaTextForSum";var H=q.sap.byId(E);if(H.length===0){D.append("<span id=\""+E+"\" class=\"sapUiHidden\"></span>");H=q.sap.byId(E);}if(n.nodeState.sum||$.hasClass("sapUiTableGroupHeader")){H.text(s);D.attr("aria-labelledby",E+" "+D.attr("aria-labelledby"));}else{H.text("");D.removeAriaLabelledBy(E);}}else{D.removeClass("sapUiTableMeasureCell");}}for(var k=0;k<M.length;k++){p.push(M[k]);}m.attr("aria-labelledby",p.join(" "));var J=this.getFixedColumnCount()>0?j:$;this._resizeGroupHeader(m,J,n.nodeState.expanded);}};c.prototype._resizeGroupHeader=function($,d,i){var e=$.find(".sapUiTableGroupIcon");if(e.length===0||i){return;}var m=d.find(".sapUiTableCell > *");var t=this.getDomRef().getBoundingClientRect();e.width('');var g=this._bRtlMode?e[0].getBoundingClientRect().left:e[0].getBoundingClientRect().right;var G=e.width();var f=this._bRtlMode;m.each(function(h){var j=q(this);if(j.text().length===0){return true;}var C=j[0].getBoundingClientRect();j.width('auto');var l=j.width();j.width('');var o=0;var D=false;var s=j.css('text-align');if(!f){if(s==="left"){o=g-C.left;D=(o>0&&C.left+l>t.left);}else if(s==="right"){o=g-C.right+l;D=(o>0&&C.right>t.left);}}else{if(s==="left"){o=C.left+l-g;D=(o>0&&C.left<t.right);}else if(s==="right"){o=C.right-g;D=(o>0&&C.right<t.right);}}if(D){e.width(G-o);return false;}});};c.prototype.onclick=function(e){var E=q(e.target);if(E.hasClass("sapUiTableGroupIcon")){this._onNodeSelect(e);}else if(E.hasClass("sapUiAnalyticalTableSum")){e.preventDefault();return;}else if(E.hasClass("sapUiTableGroupMenuButton")){this._onContextMenu(e);e.preventDefault();return;}else{if(T.prototype.onclick){T.prototype.onclick.apply(this,arguments);}}};c.prototype.onsapselect=function(e){if(q(e.target).hasClass("sapUiTableGroupIcon")){this._onNodeSelect(e);}else if(q(e.target).hasClass("sapUiAnalyticalTableSum")){e.preventDefault();return;}else{var t=q(e.target),$=t.closest('div.sapUiTableRowHdr');if($.hasClass('sapUiTableGroupHeader')&&$.hasClass('sapUiTableRowHdr')){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");B.toggleIndex(r);return;}if(T.prototype.onsapselect){T.prototype.onsapselect.apply(this,arguments);}}};c.prototype._onNodeSelect=function(e){var $=q(e.target).parent();if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");B.toggleIndex(r);}e.preventDefault();e.stopPropagation();};c.prototype._onContextMenu=function(e){if(q(e.target).closest('tr').hasClass('sapUiTableGroupHeader')||q(e.target).closest('.sapUiTableRowHdr.sapUiTableGroupHeader').length>0){this._iGroupedLevel=q(e.target).closest('[data-sap-ui-level]').data('sap-ui-level');var m=this._getGroupHeaderMenu();var d=sap.ui.core.Popup.Dock;var l=e.pageX||e.clientX;var L=e.pageY||e.clientY;m.open(false,e.target,d.LeftTop,d.LeftTop,document,(l-2)+" "+(L-2));e.preventDefault();e.stopPropagation();return;}return true;};c.prototype._getGroupHeaderMenu=function(){var t=this;function g(){var i=t._iGroupedLevel-1;if(t._aGroupedColumns[i]){var o=t.getColumns().filter(function(C){if(t._aGroupedColumns[i]==C.getId()){return true;}})[0];return{column:o,index:i};}else{return undefined;}}if(!this._oGroupHeaderMenu){this._oGroupHeaderMenu=new sap.ui.unified.Menu();this._oGroupHeaderMenuVisibilityItem=new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_SHOW_COLUMN"),select:function(){var G=g();if(G){var C=G.column,s=C.getShowIfGrouped();C.setShowIfGrouped(!s);t.fireGroup({column:C,groupedColumns:C.getParent()._aGroupedColumns,type:(!s?sap.ui.table.GroupEventType.showGroupedColumn:sap.ui.table.GroupEventType.hideGroupedColumn)});}}});this._oGroupHeaderMenu.addItem(this._oGroupHeaderMenuVisibilityItem);this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_UNGROUP"),select:function(){var d=t.getColumns(),f=0,l=-1,u=-1,C;for(var i=0;i<d.length;i++){C=d[i];if(C.getGrouped()){f++;if(f==t._iGroupedLevel){C._bSkipUpdateAI=true;var B=t.getBinding("rows");B.setNumberOfExpandedLevels(0);C.setGrouped(false);C._bSkipUpdateAI=false;u=i;t.fireGroup({column:C,groupedColumns:C.getParent()._aGroupedColumns,type:sap.ui.table.GroupEventType.ungroup});}else{l=i;}}}if(l>-1&&u>-1&&u<l){var U=d[u];var h=U.getHeaderSpan();if(q.isArray(h)){h=h[0];}var r=[];for(var i=u;i<u+h;i++){r.push(d[i]);}q.each(r,function(e,C){t.removeColumn(C);t.insertColumn(C,l);});}t._updateTableColumnDetails();t.updateAnalyticalInfo();}}));this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_UNGROUP_ALL"),select:function(){var d=t.getColumns();for(var i=0;i<d.length;i++){d[i]._bSkipUpdateAI=true;var B=t.getBinding("rows");B.setNumberOfExpandedLevels(0);d[i].setGrouped(false);d[i]._bSkipUpdateAI=false;}t._bSupressRefresh=true;t._updateTableColumnDetails();t.updateAnalyticalInfo();t._bSupressRefresh=false;t.fireGroup({column:undefined,groupedColumns:[],type:sap.ui.table.GroupEventType.ungroupAll});}}));this._oGroupHeaderMoveUpItem=new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_MOVE_UP"),select:function(){var G=g();if(G){var C=G.column;var i=q.inArray(C.getId(),t._aGroupedColumns);if(i>0){t._aGroupedColumns[i]=t._aGroupedColumns.splice(i-1,1,t._aGroupedColumns[i])[0];t.updateAnalyticalInfo();t.fireGroup({column:C,groupedColumns:C.getParent()._aGroupedColumns,type:sap.ui.table.GroupEventType.moveUp});}}},icon:"sap-icon://arrow-top"});this._oGroupHeaderMenu.addItem(this._oGroupHeaderMoveUpItem);this._oGroupHeaderMoveDownItem=new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_MOVE_DOWN"),select:function(){var G=g();if(G){var C=G.column;var i=q.inArray(C.getId(),t._aGroupedColumns);if(i<t._aGroupedColumns.length){t._aGroupedColumns[i]=t._aGroupedColumns.splice(i+1,1,t._aGroupedColumns[i])[0];t.updateAnalyticalInfo();t.fireGroup({column:C,groupedColumns:C.getParent()._aGroupedColumns,type:sap.ui.table.GroupEventType.moveDown});}}},icon:"sap-icon://arrow-bottom"});this._oGroupHeaderMenu.addItem(this._oGroupHeaderMoveDownItem);this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_SORT_ASC"),select:function(){var G=g();if(G){var C=G.column;C.sort(false);}},icon:"sap-icon://up"}));this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_SORT_DESC"),select:function(){var G=g();if(G){var C=G.column;C.sort(true);}},icon:"sap-icon://down"}));this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_COLLAPSE_LEVEL"),select:function(){t.getBinding("rows").collapseToLevel(t._iGroupedLevel-1);t.setFirstVisibleRow(0);t.clearSelection();}}));this._oGroupHeaderMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_COLLAPSE_ALL"),select:function(){t.getBinding("rows").collapseToLevel(0);t.setFirstVisibleRow(0);t.clearSelection();}}));}var G=g();if(G){var C=G.column;if(C.getShowIfGrouped()){this._oGroupHeaderMenuVisibilityItem.setText(this._oResBundle.getText("TBL_HIDE_COLUMN"));}else{this._oGroupHeaderMenuVisibilityItem.setText(this._oResBundle.getText("TBL_SHOW_COLUMN"));}this._oGroupHeaderMoveUpItem.setEnabled(G.index>0);this._oGroupHeaderMoveDownItem.setEnabled(G.index<this._aGroupedColumns.length-1);}else{this._oGroupHeaderMoveUpItem.setEnabled(true);this._oGroupHeaderMoveDownItem.setEnabled(true);}return this._oGroupHeaderMenu;};c.prototype.expand=function(r){var B=this.getBinding("rows");if(B){B.expand(r);}};c.prototype.collapse=function(r){var B=this.getBinding("rows");if(B){B.collapse(r);}};c.prototype.collapseAll=function(){var B=this.getBinding("rows");if(B){B.collapseToLevel(0);this.setFirstVisibleRow(0);}return this;};c.prototype.isExpanded=function(r){var B=this.getBinding("rows");if(B){return B.isExpanded(r);}return false;};c.prototype.getContextByIndex=function(i){var B=this.getBinding("rows");return i>=0&&B?B.getContextByIndex(i):null;};c.prototype.getContextInfoByIndex=function(i){var B=this.getBinding("rows");return i>=0&&B?B.getNodeByIndex(i):null;};c.prototype._onColumnMoved=function(e){T.prototype._onColumnMoved.apply(this,arguments);this.updateAnalyticalInfo();};c.prototype.addColumn=function(C,s){var o=this._getColumn(C);if(o.getGrouped()){this._addGroupedColumn(o.getId());}T.prototype.addColumn.call(this,o,s);this._updateTableColumnDetails();this.updateAnalyticalInfo(s);return this;};c.prototype.insertColumn=function(C,i,s){var o=this._getColumn(C);if(o.getGrouped()){this._addGroupedColumn(o.getId());}T.prototype.insertColumn.call(this,o,i,s);this._updateTableColumnDetails();this.updateAnalyticalInfo(s);return this;};c.prototype.removeColumn=function(C,s){var r=T.prototype.removeColumn.apply(this,arguments);if(!this._iNewColPos){this._aGroupedColumns=q.grep(this._aGroupedColumns,function(v){if(C.getId){return v!=C.getId();}else{return v==C;}});}this.updateAnalyticalInfo(s);return r;};c.prototype.removeAllColumns=function(s){this._aGroupedColumns=[];var r=T.prototype.removeAllColumns.apply(this,arguments);this._updateTableColumnDetails();this.updateAnalyticalInfo(s);return r;};c.prototype._getColumn=function(C){if(typeof C==="string"){var o=new A({leadingProperty:C,template:C,managed:true});return o;}else if(C instanceof A){return C;}else{throw new Error("Wrong column type. You need to define a string (property) or pass an AnalyticalColumnObject");}};c.prototype._updateColumns=function(){this._updateTableColumnDetails();this.updateAnalyticalInfo();};c.prototype.updateAnalyticalInfo=function(s){var B=this.getBinding("rows");if(B){var C=this._getColumnInformation();B.updateAnalyticalInfo(C);this._updateTotalRow(C,s);if(s||this._bSupressRefresh){return;}this.refreshRows();}};c.prototype._updateTotalRow=function(C,s){var B=this.getBinding("rows");var f=this.getFixedBottomRowCount();if(B&&(B.providesGrandTotal()&&B.hasTotaledMeasures())){if(f!==1){this.setProperty("fixedBottomRowCount",1,s);}}else{if(f!==0){this.setProperty("fixedBottomRowCount",0,s);}}};c.prototype._updateTableColumnDetails=function(){var B=this.getBinding("rows"),r=B&&B.getAnalyticalQueryResult();if(r){var C=this.getColumns(),g=[],u=[],d=[],D={},e,f;for(var i=0;i<C.length;i++){e=C[i];e._isLastGroupableLeft=false;e._bLastGroupAndGrouped=false;e._bDependendGrouped=false;if(!e.getVisible()){continue;}var l=e.getLeadingProperty();f=r.findDimensionByPropertyName(l);if(f){var h=f.getName();if(!D[h]){D[h]={dimension:f,columns:[e]};}else{D[h].columns.push(e);}if(e.getGrouped()&&q.inArray(h,g)==-1){g.push(h);}if(q.inArray(h,d)==-1){d.push(h);}}}u=q.grep(d,function(s){return(q.inArray(s,g)==-1);});if(g.length>0){q.each(g,function(i,s){q.each(D[s].columns,function(j,o){if(!o.getGrouped()){o._bDependendGrouped=true;}});});if(g.length==d.length){f=r.findDimensionByPropertyName(sap.ui.getCore().byId(this._aGroupedColumns[this._aGroupedColumns.length-1]).getLeadingProperty());var G=D[f.getName()].columns;q.each(G,function(i,o){o._bLastGroupAndGrouped=true;});}}if(u.length==1){q.each(D[u[0]].columns,function(j,o){o._isLastGroupableLeft=true;});}}};c.prototype._getFirstMeasureColumnIndex=function(){var B=this.getBinding("rows"),r=B&&B.getAnalyticalQueryResult(),C=this._getVisibleColumns();if(!r){return-1;}for(var i=0;i<C.length;i++){var o=C[i],l=o.getLeadingProperty();if(r.findMeasureByName(l)||r.findMeasureByPropertyName(l)){return i;}}};c.prototype.getTotalSize=function(){var B=this.getBinding("rows");if(B){return B.getTotalSize();}return 0;};c.prototype._hasData=function(){var B=this.getBinding("rows"),l=B&&(B.getLength()||0),h=B&&B.providesGrandTotal()&&B.hasTotaledMeasures();if(!B||(h&&l<2)||(!h&&l===0)){return false;}return true;};c.prototype._onPersoApplied=function(){T.prototype._onPersoApplied.apply(this,arguments);this._aGroupedColumns=[];var C=this.getColumns();for(var i=0,l=C.length;i<l;i++){if(C[i].getGrouped()){this._addGroupedColumn(C[i].getId());}}this._updateTableColumnDetails();this.updateAnalyticalInfo();};c.prototype._addGroupedColumn=function(C){if(q.inArray(C,this._aGroupedColumns)<0){this._aGroupedColumns.push(C);}};c.prototype.getGroupedColumns=function(){return this._aGroupedColumns;};c.prototype.setCollapseRecursive=function(C){var B=this.getBinding("rows");if(B){if(B.setCollapseRecursive){B.setCollapseRecursive(C);}}this.setProperty("collapseRecursive",!!C,true);return this;};c.prototype._getSelectableRowCount=function(){var B=this.getBinding("rows");if(B){var r=B.getGrandTotalContextInfo();return r?r.numberOfLeafs:0;}};c.prototype.isIndexSelected=function(r){return a.prototype.isIndexSelected.call(this,r);};c.prototype.setSelectedIndex=function(r){return a.prototype.setSelectedIndex.call(this,r);};c.prototype.getSelectedIndices=function(){return a.prototype.getSelectedIndices.call(this);};c.prototype.setSelectionInterval=function(f,t){return a.prototype.setSelectionInterval.call(this,f,t);};c.prototype.addSelectionInterval=function(f,t){return a.prototype.addSelectionInterval.call(this,f,t);};c.prototype.removeSelectionInterval=function(f,t){return a.prototype.removeSelectionInterval.call(this,f,t);};c.prototype.selectAll=function(){return a.prototype.selectAll.call(this);};c.prototype.getSelectedIndex=function(){return a.prototype.getSelectedIndex.call(this);};c.prototype.clearSelection=function(){return a.prototype.clearSelection.call(this);};c.prototype._isRowSelectable=function(r){var B=this.getBinding("rows");if(B){return B.isIndexSelectable(r);}else{return false;}};return c;},true);};if(!jQuery.sap.isDeclared('sap.ui.table.DataTable')){jQuery.sap.declare('sap.ui.table.DataTable');jQuery.sap.require('jquery.sap.global');jQuery.sap.require('sap.ui.core.Control');jQuery.sap.require('sap.ui.core.IntervalTrigger');jQuery.sap.require('sap.ui.core.ScrollBar');jQuery.sap.require('sap.ui.core.delegate.ItemNavigation');jQuery.sap.require('sap.ui.core.theming.Parameters');jQuery.sap.require('sap.ui.model.SelectionModel');jQuery.sap.require('sap.ui.model.odata.ODataTreeBindingAdapter');jQuery.sap.require('sap.ui.core.IconPool');jQuery.sap.require('jquery.sap.dom');sap.ui.define("sap/ui/table/DataTable",['jquery.sap.global','sap/ui/core/Control','sap/ui/core/IntervalTrigger','sap/ui/core/ScrollBar','sap/ui/core/delegate/ItemNavigation','sap/ui/core/theming/Parameters','sap/ui/model/SelectionModel','./Row','sap/ui/model/odata/ODataTreeBindingAdapter','./library','sap/ui/core/IconPool','jquery.sap.dom'],function(q,C,I,S,a,P,b,R,O,c,d){"use strict";var D=C.extend("sap.ui.table.DataTable",{metadata:{library:"sap.ui.table",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'auto'},rowHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderHeight:{type:"int",group:"Appearance",defaultValue:null},columnHeaderVisible:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCount:{type:"int",group:"Appearance",defaultValue:10},firstVisibleRow:{type:"int",group:"Appearance",defaultValue:0},selectionMode:{type:"sap.ui.table.SelectionMode",group:"Behavior",defaultValue:sap.ui.table.SelectionMode.Multi},selectionBehavior:{type:"sap.ui.table.SelectionBehavior",group:"Behavior",defaultValue:sap.ui.table.SelectionBehavior.RowSelector},selectedIndex:{type:"int",group:"Appearance",defaultValue:-1},editable:{type:"boolean",group:"Behavior",defaultValue:true},navigationMode:{type:"sap.ui.table.NavigationMode",group:"Behavior",defaultValue:sap.ui.table.NavigationMode.Scrollbar},threshold:{type:"int",group:"Appearance",defaultValue:100},enableColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true},enableGrouping:{type:"boolean",group:"Behavior",defaultValue:false},showColumnVisibilityMenu:{type:"boolean",group:"Appearance",defaultValue:false},showNoData:{type:"boolean",group:"Appearance",defaultValue:true},visibleRowCountMode:{type:"sap.ui.table.VisibleRowCountMode",group:"Appearance",defaultValue:sap.ui.table.VisibleRowCountMode.Fixed},minAutoRowCount:{type:"int",group:"Appearance",defaultValue:5},fixedColumnCount:{type:"int",group:"Appearance",defaultValue:0},fixedRowCount:{type:"int",group:"Appearance",defaultValue:0},fixedBottomRowCount:{type:"int",group:"Appearance",defaultValue:0},enableColumnFreeze:{type:"boolean",group:"Behavior",defaultValue:false},enableCellFilter:{type:"boolean",group:"Behavior",defaultValue:false},showOverlay:{type:"boolean",group:"Appearance",defaultValue:false},enableSelectAll:{type:"boolean",group:"Behavior",defaultValue:true},enableCustomFilter:{type:"boolean",group:"Behavior",defaultValue:false},enableBusyIndicator:{type:"boolean",group:"Behavior",defaultValue:false},allowColumnReordering:{type:"boolean",group:"Behavior",defaultValue:true,deprecated:true},noDataText:{type:"string",group:"Appearance",defaultValue:null,deprecated:true},expandFirstLevel:{type:"boolean",defaultValue:false},useGroupMode:{type:"boolean",group:"Appearance",defaultValue:false},groupHeaderProperty:{type:"string",group:"Data",defaultValue:null},collapseRecursive:{type:"boolean",defaultValue:true},rootLevel:{type:"int",group:"Data",defaultValue:0},expandedVisibleRowCount:{type:"int",defaultValue:null},expanded:{type:"boolean",defaultValue:false},hierarchical:{type:"boolean",defaultValue:false}},defaultAggregation:"columns",aggregations:{title:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},footer:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false},toolbar:{type:"sap.ui.core.Toolbar",multiple:false},extension:{type:"sap.ui.core.Control",multiple:true,singularName:"extension"},columns:{type:"sap.ui.table.Column",multiple:true,singularName:"column",bindable:"bindable"},rows:{type:"sap.ui.table.Row",multiple:true,singularName:"row",bindable:"bindable"},noData:{type:"sap.ui.core.Control",altTypes:["string"],multiple:false}},associations:{groupBy:{type:"sap.ui.table.Column",multiple:false}},events:{rowSelectionChange:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},rowIndices:{type:"int[]"}}},columnSelect:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnResize:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},width:{type:"int"}}},columnMove:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},newPos:{type:"int"}}},sort:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},sortOrder:{type:"sap.ui.table.SortOrder"},columnAdded:{type:"boolean"}}},filter:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},value:{type:"string"}}},group:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},columnVisibility:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"},visible:{type:"boolean"}}},cellClick:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},rowIndex:{type:"int"},columnIndex:{type:"int"}}},cellContextmenu:{allowPreventDefault:true,parameters:{cellControl:{type:"sap.ui.core.Control"},rowIndex:{type:"int"},columnIndex:{type:"int"}}},columnFreeze:{allowPreventDefault:true,parameters:{column:{type:"sap.ui.table.Column"}}},customFilter:{},toggleOpenState:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},expanded:{type:"boolean"}}},rowSelect:{parameters:{rowIndex:{type:"int"},rowContext:{type:"object"},rowIndices:{type:"int[]"}}}}}});D.ResizeTrigger=new I(300);d.insertFontFaceStyle();D.prototype.init=function(){this._oResBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.table");this._bAccMode=sap.ui.getCore().getConfiguration().getAccessibility();this._bRtlMode=sap.ui.getCore().getConfiguration().getRTL();this._initSelectionModel(sap.ui.model.SelectionModel.MULTI_SELECTION);this._iColMinWidth=20;if('ontouchstart'in document){this._iColMinWidth=88;}this._oCalcColumnWidths=[];this._aIdxCols2Cells=[];this._aVisibleColumns=[];var f={onAfterRendering:function(e){e.srcControl.$("sb").attr("tabindex","-1").css("outline","none");}};this._oVSb=new S(this.getId()+"-vsb",{size:"100%"});this._oVSb.attachScroll(this.onvscroll,this);this._oVSb.addDelegate(f);this._oHSb=new S(this.getId()+"-hsb",{size:"100%",contentSize:"0px",vertical:false});this._oHSb.attachScroll(this.onhscroll,this);this._oHSb.addDelegate(f);this._bActionMode=false;this._iLastFixedColIndex=-1;this._bInheritEditableToControls=false;this._bAllowColumnHeaderTextSelection=false;this._bCallUpdateTableCell=false;this._iTimerDelay=250;this._doubleclickDelay=300;this._clicksRegistered=0;this._bjQueryLess18=q.sap.Version(q.fn.jquery).compareTo("1.8")<0;this._iDataRequestedCounter=0;this._bDataRequestedListenersAttached=false;this._iLastFixedColIndex=0;if(sap.ui.getCore().getConfiguration().getTheme()==="sap_bluecrystal"||sap.ui.getCore().getConfiguration().getTheme()==="sap_hcb"){q.sap.require("sap.ui.core.IconPool");sap.ui.core.IconPool.insertFontFaceStyle();}this._bInheritEditableToControls=true;this.setEditable(false);this.setSelectionBehavior(sap.ui.table.SelectionBehavior.Row);this.attachRowSelectionChange(function(e){this.fireRowSelect(e.mParameters);});this._iLastFixedColIndex=-1;};D.prototype.exit=function(){this._oVSb.destroy();this._oHSb.destroy();if(this._oPaginator){this._oPaginator.destroy();}this._destroyItemNavigation();this._cleanUpTimers();this._detachEvents();};D.prototype.onThemeChanged=function(){if(this.getDomRef()){this.invalidate();}};D.prototype.onBeforeRendering=function(){this._cleanUpTimers();this._detachEvents();};D.prototype.onAfterRendering=function(){this._bOnAfterRendering=true;var $=this.$();if('ontouchstart'in document){$.addClass("sapUiTableTouch");}this._renderOverlay();this._updateVSb(true);this._updateTableContent();this._handleResize();this._attachEvents();var e=this.getColumns();for(var i=0,l=e.length;i<l;i++){if(e[i].getVisible()){e[i]._restoreIcons();}}if(!this._bAllowColumnHeaderTextSelection){this._disableTextSelection($.find(".sapUiTableColHdrCnt"));}this._bOnAfterRendering=false;this._initItemNavigation();if(this._bDetermineVisibleCols===true){this._determineVisibleCols();this._bDetermineVisibleCols=false;}this.$().find("[role=grid]").attr("role","treegrid");};D.prototype._renderOverlay=function(){var $=this.$(),e=$.find(".sapUiTableOverlay"),s=this.getShowOverlay();if(s&&e.length===0){e=q("<div>").addClass("sapUiOverlay sapUiTableOverlay").css("z-index","1");$.append(e);}else if(!s){e.remove();}};D.prototype.setShowOverlay=function(s){this.setProperty("showOverlay",s,true);this._renderOverlay();return this;};D.prototype._updateTableContent=function(){this._updateNoData();this._updateSelection();if(this._modifyRow){q.each(this.getRows(),function(j,n){this._modifyRow(j+this.getFirstVisibleRow(),n.$());this._modifyRow(j+this.getFirstVisibleRow(),n.$("fixed"));}.bind(this));}var B=this.getBinding("rows");var f=this.getFixedRowCount();var F=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();if(B){q.each(this.getRows(),function(j,n){var p=n.getDomRefs(true);if(n.getBindingContext()){p.rowSelector.attr("title",this._oResBundle.getText("TBL_ROW_SELECT"));}else{p.rowSelector.attr("title","");}if(f>0){p.row.toggleClass("sapUiTableFixedTopRow",j<f);p.row.toggleClass("sapUiTableFixedLastTopRow",j==f-1);}if(F>0){var t;if(B.getLength()>=v){t=(j==v-F-1);}else{t=(this.getFirstVisibleRow()+j)==(B.getLength()-F-1)&&(this.getFirstVisibleRow()+j)<B.getLength();}p.row.toggleClass("sapUiTableFixedPreBottomRow",t);}}.bind(this));}this._updateRowHeader();if(this._bOnAfterRendering&&(this._bCallUpdateTableCell||typeof this._updateTableCell==="function")){var o=this.mBindingInfos["rows"];q.each(this.getRows(),function(j,n){var A=this.getFirstVisibleRow()+j;q.each(n.getCells(),function(j,p){if(p._updateTableCell){p._updateTableCell(p,p.getBindingContext(o&&o.model),p.$().closest("td"),A);}if(this._updateTableCell){this._updateTableCell(p,p.getBindingContext(o&&o.model),p.$().closest("td"),A);}});}.bind(this));}if(this.getHierarchical()){var B=this.getBinding("rows"),i=this.getFirstVisibleRow(),e=this.getVisibleRowCount(),g=this.getFixedBottomRowCount(),h=e-g;var j=i;for(var r=0;r<e;r++){if(g>0&&r>=h){j=B.getLength()-e+r;}else{j=i+r;}var k=this.getContextByIndex(j),$=this.getRows()[r].getDomRefs(true),l=$.rowFixedPart||$.rowScrollPart;this._updateExpandIcon(l,k,j);if(this.getUseGroupMode()){var m=this.$().find("div[data-sap-ui-rowindex='"+l.attr("data-sap-ui-rowindex")+"']");if(B.hasChildren&&B.hasChildren(k)){l.addClass("sapUiTableGroupHeader sapUiTableRowHidden");var s=B.isExpanded(i+r)?"sapUiTableGroupIconOpen":"sapUiTableGroupIconClosed";m.html("<div class=\"sapUiTableGroupIcon "+s+"\" tabindex=\"-1\">"+this.getModel().getProperty(this.getGroupHeaderProperty(),k)+"</div>");m.addClass("sapUiTableGroupHeader").removeAttr("title");}else{l.removeClass("sapUiTableGroupHeader");if(k){l.removeClass("sapUiTableRowHidden");}m.html("");m.removeClass("sapUiTableGroupHeader");}}}}};D.prototype._initItemNavigation=function(){var $=this.$();var e=this._getVisibleColumnCount();var t=e;var h=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(!this._oColHdrItemNav){this._oColHdrItemNav=new a();this._oColHdrItemNav.setCycling(false);this.addDelegate(this._oColHdrItemNav);}var f=[];if(this.getFixedColumnCount()==0){f=$.find(".sapUiTableCtrl td[tabindex]").get();}else{var g=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowFixed');var j=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowFixed');var k=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowScroll');var l=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowScroll');var m=this.$().find('.sapUiTableCtrlFixed.sapUiTableCtrlRowFixedBottom');var n=this.$().find('.sapUiTableCtrlScroll.sapUiTableCtrlRowFixedBottom');for(var i=0;i<this.getVisibleRowCount();i++){f=f.concat(g.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());f=f.concat(j.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());f=f.concat(k.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());f=f.concat(l.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());f=f.concat(m.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());f=f.concat(n.find('tr[data-sap-ui-rowindex="'+i+'"]').find('td[tabindex]').get());}}var T=f.length;var o=0;if(h){var r=$.find(".sapUiTableRowHdr").get();for(var i=r.length-1;i>=0;i--){f.splice(i*e,0,r[i]);T++;}T--;t++;o=1;}if(this.getColumnHeaderVisible()){f=$.find(".sapUiTableCol").get().concat(f);}if(h&&this.getColumnHeaderVisible()){var p=$.find(".sapUiTableColRowHdr").get();for(var i=this._getHeaderRowCount()-1;i>=0;i--){f.splice(i*e,0,p[0]);}}if(!this._oItemNavigation){this._iLastSelectedDataRow=this._getHeaderRowCount();this._oItemNavigation=new a();this._oItemNavigation.setTableMode(true);this._oItemNavigation.attachEvent(a.Events.BeforeFocus,function(E){this.$("ariadesc").text("");},this);this._oItemNavigation.attachEvent(a.Events.AfterFocus,function(E){var s=Math.floor(E.getParameter("index")/this._oItemNavigation.iColumns);if(s>0){this._iLastSelectedDataRow=s;}},this);this.addDelegate(this._oItemNavigation);}this._oItemNavigation.setColumns(t);this._oItemNavigation.setRootDomRef($.find(".sapUiTableCnt").get(0));this._oItemNavigation.setItemDomRefs(f);this._oItemNavigation.setFocusedIndex(o);};D.prototype._destroyItemNavigation=function(){if(this._oItemNavigation){this._oItemNavigation.destroy();this._oItemNavigation=undefined;}};D.prototype.getFocusInfo=function(){var i=this.$().find(":focus").attr("id");if(i){return{customId:i};}else{return sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}};D.prototype.applyFocusInfo=function(f){if(f&&f.customId){this.$().find("#"+f.customId).focus();}else{sap.ui.core.Element.prototype.getFocusInfo.apply(this,arguments);}return this;};D.prototype.setTitle=function(t){var T=t;if(typeof(t)==="string"||t instanceof String){T=sap.ui.table.TableHelper.createTextView({text:t,width:"100%"});T.addStyleClass("sapUiTableHdrTitle");}this.setAggregation("title",T);return this;};D.prototype.setFooter=function(f){var F=f;if(typeof(f)==="string"||f instanceof String){F=sap.ui.table.TableHelper.createTextView({text:f,width:"100%"});}this.setAggregation("footer",F);return this;};D.prototype.setSelectionMode=function(s){var B=this.getBinding("rows");if(B&&B.clearSelection){B.clearSelection();this.setProperty("selectionMode",s);}else{this.clearSelection();if(s===sap.ui.table.SelectionMode.Single){this._oSelection.setSelectionMode(b.SINGLE_SELECTION);}else{this._oSelection.setSelectionMode(b.MULTI_SELECTION);}this.setProperty("selectionMode",s);}return this;};D.prototype.setFirstVisibleRow=function(r,o){this.setProperty("firstVisibleRow",r,true);if(this.getBinding("rows")&&!this._bRefreshing){this.updateRows();}this._updateAriaRowOfRowsText(true);if(o&&!this._$AriaLiveDomRef&&this._bAccMode){if(this._ariaLiveTimer){q.sap.clearDelayedCall(this._ariaLiveTimer);}var s=function(){if(this._oItemNavigation){this._$AriaLiveDomRef=q(this._oItemNavigation.getFocusedDomRef()).attr("aria-live","rude");var t=this;var f=function(){if(t._$AriaLiveDomRef){t._$AriaLiveDomRef.removeAttr("aria-live");delete t._$AriaLiveDomRef;}};q.sap.delayedCall(0,this,f);delete this._ariaLiveTimer;}};this._ariaLiveTimer=q.sap.delayedCall(60,this,s);}return this;};D.prototype.getAllowColumnReordering=function(){q.sap.log.warning("getAllowColumnReordering is deprecated - please use getEnableColumnReordering!");return D.prototype.getEnableColumnReordering.apply(this,arguments);};D.prototype.setAllowColumnReordering=function(){q.sap.log.warning("setAllowColumnReordering is deprecated - please use setEnableColumnReordering!");return D.prototype.setEnableColumnReordering.apply(this,arguments);};D.prototype.setFixedRowCount=function(r){if(!this.getHierarchical()){this.setProperty("fixedRowCount",r);}else{q.sap.log.warning("TreeTable: the property \"fixedRowCount\" is not supported and will be ignored!");}return this;};D.getMetadata().getAggregation("rows")._doesNotRequireFactory=true;D.prototype.bindRows=function(B,t,s,f){var p,T,e,f;if(typeof B=="string"){p=arguments[0];T=arguments[1];e=arguments[2];f=arguments[3];B={path:p,sorter:e,filters:f,template:T};}if(typeof B==="object"){B.parameters=B.parameters||{};B.parameters.rootLevel=this.getRootLevel();B.parameters.collapseRecursive=this.getCollapseRecursive();B.parameters.numberOfExpandedLevels=B.parameters.numberOfExpandedLevels||(this.getExpandFirstLevel()?1:0);B.parameters.rootNodeID=B.parameters.rootNodeID;}return this.bindAggregation("rows",B);};D.prototype._bindAggregation=function(n,p,t,s,f){sap.ui.core.Element.prototype._bindAggregation.apply(this,arguments);var B=this.getBinding("rows");if(n==="rows"&&B){B.attachChange(this._onBindingChange,this);}this._initSelectionModel(sap.ui.model.SelectionModel.MULTI_SELECTION);return this;};D.prototype._initSelectionModel=function(s){if(this._oSelection){this._oSelection.detachSelectionChanged(this._onSelectionChanged,this);}this._oSelection=new sap.ui.model.SelectionModel(s);this._oSelection.attachSelectionChanged(this._onSelectionChanged,this);return this;};D.prototype._onBindingChange=function(e){var r=typeof(e)==="object"?e.getParameter("reason"):e;if(r==="sort"||r==="filter"){this.clearSelection();this.setFirstVisibleRow(0);}};D.prototype.unbindAggregation=function(n,s){var B=this.getBinding("rows");if(n==="rows"&&B){B.detachChange(this._onBindingChange);s=true;this._restoreAppDefaultsColumnHeaderSortFilter();}this.updateRows();return sap.ui.core.Element.prototype.unbindAggregation.apply(this,[n,s]);};D.prototype.setVisibleRowCountMode=function(v){this.setProperty("visibleRowCountMode",v);this._handleRowCountMode();return this;};D.prototype.setExpanded=function(e){this.setProperty("expanded",e,true);if(this.getExpandedVisibleRowCount()>0){var v=e?this.getExpandedVisibleRowCount():this._iVisibleRowCount;if(v!=null&&!isFinite(v)){return this;}v=this.validateProperty("visibleRowCount",v);if(this.getBinding("rows")&&this.getBinding("rows").getLength()<=v){this.setProperty("firstVisibleRow",0);}this.setProperty("visibleRowCount",v);}return this;};D.prototype.setVisibleRowCount=function(v){this._iVisibleRowCount=v;if(!this.getExpanded()){if(v!=null&&!isFinite(v)){return this;}v=this.validateProperty("visibleRowCount",v);if(this.getBinding("rows")&&this.getBinding("rows").getLength()<=v){this.setProperty("firstVisibleRow",0);}this.setProperty("visibleRowCount",v);}return this;};D.prototype.setExpandedVisibleRowCount=function(v){this.setProperty("expandedVisibleRowCount",v,true);if(this.getExpanded()){if(v!=null&&!isFinite(v)){return this;}v=this.validateProperty("visibleRowCount",v);if(this.getBinding("rows")&&this.getBinding("rows").getLength()<=v){this.setProperty("firstVisibleRow",0);}this.setProperty("visibleRowCount",v);}return this;};D.prototype.refreshRows=function(r){this._bBusyIndicatorAllowed=true;this._attachBindingListener();var B=this.getBinding("rows");if(B&&this.isTreeBinding("rows")&&!B.hasListeners("selectionChanged")){B.attachSelectionChanged(this._onSelectionChanged,this);}this._bRefreshing=true;this._onBindingChange(r);this._updateBindingContexts(true);this._bRefreshing=false;};D.prototype.updateRows=function(r){this._setBusy(r?{changeReason:r}:false);var s=this.getFirstVisibleRow();s=Math.max(s,0);if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar&&this._getRowCount()>0){s=Math.min(s,Math.max(this._getRowCount()-this.getVisibleRowCount(),0));}this.setProperty("firstVisibleRow",s,true);if(this._oVSb.getScrollPosition()!==s){this._oVSb.setScrollPosition(s);this._updateAriaRowOfRowsText(true);}if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){var n=1;if(s<this.getBinding("rows").getLength()){n=Math.ceil((s+1)/this.getVisibleRowCount());}if(n!==this._oPaginator.getCurrentPage()){this.setProperty("firstVisibleRow",(n-1)*this.getVisibleRowCount(),true);this._oPaginator.setCurrentPage(n);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}}}if(this.getDomRef()){this._sBindingTimer=this._sBindingTimer||q.sap.delayedCall(50,this,function(){if(!this.bIsDestroyed){this._determineVisibleCols();this._updateBindingContexts();this._updateVSb();this._updateTableContent();this._sBindingTimer=undefined;this.fireEvent("_rowsUpdated");}});}};D.prototype.insertRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"insertRow\" cannot be used programmatically!");};D.prototype.addRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"addRow\" cannot be used programmatically!");};D.prototype.removeRow=function(){q.sap.log.error("The control manages the rows aggregation. The method \"removeRow\" cannot be used programmatically!");};D.prototype.removeAllRows=function(){q.sap.log.error("The control manages the rows aggregation. The method \"removeAllRows\" cannot be used programmatically!");};D.prototype.destroyRows=function(){q.sap.log.error("The control manages the rows aggregation. The method \"destroyRows\" cannot be used programmatically!");};D.prototype.autoResizeColumn=function(i){var o=this.getColumns()[i];this._iColumnResizeStart=null;var n=this._calculateAutomaticColumnWidth(i);if(n==null){return this;}o._iNewWidth=n;this._oCalcColumnWidths[i]=o._iNewWidth;this._onColumnResized(null,i);return this;};D.prototype._attachEvents=function(){var $=this.$();$.find(".sapUiTableColHdrScr").scroll(q.proxy(this._oncolscroll,this));$.find(".sapUiTableCtrlScr").scroll(q.proxy(this._oncntscroll,this));$.find(".sapUiTableCtrlScrFixed").scroll(q.proxy(this._oncntscroll,this));$.find(".sapUiTableRowHdr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableRowHdr").index(this);$.find(".sapUiTableCtrlFixed > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableCtrlFixed > tbody > tr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableCtrlFixed > tbody > tr").index(this);$.find(".sapUiTableRowHdr").filter(":eq("+(i)+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableRowHdr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlScroll > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableCtrlScroll > tbody > tr").hover(function(){q(this).addClass("sapUiTableRowHvr");var i=$.find(".sapUiTableCtrlScroll > tbody > tr").index(this);$.find(".sapUiTableRowHdr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").filter(":eq("+i+")").addClass("sapUiTableRowHvr");},function(){q(this).removeClass("sapUiTableRowHvr");$.find(".sapUiTableRowHdr").removeClass("sapUiTableRowHvr");$.find(".sapUiTableCtrlFixed > tbody > tr").removeClass("sapUiTableRowHvr");});$.find(".sapUiTableColRsz").mousedown(q.proxy(this._onColumnResizeStart,this));this._enableColumnAutoResizing();D.ResizeTrigger.addListener(this._checkTableSize,this);this._oHSb.bind($.find(".sapUiTableCtrlScr").get(0));this._oVSb.bind($.find(".sapUiTableCtrlScr").get(0));this._oHSb.bind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.bind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.bind($.find(".sapUiTableRowHdrScr").get(0));q("body").bind('webkitTransitionEnd transitionend',q.proxy(function(e){if(q(e.target).has($).length>0){this._handleResize();}},this));};D.prototype._detachEvents=function(){var $=this.$();$.find(".sapUiTableRowHdrScr").unbind();$.find(".sapUiTableColHdrScr").unbind();$.find(".sapUiTableCtrl > tbody > tr").unbind();$.find(".sapUiTableRowHdr").unbind();D.ResizeTrigger.removeListener(this._checkTableSize,this);$.find(".sapUiTableColRsz").unbind();this._oHSb.unbind($.find(".sapUiTableCtrlScr").get(0));this._oVSb.unbind($.find(".sapUiTableCtrlScr").get(0));this._oHSb.unbind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.unbind($.find(".sapUiTableCtrlScrFixed").get(0));this._oVSb.unbind($.find(".sapUiTableRowHdrScr").get(0));q("body").unbind('webkitTransitionEnd transitionend');};D.prototype._cleanUpTimers=function(){if(this._sBindingTimer){q.sap.clearDelayedCall(this._sBindingTimer);this._sBindingTimer=undefined;}if(this._sScrollBarTimer){q.sap.clearDelayedCall(this._sScrollBarTimer);this._sScrollBarTimer=undefined;}if(this._sDelayedMenuTimer){q.sap.clearDelayedCall(this._sDelayedMenuTimer);this._sDelayedMenuTimer=undefined;}if(this._sDelayedActionTimer){q.sap.clearDelayedCall(this._sDelayedActionTimer);this._sDelayedActionTimer=undefined;}if(this._sColHdrPosTimer){q.sap.clearDelayedCall(this._sColHdrPosTimer);this._sColHdrPosTimer=undefined;}if(this._visibleRowCountTimer){q.sap.clearDelayedCall(this._visibleRowCountTimer);this._visibleRowCountTimer=undefined;}D.ResizeTrigger.removeListener(this._checkTableSize,this);};D.prototype._getFixedBottomRowContexts=function(B){var f=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();var e;if(f>0&&(v-f)<B.getLength()){e=B.getContexts(B.getLength()-f,f,1);}else{e=[];}return e;};D.prototype._createRows=function(s){var f=this.getFirstVisibleRow();var v=this.getVisibleRowCount();s=s===undefined?f:s;var t=new R(this.getId()+"-rows");var e=this.getColumns();var g=0;for(var i=0,l=e.length;i<l;i++){if(e[i].getVisible()){var o=e[i].getTemplate();if(o){var h=o.clone("col"+i);if(this._bInheritEditableToControls&&!this.getEditable()&&h.setEditable){h.setEditable(false);}h.data("sap-ui-colindex",i);t.addCell(h);this._aIdxCols2Cells[i]=g++;}}}this.destroyAggregation("rows",true);var j;var B=this.getBinding("rows");var k=this.mBindingInfos["rows"];if(B&&v>0){var T=this.getThreshold()?Math.max(this.getVisibleRowCount(),this.getThreshold()):0;var F=this.getFixedBottomRowCount();j=B.getContexts(s,v-F,T);this._setBusy({requestedLength:v-F,receivedLength:j.length,contexts:j});var m=[];m=this._getFixedBottomRowContexts(B);j=j.concat(m);if(F>0&&(v-F)<B.getLength()){this._setBusy({requestedLength:F,receivedLength:m.length,contexts:m});}}for(var i=0;i<v;i++){var h=t.clone("row"+i);if(j&&j[i]){h.setBindingContext(j[i],k.model);h._bHidden=false;}else{if(k){h.setBindingContext(null,k.model);}else{h.setBindingContext(null);}h._bHidden=true;}this.addAggregation("rows",h,true);}t.destroy();};D.prototype._updateHSb=function(){var $=this.$();var i=$.find(".sapUiTableCtrlScroll").width();if(!!sap.ui.Device.browser.safari){i=Math.max(i,this._getColumnsWidth(this.getFixedColumnCount()));}if(i>$.find(".sapUiTableCtrlScr").width()){if(!$.hasClass("sapUiTableHScr")){$.addClass("sapUiTableHScr");if(!!sap.ui.Device.browser.safari){var e=$.find(".sapUiTableCtrlScroll, .sapUiTableColHdrScr > .sapUiTableColHdr");if(this._bjQueryLess18){e.width(i);}else{e.outerWidth(i);}}}var s=$.find(".sapUiTableCtrlFixed").width();if($.find(".sapUiTableRowHdrScr:visible").length>0){s+=$.find(".sapUiTableRowHdrScr").width();}var f=$.find(".sapUiTableHSb");if(this._bRtlMode){f.css('padding-right',s+'px');}else{f.css('padding-left',s+'px');}var m=f.parent().width();f.css('max-width',m+"px");this._oHSb.setContentSize(i+"px");if(this._oHSb.getDomRef()){this._oHSb.rerender();}}else{if($.hasClass("sapUiTableHScr")){$.removeClass("sapUiTableHScr");if(!!sap.ui.Device.browser.safari){$.find(".sapUiTableCtrlScroll, .sapUiTableColHdr").css("width","");}}}this._syncHeaderAndContent();};D.prototype._updateVSb=function(o){var $=this.$();var e=false;var f=false;var B=this.getBinding("rows");if(B){var F=this.getFixedRowCount();if(F>0){var i=$.find('.sapUiTableCtrl.sapUiTableCtrlRowScroll.sapUiTableCtrlScroll')[0].offsetTop;this.$().find('.sapUiTableVSb').css('top',(i-1)+'px');f=true;}var g=this.getFixedBottomRowCount();if(g>0){var h=$.find('.sapUiTableCtrl.sapUiTableCtrlRowScroll.sapUiTableCtrlScroll')[0].offsetHeight;this.$().find('.sapUiTableVSb').css('height',h+'px');f=true;}var s=Math.max(0,(B.getLength()||0)-this.getVisibleRowCount());if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){var n=Math.ceil((B.getLength()||0)/this.getVisibleRowCount());this._oPaginator.setNumberOfPages(n);var p=Math.min(n,Math.ceil((this.getFirstVisibleRow()+1)/this.getVisibleRowCount()));this.setProperty("firstVisibleRow",(Math.max(p,1)-1)*this.getVisibleRowCount(),true);this._oPaginator.setCurrentPage(p);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");}}else{if(s>0){if(!$.hasClass("sapUiTableVScr")){$.addClass("sapUiTableVScr");e=true;}}else{this.setFirstVisibleRow(0);if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");e=true;}}}if(o||f||s!==this._oVSb.getSteps()||this.getFirstVisibleRow()!==this._oVSb.getScrollPosition()){q.sap.clearDelayedCall(this._sScrollBarTimer);this._sScrollBarTimer=q.sap.delayedCall(o?0:250,this,function(){this._oVSb.setSteps(s);if(this._oVSb.getDomRef()){this._oVSb.rerender();}this._oVSb.setScrollPosition(this.getFirstVisibleRow());});}}else{if(this._oPaginator&&this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){this._oPaginator.setNumberOfPages(0);this._oPaginator.setCurrentPage(0);if(this._oPaginator.getDomRef()){this._oPaginator.rerender();}}else{if($.hasClass("sapUiTableVScr")){$.removeClass("sapUiTableVScr");e=true;}}}if(e&&!this._bOnAfterRendering){this._handleResize();}};D.prototype._updateBindingContexts=function(s){var r=this.getRows(),B=this.getBinding("rows"),o=this.mBindingInfos["rows"],f,e,F,i=this.getFixedRowCount(),g=this.getFixedBottomRowCount(),v=this.getVisibleRowCount();if(B){var t;if((i>0||g>0)&&r.length>0){var T=i+g;t=this.getThreshold()?Math.max((this.getVisibleRowCount()-T),this.getThreshold()):0;var h=Math.max(0,r.length-T);e=B.getContexts(this.getFirstVisibleRow()+i,h,t);this._setBusy({requestedLength:h,receivedLength:e.length,contexts:e});if(i>0){f=B.getContexts(0,i);this._setBusy({requestedLength:i,receivedLength:f.length,contexts:f});e=f.concat(e);}var F=this._getFixedBottomRowContexts(B);e=e.concat(F);if(g>0&&(v-g)<B.getLength()){this._setBusy({requestedLength:g,receivedLength:F.length,contexts:F});}}else if(r.length>0){t=this.getThreshold()?Math.max(this.getVisibleRowCount(),this.getThreshold()):0;e=B.getContexts(this.getFirstVisibleRow(),r.length,t);this._setBusy({requestedLength:r.length,receivedLength:e.length,contexts:e});}}if(!s){for(var j=r.length-1;j>=0;j--){var k=e?e[j]:undefined;var l=r[j];if(l){var A=this.getFirstVisibleRow()+j;this._updateRowBindingContext(l,k,o&&o.model,A);}}}};D.prototype._updateRowBindingContext=function(r,o,m,A){var e=r.getCells();var $=r.getDomRefs(true).row;r.setBindingContext(o,m);if(o&&o instanceof sap.ui.model.Context){for(var i=0,l=this._aVisibleColumns.length;i<l;i++){var f=this._aIdxCols2Cells[this._aVisibleColumns[i]];if(e[f]){this._updateCellBindingContext(e[f],o,m,A);}}$.removeClass("sapUiTableRowHidden");r._bHidden=false;}else{$.addClass("sapUiTableRowHidden");$.removeClass('sapUiTableFixedPreBottomRow sapUiTableFixedTopRow');r._bHidden=true;for(var i=0,l=this._aVisibleColumns.length;i<l;i++){var f=this._aIdxCols2Cells[this._aVisibleColumns[i]];if(e[f]){this._updateCellBindingContext(e[f],o,m,A);}}}};D.prototype._updateCellBindingContext=function(o,e,m,A){if(this._bCallUpdateTableCell&&o._updateTableCell){o._updateTableCell(o,e,o.$().closest("td"),A);}if(typeof this._updateTableCell==="function"){this._updateTableCell(o,e,o.$().closest("td"),A);}};D.prototype._hasData=function(){var B=this.getBinding("rows");if(!B||(B.getLength()||0)===0){return false;}return true;};D.prototype._updateNoData=function(){if(this.getShowNoData()){var B=this.getBinding("rows");if(!this._hasData()){if(!this.$().hasClass("sapUiTableEmpty")){this.$().addClass("sapUiTableEmpty");}this.$("ariacount").text(this._oResBundle.getText("TBL_DATA_ROWS",[0]));}else{if(this.$().hasClass("sapUiTableEmpty")){this.$().removeClass("sapUiTableEmpty");}this.$("ariacount").text(this._oResBundle.getText("TBL_DATA_ROWS",[(B.getLength()||0)]));}}};D.prototype._determineVisibleCols=function(){var $=this.$(),t=this;if($.hasClass("sapUiTableHScr")){var r=this._bRtlMode;var s=this._oHSb.getNativeScrollPosition();if(r&&sap.ui.Device.browser.firefox&&s<0){s=s*-1;}var e=s+this._getScrollWidth();if(this._iOldScrollLeft!==s||this._iOldScrollRight!==e||this._bForceVisibleColCalc){var L=r?$.find(".sapUiTableCtrlScroll").width():0;if((sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.firefox)&&r){L=0;}this._aVisibleColumns=[];for(var i=0,l=this.getFixedColumnCount();i<l;i++){this._aVisibleColumns.push(i);}var f=$.find(".sapUiTableCtrl.sapUiTableCtrlScroll .sapUiTableCtrlFirstCol > th[data-sap-ui-headcolindex]");f.each(function(h,E){var w=q(E).width();if(r&&sap.ui.Device.browser.chrome){L-=w;}if(L+w>=s&&L<=e){t._aVisibleColumns.push(parseInt(q(E).data('sap-ui-headcolindex'),10));}if(!r||(sap.ui.Device.browser.internet_explorer||sap.ui.Device.browser.firefox)){L+=w;}});this._iOldScrollLeft=s;this._iOldScrollRight=e;this._bForceVisibleColCalc=false;}}else{this._aVisibleColumns=[];var g=this.getColumns();for(var i=0,l=g.length;i<l;i++){if(g[i].shouldRender()){this._aVisibleColumns.push(i);}}}};D.prototype._enableColumnAutoResizing=function(){var t=this;q.each(this.getColumns(),function(i,o){if(!!o.getAutoResizable()){var $=q.find(".sapUiTableColRsz[data-sap-ui-colindex="+i+"]");if($){t._bindSimulatedDoubleclick($,null,t._onAutomaticColumnResize);}}});};D.prototype.removeColumn=function(o){var r=this.removeAggregation('columns',o);this._bDetermineVisibleCols=true;return r;};D.prototype.addColumn=function(o){var t=this;this.addAggregation('columns',o);o.attachEvent('_widthChanged',function(e){t._bForceVisibleColCalc=true;});this._bDetermineVisibleCols=true;return this;};D.prototype.insertColumn=function(o,i){var t=this;this.insertAggregation('columns',o,i);o.attachEvent('_widthChanged',function(){t._bForceVisibleColCalc=true;});this._bDetermineVisibleCols=true;return this;};D.prototype._getRowCount=function(){var B=this.getBinding("rows");return B?(B.getLength()||0):0;};D.prototype._getSelectableRowCount=function(){return this._getRowCount();};D.prototype._getScrollTop=function(){if(this.$().hasClass("sapUiTableVScr")){return this._oVSb.getScrollPosition()||0;}else{if(this.getNavigationMode()===sap.ui.table.NavigationMode.Paginator){return(((this._oPaginator.getCurrentPage()||1)-1)*this.getVisibleRowCount());}else{return 0;}}};D.prototype._getScrollWidth=function(){return this.$().find(".sapUiTableCtrlScr").width();};D.prototype._getScrollHeight=function(){return this.$().find(".sapUiTableCtrlScr").height();};D.prototype._getVisibleColumns=function(){var e=[];var f=this.getColumns();for(var i=0,l=f.length;i<l;i++){if(f[i].shouldRender()){e.push(f[i]);}}return e;};D.prototype._getVisibleColumnCount=function(){return this._getVisibleColumns().length;};D.prototype._getHeaderRowCount=function(){if(!this.getColumnHeaderVisible()){return 0;}else if(!this._useMultiHeader()){return 1;}var h=0;q.each(this._getVisibleColumns(),function(i,o){h=Math.max(h,o.getMultiLabels().length);});return h;};D.prototype._useMultiHeader=function(){var u=false;q.each(this._getVisibleColumns(),function(i,o){if(o.getMultiLabels().length>0){u=true;return false;}});return u;};D.prototype._getColumnsWidth=function(s,e){var f=this.getColumns();var g=0;if(s!==0&&!s){s=0;}if(e!==0&&!e){e=f.length;}for(var i=s,l=e;i<l;i++){if(f[i]&&f[i].shouldRender()){var w=f[i].getWidth();var W=parseInt(w,10);if(q.sap.endsWith(w,"px")){g+=W;}else{g+=this._iColMinWidth;}}}return g;};D.prototype._handleResize=function(){if(!this.getDomRef()){return;}this._updateHSb();this._updateColumnHeader();this._updateRowHeader();this._handleRowCountMode();};D.prototype._checkTableSize=function(){if(!this.getDomRef()){return;}var p=this.getDomRef().parentNode,h=p.offsetHeight,w=p.offsetWidth;if(p!=this._lastParent||h!=this._lastParentHeight||w!=this._lastParentWidth){this._handleResize();this._lastParent=p;this._lastParentHeight=h;this._lastParentWidth=w;if(this.getBinding("rows")){this.updateRows();}}};D.prototype._handleRowCountMode=function(){if(this.getVisibleRowCountMode()==sap.ui.table.VisibleRowCountMode.Auto){var i=this.$().parent().height();var r=this._calculateRowsToDisplay(i);if(isNaN(r)){return;}var t=this;this._visibleRowCountTimer=setTimeout(function(){t.setVisibleRowCount(r);},0);}};D.prototype._updateRowHeader=function(){if(this.getFixedRowCount()>=0||this.getFixedColumnCount()>=0||this.getRowHeight()<=0){var $=this.$();var e=$.find(".sapUiTableCtrlFixed > tbody > tr");var f=$.find(".sapUiTableCtrlScroll > tbody > tr");var g=$.find(".sapUiTableRowHdr");if(this.getFixedColumnCount()>0&&!this.getRowHeight()){e.css('height','');f.css('height','');}for(var i=0,l=f.length;i<l;i++){var h=Math.max(e[i]?(e[i].getBoundingClientRect().bottom-e[i].getBoundingClientRect().top):0,f[i]?(f[i].getBoundingClientRect().bottom-f[i].getBoundingClientRect().top):0);if(this._bjQueryLess18){q(g[i]).height(h);if(this.getFixedColumnCount()>0&&!this.getRowHeight()){q(e[i]).height(h);q(f[i]).height(h);}}else{q(g[i]).outerHeight(h);if(this.getFixedColumnCount()>0&&!this.getRowHeight()){q(e[i]).outerHeight(h);q(f[i]).outerHeight(h);}}}}};D.prototype._syncColumnHeaders=function(u){var $=this.$();var r=this.getDomRef().getBoundingClientRect();var t=r.right-r.left;var v=this._getVisibleColumns();var e=0;var f=this._bRtlMode;var l=f?"99000px":"-99000px";var g=$.find(".sapUiTableColHdr");var h=$.find(".sapUiTableCtrlFirstCol > th");var H=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(H){var o=h.get(0);e=o.getBoundingClientRect().right-o.getBoundingClientRect().left;h=h.not(":nth-child(1)");}var m={};h.each(function(z,E){var A=E.getAttribute("data-sap-ui-headcolindex");var B=E.getBoundingClientRect();var T;var V=v[z];if(V){T=B.right-B.left;}if(z==0){T+=e;}var F=v[z]?v[z].getHeaderSpan():1,G=[],J;if(F){if(!q.isArray(F)){F=[F];}q.each(F,function(N,Q){F[N]=Math.max((Q+z>v.length)?Math.min(Q,v.length-z):Q,1);});J=F;}else{J=[1];}for(var i=0;i<J.length;i++){G[i]={width:T,span:1};for(var j=1;j<J[i];j++){var K=h[z+j];var L=K.getBoundingClientRect();if(K){G[i].width+=L.right-L.left;G[i].span=J[i];}}}var M=document.getElementById(V.getId()+"-rsz");m[A]={domRefColumnTh:E,domRefColumnDivs:[],domRefColumnResizer:M,domRefColumnResizerPosition:undefined,rect:B,aHeaderData:G};});var k=g.find(".sapUiTableCol");k.each(function(j,E){var z=parseInt(E.getAttribute("data-sap-ui-colindex"),10);var A=m[z];A.domRefColumnDivs.push(E);var B=0;if(A){if(!f){B=A.rect.right-r.left;}else{B=A.rect.left-r.left;}}if(!B||B<=0||B>=t){B=l;}A.domRefColumnResizerPosition=B;});q.each(m,function(j,z){for(var i=0;i<z.domRefColumnDivs.length;i++){var A=z.aHeaderData[0];if(z.aHeaderData[i]){A=z.aHeaderData[i];}z.domRefColumnDivs[i].style.width=A.width+"px";z.domRefColumnDivs[i].setAttribute("data-sap-ui-colspan",A.span);if(z.domRefColumnResizer){z.domRefColumnResizer.style.left=z.domRefColumnResizerPosition+"px";}}});var n=this._getHeaderRowCount();var p=this.getColumnHeaderHeight()>0;if(!p&&!u){var s=$.find(".sapUiTableColHdrCnt,.sapUiTableColRowHdr");var w=k.length;for(var i=0;i<w;i++){k[i].style.height='auto';}s.height("auto");var x=Math.max(g.height(),s.height());var y=x/n;if(this._bjQueryLess18){k.height(y);s.height(x);}else{k.outerHeight(y);s.outerHeight(x);}}};D.prototype._updateColumnHeader=function(u){if(this._sColHdrPosTimer){q.sap.clearDelayedCall(this._sColHdrPosTimer);}if(this._bOnAfterRendering){this._syncColumnHeaders.apply(this,arguments);}else{this._sColHdrPosTimer=q.sap.delayedCall(150,this,this._syncColumnHeaders,arguments);}};D.prototype._disableTextSelection=function(e){q(e||document.body).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).bind("selectstart",function(E){E.preventDefault();return false;});};D.prototype._enableTextSelection=function(e){q(e||document.body).attr("unselectable","off").css({"-moz-user-select":"","-webkit-user-select":"","user-select":""}).unbind("selectstart");};D.prototype._clearTextSelection=function(){if(window.getSelection){if(window.getSelection().empty){window.getSelection().empty();}else if(window.getSelection().removeAllRanges){window.getSelection().removeAllRanges();}}else if(document.selection&&document.selection.empty){try{document.selection.empty();}catch(e){}}};D.prototype.onvscroll=function(e){this._leaveActionMode();this.setFirstVisibleRow(this._getScrollTop(),true);};D.prototype._syncHeaderAndContent=function(){if(!this._bSyncScrollLeft){this._bSyncScrollLeft=true;var $=this.$();var s=this._oHSb.getNativeScrollPosition();$.find(".sapUiTableCtrlScr").scrollLeft(s);if(!!sap.ui.Device.browser.webkit&&this._bRtlMode){var o=$.find(".sapUiTableColHdrScr").get(0);s=o.scrollWidth-o.clientWidth-this._oHSb.getScrollPosition();}$.find(".sapUiTableColHdrScr").scrollLeft(s);this._bSyncScrollLeft=false;}};D.prototype.onhscroll=function(e){if(!this._bOnAfterRendering){this._syncHeaderAndContent();this._updateColumnHeader(true);if(this.getBinding("rows")){this.updateRows();}}};D.prototype._oncolscroll=function(e){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableColHdrScr");if(!!sap.ui.Device.browser.webkit&&this._bRtlMode){var s=this.$().find(".sapUiTableColHdrScr").get(0);this._oHSb.setScrollPosition(s.scrollWidth-s.clientWidth-$.scrollLeft());}else{this._oHSb.setNativeScrollPosition($.scrollLeft());}}};D.prototype._oncntscroll=function(e){if(!this._bSyncScrollLeft){var $=this.$().find(".sapUiTableCtrlScr");this._oHSb.setNativeScrollPosition($.scrollLeft());}};D.prototype.onmousedown=function(e){var l=e.button===0;var i=this._isTouchMode(e);if(l){var $=q(e.target);var f=this.$("sb");if(e.target==f[0]){q(document.body).bind("selectstart",q.proxy(this._splitterSelectStart,this));var o=f.offset();var h=f.height();var w=f.width();q(document.body).append("<div id=\""+this.getId()+"-ghost\" class=\"sapUiHSBGhost\" style =\" height:"+h+"px; width:"+w+"px; left:"+o.left+"px; top:"+o.top+"px\" ></div>");f.append("<div id=\""+this.getId()+"-overlay\" style =\"left: 0px;"+" right: 0px; bottom: 0px; top: 0px; position:absolute\" ></div>");var g=q(document);if(i){g.bind("touchend",q.proxy(this._onGhostMouseRelease,this));g.bind("touchmove",q.proxy(this._onGhostMouseMove,this));}else{g.bind("mouseup",q.proxy(this._onGhostMouseRelease,this));g.bind("mousemove",q.proxy(this._onGhostMouseMove,this));}this._disableTextSelection();return;}var j=$.closest(".sapUiTableCol");if(j.length===1){this._bShowMenu=true;this._sDelayedMenuTimer=q.sap.delayedCall(200,this,function(){this._bShowMenu=false;});var k=this._isTouchMode(e)&&($.hasClass("sapUiTableColDropDown")||$.hasClass("sapUiTableColResizer"));if(this.getEnableColumnReordering()&&!k){var m=parseInt(j.attr("data-sap-ui-colindex"),10);if(m>this._iLastFixedColIndex){var n=this.getColumns()[m];this._sDelayedActionTimer=q.sap.delayedCall(200,this,function(){this._onColumnMoveStart(n,i);});}}}var p=!!(e.metaKey||e.ctrlKey);if(!!sap.ui.Device.browser.firefox&&p){e.preventDefault();}}};D.prototype.onmouseup=function(e){q.sap.clearDelayedCall(this._sDelayedActionTimer);if(this.$().find(".sapUiTableCtrl td :focus").length>0){this._enterActionMode(this.$().find(".sapUiTableCtrl td :focus"));}else{this._leaveActionMode(e);}};D.prototype.onclick=function(e){if(q(e.target).hasClass("sapUiTableGroupIcon")){this._onGroupSelect(e);}else if(q(e.target).hasClass("sapUiTableTreeIcon")){this._onNodeSelect(e);}else{q.sap.clearDelayedCall(this._sDelayedActionTimer);if(!this._findAndfireCellEvent(this.fireCellClick,e)){this._onSelect(e);}else{e.preventDefault();}}};D.prototype.oncontextmenu=function(e){var t=q(e.target);var h=t.closest('.sapUiTableCol');if(h.length>0){var o=sap.ui.getCore().byId(h.attr("data-sap-ui-colid"));if(o){o._openMenu(h[0]);}e.preventDefault();}else{if(this._findAndfireCellEvent(this.fireCellContextmenu,e,this._oncellcontextmenu)){e.preventDefault();}}};D.prototype._oncellcontextmenu=function(p){if(this.getEnableCellFilter()){if(!this._oContextMenu){q.sap.require("sap.ui.unified.Menu");q.sap.require("sap.ui.unified.MenuItem");this._oContextMenu=new sap.ui.unified.Menu(this.getId()+"-contextmenu");this.addDependent(this._oContextMenu);}var o=this._getVisibleColumns()[p.columnIndex];var s=o.getFilterProperty();if(s&&o.getShowFilterMenuEntry()){this._oContextMenu.destroyItems();this._oContextMenu.addItem(new sap.ui.unified.MenuItem({text:this._oResBundle.getText("TBL_FILTER"),select:[function(){var f=this.getContextByIndex(p.rowIndex);var v=f.getProperty(s);this.filter(o,v);},this]}));var e=sap.ui.core.Popup.Dock;this._oContextMenu.open(false,p.cellDomRef,e.BeginTop,e.BeginBottom,p.cellDomRef,"none none");return true;}}};D.prototype._bindSimulatedDoubleclick=function(e,f,g){var h="click";var t=this;if(!!sap.ui.Device.support.touch){h="touchend";}q(e).on(h,function(E){E.preventDefault();E.stopPropagation();t._clicksRegistered=t._clicksRegistered+1;if(t._clicksRegistered<2){t._singleClickTimer=q.sap.delayedCall(t._doubleclickDelay,t,function(){t._clicksRegistered=0;if(f){f.call(t,E);}},[E]);}else{q.sap.clearDelayedCall(t._singleClickTimer);t._clicksRegistered=0;g.call(t,E);}});};D.prototype._findAndfireCellEvent=function(f,e,g){var $=q(e.target);var h=$.closest("td[role='gridcell']");var i=h.attr("id");var m=/.*-row(\d*)-col(\d*)/i.exec(i);var j=false;if(m){var r=m[1];var k=m[2];var o=this.getRows()[r];var l=o&&o.getCells()[k];var n=o&&o.getIndex();var p={rowIndex:n,columnIndex:k,cellControl:l};j=!f.call(this,p);if(!j&&typeof g==="function"){p.cellDomRef=h[0];j=g.call(this,p);}}return j;};D.prototype.onfocusin=function(e){var $=q(e.target);var n=this.$().hasClass("sapUiTableEmpty");var f=$.hasClass("sapUiTableCtrlBefore");this._updateAriaRowOfRowsText();if(!this._bIgnoreFocusIn&&(f||$.hasClass("sapUiTableCtrlAfter"))){this.$("ariadesc").text(this._oResBundle.getText("TBL_TABLE"));this._leaveActionMode();if(q.contains(this.$().find('.sapUiTableColHdrCnt')[0],e.target)){q(this._oItemNavigation.getFocusedDomRef()||this._oItemNavigation.getRootDomRef()).focus();}else{if(f){if(n){this._bIgnoreFocusIn=true;this.$().find(".sapUiTableCtrlEmpty").focus();this._bIgnoreFocusIn=false;}else{this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex()%this._oItemNavigation.iColumns,e);}}else{this._oItemNavigation.focusItem((this._oItemNavigation.getFocusedIndex()%this._oItemNavigation.iColumns)+(this._oItemNavigation.iColumns*this._iLastSelectedDataRow),e);}}if(!n){e.preventDefault();}}else if(q.sap.endsWith(e.target.id,"-rsz")){e.preventDefault();e.stopPropagation();}};D.prototype._getAbsoluteRowIndex=function(r){var i=0;var f=this.getFirstVisibleRow();var F=this.getFixedBottomRowCount();var v=this.getVisibleRowCount();var e=v-F;if(F>0&&r>=e){i=this.getBinding().getLength()-v+r;}else{i=f+r;}return i;};D.prototype._onSelect=function(e){var $=q(e.target);var s=e.shiftKey;var f=!!(e.metaKey||e.ctrlKey);var g=$.closest(".sapUiTableCol");if(this._bShowMenu&&g.length===1){var i=parseInt(g.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[i];if($.hasClass("sapUiTableColDropDown")){var E=this.fireColumnSelect({column:o});if(E){o._openMenu(g[0]);}}else{this._onColumnSelect(o,g[0],this._isTouchMode(e));}return;}var h=$.closest(".sapUiTableRowHdr");if(h.length===1){var i=parseInt(h.attr("data-sap-ui-rowindex"),10);this._onRowSelect(this._getAbsoluteRowIndex(i),s,f);return;}if((this.getSelectionBehavior()===sap.ui.table.SelectionBehavior.Row||this.getSelectionBehavior()===sap.ui.table.SelectionBehavior.RowOnly)){var h=$.closest(".sapUiTableCtrl > tbody > tr");if(h.length===1){var i=parseInt(h.attr("data-sap-ui-rowindex"),10);this._onRowSelect(this._getAbsoluteRowIndex(i),s,f);return;}}if(q.sap.containsOrEquals(this.getDomRef("selall"),e.target)){this._toggleSelectAll();return;}};D.prototype._isRowSelectable=function(r){return true;};D.prototype._onRowSelect=function(r,s,e){if(!!sap.ui.Device.browser.internet_explorer&&s){this._clearTextSelection();}var B=this.getBinding("rows");if(!B){return;}if(r<0||r>=(B.getLength()||0)){return;}if(!this._isRowSelectable(r)){return;}this._iSourceRowIndex=r;var o=this.getSelectionMode();if(o!==sap.ui.table.SelectionMode.None){if(o===sap.ui.table.SelectionMode.Single){if(!this.isIndexSelected(r)){this.setSelectedIndex(r);}else{this.clearSelection();}}else{if(o===sap.ui.table.SelectionMode.MultiToggle){e=true;}if(s){var i=this.getSelectedIndex();if(i>=0){this.addSelectionInterval(i,r);}else{this.setSelectedIndex(r);}}else{if(!this.isIndexSelected(r)){if(e){this.addSelectionInterval(r,r);}else{this.setSelectedIndex(r);}}else{if(e){this.removeSelectionInterval(r,r);}else{if(this.getSelectedIndices().length===1){this.clearSelection();}else{this.setSelectedIndex(r);}}}}}}this._iSourceRowIndex=undefined;};D.prototype._onColumnSelect=function(o,e,i){if(i){var $=q(e);var f=$.find(".sapUiTableColCell");if($.find(".sapUiTableColCellMenu").length<1){f.hide();var s="";if(o._menuHasItems()){s="<div class='sapUiTableColDropDown'></div>";}var g="";if(o.getResizable()){g="<div class='sapUiTableColResizer''></div>";}var h=q("<div class='sapUiTableColCellMenu'>"+s+g+"</div>");$.append(h);$.bind("focusout",function(){this.cell.show();this.menu.remove();this.self.unbind("focusout");}.bind({cell:f,menu:h,self:$}));if(o.getResizable()){$.find(".sapUiTableColResizer").bind("touchstart",q.proxy(this._onColumnResizeStart,this));}}return;}var E=this.fireColumnSelect({column:o});if(E){o._openMenu(e);}};D.prototype._onColumnMoveStart=function(o,i){this._disableTextSelection();var $=o.$();var e=parseInt($.attr("data-sap-ui-colindex"),10);if(e<this.getFixedColumnCount()){return;}this.$().addClass("sapUiTableDragDrop");this._$colGhost=$.clone().removeAttr("id");$.css({"opacity":".25"});this._$colGhost.addClass("sapUiTableColGhost").css({"left":-10000,"top":-10000,"position":"absolute","z-index":this.$().zIndex()+10});this.$().find(".sapUiTableCol").each(function(g,E){var $=q(this);$.css({position:"relative"});$.data("pos",{left:$.position().left,center:$.position().left+$.outerWidth()/2,right:$.position().left+$.outerWidth()});});this._$colGhost.appendTo(document.body);var f=q(document.body);if(i){f.bind("touchmove",q.proxy(this._onColumnMove,this));f.bind("touchend",q.proxy(this._onColumnMoved,this));}else{f.mousemove(q.proxy(this._onColumnMove,this));f.mouseup(q.proxy(this._onColumnMoved,this));}};D.prototype._onColumnMove=function(e){var $=this.$();var l=e.pageX;var L=e.pageY;if(e&&this._isTouchMode(e)){l=e.targetTouches[0].pageX;L=e.targetTouches[0].pageY;e.stopPropagation();e.preventDefault();}var r=this._bRtlMode;var i=l-$.offset().left;var f=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var g=this.getColumns()[f].$();var o=this._iNewColPos;this._iNewColPos=f;var t=this;$.find(".sapUiTableCol").each(function(h,j){var k=q(j);var m=parseInt(k.attr("data-sap-ui-colindex"),10);var H=sap.ui.getCore().byId(k.attr("data-sap-ui-colid")).getHeaderSpan();var s;if(H){if(q.isArray(H)){s=H[0];}else{s=H;}}else{s=1;}if(k.get(0)!==g.get(0)){var p=k.data("pos");var B=i>=p.left&&i<=p.center;var A=i>=p.center&&i<=p.right;if(!r){if(B){t._iNewColPos=m;}else if(A){t._iNewColPos=m+s;}else{t._iNewColPos=t._iNewColPos;}}else{if(A){t._iNewColPos=m;}else if(B){t._iNewColPos=m+s;}else{t._iNewColPos=t._iNewColPos;}}if((B||A)&&m>f){t._iNewColPos--;}}});if(this._iNewColPos<=this._iLastFixedColIndex){this._iNewColPos=o;}if(this._iNewColPos<this.getFixedColumnCount()){this._iNewColPos=o;}this._animateColumnMove(f,o,this._iNewColPos);this._$colGhost.css({"left":l+5,"top":L+5});};D.prototype._animateColumnMove=function(e,o,n){var r=this._bRtlMode;var $=this.getColumns()[e].$();if(o!==n){for(var i=Math.min(o,n),l=Math.max(o,n);i<=l;i++){var f=this.getColumns()[i];if(i!==e&&f.getVisible()){f.$().stop(true,true).animate({left:"0px"});}}var g=0;if(n<e){for(var i=n;i<e;i++){var f=this.getColumns()[i];if(f.getVisible()){var h=f.$();g-=h.outerWidth();h.stop(true,true).animate({left:$.outerWidth()*(r?-1:1)+"px"});}}}else{for(var i=e+1,l=n+1;i<l;i++){var f=this.getColumns()[i];if(f.getVisible()){var h=f.$();g+=h.outerWidth();h.stop(true,true).animate({left:$.outerWidth()*(r?1:-1)+"px"});}}}$.stop(true,true).animate({left:g*(r?-1:1)+"px"});}};D.prototype._onColumnMoved=function(e){this.$().removeClass("sapUiTableDragDrop");var f=parseInt(this._$colGhost.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[f];var B=q(document.body);B.unbind("touchmove",this._onColumnMove);B.unbind("touchend",this._onColumnMoved);B.unbind("mousemove",this._onColumnMove);B.unbind("mouseup",this._onColumnMoved);this._$colGhost.remove();this._$colGhost=undefined;this._enableTextSelection();var E=this.fireColumnMove({column:o,newPos:this._iNewColPos});var m=f<this._iNewColPos;if(E&&this._iNewColPos!==undefined&&this._iNewColPos!==f){this.removeColumn(o);this.insertColumn(o,this._iNewColPos);var h=o.getHeaderSpan(),s;if(h){if(q.isArray(h)){s=h[0];}else{s=h;}}else{s=1;}if(s>1){if(!m){this._iNewColPos++;}for(var i=1;i<s;i++){var g=this.getColumns()[m?f:f+i];this.removeColumn(g);this.insertColumn(g,this._iNewColPos);this.fireColumnMove({column:g,newPos:this._iNewColPos});if(!m){this._iNewColPos++;}}}this._oColHdrItemNav.setFocusedIndex(this._iNewColPos);}else{this._animateColumnMove(f,this._iNewColPos,f);o.$().css({"backgroundColor":"","backgroundImage":"","opacity":""});}setTimeout(function(){var j=this._oItemNavigation.getFocusedIndex();this._oItemNavigation.focusItem(0,e);this._oItemNavigation.focusItem(j,e);}.bind(this),0);delete this._iNewColPos;};D.prototype._onAutomaticColumnResize=function(e){var i,o,h,m,f=1,r=false;q.sap.log.debug("doubleclick fired");this._disableTextSelection();this._$colResize=q(e.target);this._$colResize.addClass("sapUiTableColRszActive");var p=parseInt(this._$colResize.prevAll(".sapUiTableCol").first().attr("data-sap-ui-colindex"),10);i=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);if(p!=i){r=true;}if(r){o=this.getColumns()[p];h=o.getHeaderSpan();if(h instanceof Array){m=Math.max.apply(Math,h);}else if(!!h){m=h;}if(i+h-1!=p){f=m;i=p+m;}}if(f>1){while(i>p){i--;this.autoResizeColumn(i);}}else{this.autoResizeColumn(i);}e.preventDefault();e.stopPropagation();};D.prototype._getResizerIdForColumn=function(i,e){if(e>0){e--;}var o=this.getColumns()[this._aIdxCols2Cells[i+e]];return o.getId()+"-rsz";};D.prototype._onColumnResizeStart=function(e){if(this._isTouchMode(e)){this._iColumnResizeStart=e.targetTouches[0].pageX;this._disableTextSelection();var $=q(e.target).closest(".sapUiTableCol");var i=parseInt($.attr("data-sap-ui-colindex"),10);var f=$.attr("data-sap-ui-colspan");var r=this._getResizerIdForColumn(i,f);this._$colResize=q.sap.byId(r);q(document.body).bind("touchmove",q.proxy(this._onColumnResize,this));q(document.body).bind("touchend",q.proxy(this._onColumnResized,this));return;}var l=e.button===0;if(l){this._iColumnResizeStart=e.pageX;this._disableTextSelection();this._$colResize=q(e.target);q(document.body).mousemove(q.proxy(this._onColumnResize,this)).mouseup(q.proxy(this._onColumnResized,this));}};D.prototype._onColumnResize=function(e){var l;if(this._isTouchMode(e)){l=e.targetTouches[0].pageX;e.stopPropagation();e.preventDefault();}else{l=e.pageX;}if(this._iColumnResizeStart&&l<this._iColumnResizeStart+3&&l>this._iColumnResizeStart-3){return;}if(this._isTouchMode(e)){this._$colResize.addClass("sapUiTableColTouchRszActive");}else{this._$colResize.addClass("sapUiTableColRszActive");}var $=this.$();var r=this._bRtlMode;var i=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);var o=this.getColumns()[i];var f=$.find(".sapUiTableCtrlFirstCol > th[data-sap-ui-headcolindex='"+i+"']");var g=f.position().left;var w;if(!r){if(this.getFixedColumnCount()>0&&i>=this.getFixedColumnCount()){var F=$.find(".sapUiTableColHdrFixed").width();g=g+F;g=g-$.find(".sapUiTableCtrlScr").scrollLeft();}var h=$.find(".sapUiTableCtrlFirstCol > th:first").offset().left;var j=l-h;w=j-g;}else{var s;if(this.getFixedColumnCount()>0&&i<this.getFixedColumnCount()){s=$.find('.sapUiTableCtrlScrFixed');}else{s=$.find('.sapUiTableCtrlScr');}var k=s.scrollLeft();if(sap.ui.Device.browser.internet_explorer){k=s[0].scrollWidth-k-s[0].clientWidth;}else if(sap.ui.Device.browser.firefox){k=k+s[0].scrollWidth-s[0].clientWidth;}var m=g-k-l+s.offset().left;w=f.outerWidth()+m;}w=Math.max(w,this._iColMinWidth);var n=$.find(".sapUiTableCnt").offset().left;var p=l-n;p-=this._$colResize.width()/2;this._$colResize.css("left",p);o._iNewWidth=w;};D.prototype._onColumnResized=function(e,i){var f;if(!this._$colResize&&(i===null||i===undefined)){return;}if(i===null||i===undefined){f=parseInt(this._$colResize.attr("data-sap-ui-colindex"),10);}else{f=i;}var o=this.getColumns()[f];var r=false;if(o._iNewWidth){var w;var A=this.$().find(".sapUiTableCtrl").width();if(!this._checkPercentageColumnWidth()){w=o._iNewWidth+"px";}else{var g=Math.round(100/A*o._iNewWidth);w=g+"%";}this._updateColumnWidth(o,w);this._resizeDependentColumns(o,w);delete o._iNewWidth;r=true;}var B=q(document.body);B.unbind("touchmove",this._onColumnResize);B.unbind("touchend",this._onColumnResized);B.unbind("mousemove",this._onColumnResize);B.unbind("mouseup",this._onColumnResized);o.focus();if(this._$colResize){this._$colResize.removeClass("sapUiTableColTouchRszActive sapUiTableColRszActive");this._$colResize=undefined;}this._enableTextSelection();if(r){this.invalidate();}};D.prototype._resizeDependentColumns=function(o,w){if(this._checkPercentageColumnWidth()){var v=this._getVisibleColumns();var e;q.each(v,function(u,x){if(o===x){e=u;}});var f=0;var l=v.length-1;var t;if(e===undefined){t=0;}else{t=parseInt(w,10);}var p=0;var g=[];var h=this;q.each(v,function(u,x){var y=h._getColumnPercentageWidth(x);if((((e===l&&u<e)||((e!==l)&&u>e))&&x.getFlexible())||e===undefined){f+=x.$().outerWidth();p+=y;g.push(x);}else if(u!==e){t+=y;}});var j=t;q.each(g,function(u,x){var y=h._getColumnPercentageWidth(x);var N=Math.round((100-j)/p*y);if(u===g.length-1){N=100-t;}else{t+=N;}h._updateColumnWidth(x,N+"%");});}else if(!this._hasOnlyFixColumnWidths()){var v=this._getVisibleColumns(),A=this.$().find(".sapUiTableCtrl").width(),e,r=0,L=0,k=0,n=0;q.each(v,function(u,x){if(!q.sap.endsWith(x.getWidth(),"px")){n++;return false;}if(e!=undefined){k+=parseInt(x.getWidth(),10);r++;}else if(o!==x){L+=parseInt(x.getWidth(),10);}if(o===x){e=u;L+=parseInt(w,10);}});if(n>0||(L+k>A)){return;}A-=L;for(var i=e+1;i<v.length;i++){var o=v[i],m=parseInt(o.getWidth(),10),s=m/k*100,N=A/100*s;this._updateColumnWidth(o,Math.round(N)+'px');}}};D.prototype._getColumnPercentageWidth=function(o){var s=o.getWidth();var i=parseInt(o.getWidth(),10);var t=this.$().find(".sapUiTableCtrl").width();if(q.sap.endsWith(s,"px")){i=Math.round(100/t*i);}else if(!q.sap.endsWith(s,"%")){i=Math.round(100/t*o.$().width());}return i;};D.prototype._updateColumnWidth=function(o,w){var e=this.fireColumnResize({column:o,width:w});if(e){o.setProperty("width",w,true);this.$().find('th[aria-owns="'+o.getId()+'"]').css('width',w);}};D.prototype._checkPercentageColumnWidth=function(){var e=this.getColumns();var h=false;q.each(e,function(i,o){if(q.sap.endsWith(o.getWidth(),"%")){h=true;return false;}});return h;};D.prototype._hasOnlyFixColumnWidths=function(){var o=true;q.each(this.getColumns(),function(i,e){var w=e.getWidth();if(e.getFlexible()||!w||w.substr(-2)!=="px"){o=false;return false;}});return o;};D.prototype.sort=function(o,s,A){if(q.inArray(o,this.getColumns())>=0){o.sort(s===sap.ui.table.SortOrder.Descending,A);}return this;};D.prototype.filter=function(o,v){if(q.inArray(o,this.getColumns())>=0){o.filter(v);}return this;};D.prototype._getSelectOnCellsAllowed=function(){var s=this.getSelectionBehavior();var e=this.getSelectionMode();return e!==sap.ui.table.SelectionMode.None&&(s===sap.ui.table.SelectionBehavior.Row||s===sap.ui.table.SelectionBehavior.RowOnly);};D.prototype._getAriaTextsForSelectionMode=function(e,s){if(!s){s=this.getSelectionMode();}var r=this._oResBundle;var t={mouse:{rowSelect:"",rowDeselect:""},keyboard:{rowSelect:"",rowDeselect:""}};if(s===sap.ui.table.SelectionMode.Single){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");}else if(s===sap.ui.table.SelectionMode.Multi){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT_MULTI");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT_MULTI");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_MULTI_KEY");if(e===true){if(this.getSelectedIndices().length===1){t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");}else if(this.getSelectedIndices().length===0){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");}}}else if(s===sap.ui.table.SelectionMode.MultiToggle){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_TOGGLE");t.mouse.rowDeselect=r.getText("TBL_ROW_DESELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_MULTI_TOGGLE_KEY");t.keyboard.rowDeselect=r.getText("TBL_ROW_DESELECT_KEY");if(e===true&&this.getSelectedIndices().length===0){t.mouse.rowSelect=r.getText("TBL_ROW_SELECT");t.keyboard.rowSelect=r.getText("TBL_ROW_SELECT_KEY");}}return t;};D.prototype._updateSelection=function(){if(this.getSelectionMode()===sap.ui.table.SelectionMode.None){return;}var t=this._getAriaTextsForSelectionMode(true);var s=this._getSelectOnCellsAllowed();var r=this.getRows();for(var i=0;i<r.length;i++){var o=r[i];o._updateSelection(this,t,s);}this.setProperty("selectedIndex",this.getSelectedIndex(),true);};D.prototype._onSelectionChanged=function(e){var r=e.getParameter("rowIndices");var i=this._iSourceRowIndex!==undefined?this._iSourceRowIndex:this.getSelectedIndex();this._updateSelection();var s=this.getSelectionMode();if(s==="Multi"||s==="MultiToggle"){this.$("selall").attr('title',this._oResBundle.getText("TBL_SELECT_ALL")).addClass("sapUiTableSelAll");}this.fireRowSelectionChange({rowIndex:i,rowContext:this.getContextByIndex(i),rowIndices:r});};D.prototype.getContextByIndex=function(i){var B=this.getBinding("rows");return i>=0&&B?B.getContexts(i,1)[0]:null;};D.prototype.getSelectedIndex=function(){var B=this.getBinding("rows");if(B&&B.findNode){return B.getSelectedIndex();}else{return this._oSelection.getLeadSelectedIndex();}};D.prototype.setSelectedIndex=function(i){if(i===-1){this.clearSelection();}var B=this.getBinding("rows");if(B&&B.findNode&&B.setNodeSelection){B.setSelectedIndex(i);}else{this._oSelection.setSelectionInterval(i,i);}return this;};D.prototype.clearSelection=function(){var B=this.getBinding("rows");if(B&&B.clearSelection){B.clearSelection();}else{this._oSelection.clearSelection();}return this;};D.prototype.selectAll=function(){var s=this.getSelectionMode();if(!this.getEnableSelectAll()||(s!="Multi"&&s!="MultiToggle")){return this;}var B=this.getBinding("rows");if(B){if(B.selectAll){B.selectAll();this.$("selall").attr('title',this._oResBundle.getText("TBL_DESELECT_ALL")).removeClass("sapUiTableSelAll");}else{this._oSelection.setSelectionInterval(0,(B.getLength()||0)-1);this.$("selall").attr('title',this._oResBundle.getText("TBL_DESELECT_ALL")).removeClass("sapUiTableSelAll");}}return this;};D.prototype.getSelectedIndices=function(){var B=this.getBinding("rows");if(B&&B.findNode&&B.getSelectedIndices){return B.getSelectedIndices();}else{return this._oSelection.getSelectedIndices();}};D.prototype.addSelectionInterval=function(i,e){var B=this.getBinding("rows");if(B&&B.findNode&&B.addSelectionInterval){B.addSelectionInterval(i,e);}else{this._oSelection.addSelectionInterval(i,e);}return this;};D.prototype.setSelectionInterval=function(i,e){var B=this.getBinding("rows");if(B&&B.findNode&&B.setSelectionInterval){B.setSelectionInterval(i,e);}else{this._oSelection.setSelectionInterval(i,e);}return this;};D.prototype.removeSelectionInterval=function(i,e){var B=this.getBinding("rows");if(B&&B.findNode&&B.removeSelectionInterval){B.removeSelectionInterval(i,e);}else{this._oSelection.removeSelectionInterval(i,e);}return this;};D.prototype.isIndexSelected=function(i){var B=this.getBinding("rows");if(B&&B.isIndexSelected){return B.isIndexSelected(i);}else{return this._oSelection.isSelectedIndex(i);}};D.prototype.isExpanded=function(r){var B=this.getBinding("rows");if(B){return B.isExpanded(r);}return false;};D.prototype.expandToLevel=function(l){var B=this.getBinding("rows");if(B&&B.expandToLevel){B.expandToLevel(l);}return this;};D.prototype.collapseAll=function(){var B=this.getBinding("rows");if(B){B.collapseToLevel(0);this.setFirstVisibleRow(0);}return this;};D.prototype.expand=function(r){var B=this.getBinding("rows");if(B){B.expand(r);}return this;};D.prototype.collapse=function(r){var B=this.getBinding("rows");if(B){B.collapse(r);}return this;};D.prototype._onGroupSelect=function(e){var $=q(e.target).parents("[data-sap-ui-rowindex]");if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var o=this.getContextByIndex(r);if(this.getBinding().isExpanded(r)){q(e.target).removeClass("sapUiTableGroupIconOpen").addClass("sapUiTableGroupIconClosed");}else{q(e.target).removeClass("sapUiTableGroupIconClosed").addClass("sapUiTableGroupIconOpen");}this.fireToggleOpenState({rowIndex:r,rowContext:o,expanded:!this.getBinding().isExpanded(r)});this.getBinding("rows").toggleIndex(r);}e.preventDefault();e.stopPropagation();};D.prototype._onNodeSelect=function(e){var $=q(e.target).parents("tr");if($.length>0){var r=this.getFirstVisibleRow()+parseInt($.attr("data-sap-ui-rowindex"),10);var o=this.getContextByIndex(r);this.fireToggleOpenState({rowIndex:r,rowContext:o,expanded:!this.getBinding().isExpanded(r)});this.getBinding("rows").toggleIndex(r);}e.preventDefault();e.stopPropagation();};D.prototype._updateExpandIcon=function($,o,A){var B=this.getBinding("rows");if(B){var l=0,i=false;if(B.getLevel){l=B.getLevel(o);i=B.isExpanded(A);}else if(B.findNode){var n=B.findNode(A);l=n?n.level:0;i=n&&n.nodeState?n.nodeState.expanded:false;}var t=$.find(".sapUiTableTreeIcon");var T="sapUiTableTreeIconLeaf";var f=$.children("td.sapUiTableTdFirst");if(!this.getUseGroupMode()){t.css("marginLeft",l*17);}if(B.hasChildren&&B.hasChildren(o)){T=i?"sapUiTableTreeIconNodeOpen":"sapUiTableTreeIconNodeClosed";f.attr('aria-expanded',i);var N=i?this._oResBundle.getText("TBL_COLLAPSE"):this._oResBundle.getText("TBL_EXPAND");t.attr('title',N);}else{f.attr('aria-expanded',false);t.attr('aria-label',this._oResBundle.getText("TBL_LEAF"));}t.removeClass("sapUiTableTreeIconLeaf sapUiTableTreeIconNodeOpen sapUiTableTreeIconNodeClosed").addClass(T);$.attr("data-sap-ui-level",l);f.attr('aria-level',l+1);}};D.prototype._updateTableCell=function(){return true;};D.prototype.isTreeBinding=function(n){n=n||"rows";if(n==="rows"){return this.getHierarchical();}return sap.ui.core.Element.prototype.isTreeBinding.apply(this,arguments);};D.prototype.setHierarchical=function(h){this.setProperty("hierarchical",h);this._iLastFixedColIndex=h?0:-1;};D.prototype._scrollNext=function(){if(this.getFirstVisibleRow()<this._getRowCount()-this.getVisibleRowCount()){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+1,this._getRowCount()-this.getVisibleRowCount()));}};D.prototype._scrollPrevious=function(){if(this.getFirstVisibleRow()>0){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-1,0));}};D.prototype._scrollPageUp=function(){this.setFirstVisibleRow(Math.max(this.getFirstVisibleRow()-this.getVisibleRowCount(),0));};D.prototype._scrollPageDown=function(){this.setFirstVisibleRow(Math.min(this.getFirstVisibleRow()+this.getVisibleRowCount()-this.getFixedBottomRowCount(),this._getRowCount()-this.getVisibleRowCount()));};D.prototype._isTopRow=function(e){var $=q(e.target);var r=parseInt($.add($.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"),10);var f=this.getFixedRowCount();if(f>0&&r>=f){return r===f;}return r===0;};D.prototype._isBottomRow=function(e){var $=q(e.target);var r=parseInt($.add($.parent()).filter("[data-sap-ui-rowindex]").attr("data-sap-ui-rowindex"),10);var f=this.getFixedBottomRowCount();if(f>0&&r<=this.getVisibleRowCount()-1-f){return r===this.getVisibleRowCount()-1-f;}return r===this.getVisibleRowCount()-1;};D.prototype._enterActionMode=function(f){if(f.length>0&&!this._bActionMode){if(f.filter(":sapTabbable").length==0){return;}this._bActionMode=true;this.removeDelegate(this._oItemNavigation);q(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","-1");f.filter(":sapTabbable").eq(0).focus();}var $=f.eq(0);if(f.length>0&&$.hasClass("sapUiTableTreeIcon")&&!$.hasClass("sapUiTableTreeIconLeaf")){$.attr("tabindex",0).focus();this._bActionMode=true;}};D.prototype._leaveActionMode=function(e){if(this._bActionMode){this._bActionMode=false;this.addDelegate(this._oItemNavigation);q(this._oItemNavigation.getFocusedDomRef()).attr("tabindex","0");if(e){if(q(e.target).closest("td[tabindex='-1']").length>0){var i=q(this._oItemNavigation.aItemDomRefs).index(q(e.target).closest("td[tabindex='-1']").get(0));this._oItemNavigation.focusItem(i,null);}else{if(q.sap.containsOrEquals(this.$().find(".sapUiTableCCnt").get(0),e.target)){this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}}else{this._oItemNavigation.focusItem(this._oItemNavigation.getFocusedIndex(),null);}}this.$().find(".sapUiTableTreeIcon").attr("tabindex",-1);};D.prototype._getFocusedRowIndex=function(){var f=this._oItemNavigation.iFocusedIndex;var i=this._oItemNavigation.iColumns;var s=f%i;var e=this.getFirstVisibleRow()+(f-s)/i;if(!this.getColumnHeaderVisible()){e++;}return e-1;};D.prototype._isFocusedRowSelected=function(){var s=this._getFocusedRowIndex();var i=this.isIndexSelected(s);var e=(this._oItemNavigation.iFocusedIndex%this._oItemNavigation.iColumns==0);if(e){return i;}else{var h=this.getSelectionMode()!==sap.ui.table.SelectionMode.None&&this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly;if(h){return null;}else{return i;}}};D.prototype.onkeyup=function(e){if(!this._bEventSapSelect===true){return;}this._bEventSapSelect=false;if(e.keyCode!==q.sap.KeyCodes.ENTER&&e.keyCode!==q.sap.KeyCodes.SPACE&&e.keyCode!==q.sap.KeyCodes.F4||e.srcControl!==this&&q.inArray(e.srcControl,this.getRows())===-1&&q.inArray(e.srcControl,this.getColumns())===-1){return;}var p=q(e.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B){if(B.isExpanded(r)){B.collapse(r);}else{B.expand(r);}}e.preventDefault();return;}this._bShowMenu=true;this._onSelect(e);this._bShowMenu=false;e.preventDefault();};D.prototype.onsapselect=function(e){if(q(e.target).hasClass("sapUiTableTreeIcon")){this._onNodeSelect(e);}else{this._bEventSapSelect=true;}};D.prototype.onsapselectmodifiers=function(){this._bEventSapSelect=true;};D.prototype.onkeydown=function(e){var $=this.$();if(!this._bActionMode&&e.keyCode==q.sap.KeyCodes.F2||e.keyCode==q.sap.KeyCodes.ENTER){if($.find(".sapUiTableCtrl td:focus").length>0){this._enterActionMode($.find(".sapUiTableCtrl td:focus").find(":sapFocusable"));e.preventDefault();e.stopPropagation();}}else if(this._bActionMode&&e.keyCode==q.sap.KeyCodes.F2){this._leaveActionMode(e);}else if(e.keyCode==q.sap.KeyCodes.TAB&&this._bActionMode){if(this.getFixedColumnCount()>0){var f=q(e.target);if(f.is("td[role=gridcell]")==false){f=f.parents("td[role=gridcell]");}var g=f.parent("tr[data-sap-ui-rowindex]");var h=g.closest(".sapUiTableCtrl");var r=parseInt(g.attr("data-sap-ui-rowindex"),10);var i=g.find("td[role=gridcell]");var j=i.index(f);var t=i.length;if(j===(t-1)){var k;if(h.hasClass("sapUiTableCtrlFixed")){k=$.find(".sapUiTableCtrl.sapUiTableCtrlScroll");}else{k=$.find(".sapUiTableCtrl.sapUiTableCtrlFixed");r++;if(r==this.getVisibleRowCount()){r=0;}}var l=k.find("tr[data-sap-ui-rowindex='"+r+"']");var m=l.find("td :sapFocusable[tabindex='0']").first();if(m.length>0){m.focus();e.preventDefault();}}}}else if(e.keyCode==q.sap.KeyCodes.A&&(e.metaKey||e.ctrlKey)){var o=this._oItemNavigation;var F=o.getFocusedIndex();this._toggleSelectAll();o.focusItem(F,e);e.preventDefault();e.stopImmediatePropagation(true);}else if(e.keyCode===q.sap.KeyCodes.F10&&(e.shiftKey)){this.oncontextmenu(e);}var T=q(e.target),n=T.closest('td');if(e.keyCode==q.sap.KeyCodes.TAB&&this._bActionMode&&n.find('.sapUiTableTreeIcon').length>0){if(T.hasClass('sapUiTableTreeIcon')){if(!T.hasClass("sapUiTableTreeIconLeaf")){n.find(':sapFocusable:not(.sapUiTableTreeIcon)').first().focus();}}else{n.find('.sapUiTableTreeIcon:not(.sapUiTableTreeIconLeaf)').focus();}e.preventDefault();}};D.prototype.onsapescape=function(e){this._leaveActionMode(e);};D.prototype.onsaptabprevious=function(e){var $=this.$();if(this._bActionMode){this._leaveActionMode();e.preventDefault();}else{var i=this._oItemNavigation;var n=this.$().hasClass("sapUiTableEmpty");var s=$.find('.sapUiTableCCnt')[0];var f=q.contains(s,e.target);if(f&&this.getColumnHeaderVisible()){var g=i.getFocusedIndex()%i.iColumns;i.focusItem(g,e);e.preventDefault();}else if(i.getFocusedDomRef()===e.target&&q.sap.containsOrEquals(s,e.target)||(!this.getColumnHeaderVisible()&&n&&f)){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlBefore").focus();this._bIgnoreFocusIn=false;}}};D.prototype.onsaptabnext=function(e){var $=this.$();if(this._bActionMode){this._leaveActionMode();e.preventDefault();}else{var i=this._oItemNavigation;var f=q.contains($.find('.sapUiTableColHdrCnt')[0],e.target);var n=this.$().hasClass("sapUiTableEmpty");if(f&&!n){i.focusItem(i.getFocusedIndex()+i.iColumns*this._iLastSelectedDataRow,e);e.preventDefault();}else if(i.getFocusedDomRef()===e.target||(n&&f)){this._bIgnoreFocusIn=true;$.find(".sapUiTableCtrlAfter").focus();this._bIgnoreFocusIn=false;}}};D.prototype._updateAriaRowOfRowsText=function(f){var A=document.getElementById(this.getId()+"-rownumberofrows");if(!A){return;}var i=this._oItemNavigation;if(i){var e=i.getFocusedIndex();var g=e%i.iColumns;var F=this.getFirstVisibleRow();var t=this._getRowCount();var r=Math.floor(e/i.iColumns)+F+1-this._getHeaderRowCount();var s=this._oResBundle.getText("TBL_ROW_ROWCOUNT",[r,t]);if(r>0&&g===0||f){A.innerText=s;}else{A.innerText=" ";}}};D.prototype.onsapdown=function(e){if(!this._bActionMode&&this._isBottomRow(e)){if(this.getFirstVisibleRow()!=this._getRowCount()-this.getVisibleRowCount()){e.stopImmediatePropagation(true);if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar){this._scrollNext();}else{this._scrollPageDown();}}}e.preventDefault();};D.prototype.onsapdownmodifiers=function(e){if(e.shiftKey){var f=this._getFocusedRowIndex();var i=this._isFocusedRowSelected();if(i===true){this.addSelectionInterval(f+1,f+1);}else if(i===false){this.removeSelectionInterval(f+1,f+1);}if(this._isBottomRow(e)){this._scrollNext();}}else if(e.altKey){this._toggleGroupHeader(e);}};D.prototype.onsapupmodifiers=function(e){if(e.shiftKey){var f=this._getFocusedRowIndex();var i=this._isFocusedRowSelected();if(i===true){this.addSelectionInterval(f-1,f-1);}else if(i===false){this.removeSelectionInterval(f-1,f-1);}if(this._isTopRow(e)){if(this.getFirstVisibleRow()!=0){e.stopImmediatePropagation(true);}this._scrollPrevious();}}else if(e.altKey){this._toggleGroupHeader(e);}};D.prototype.onsapup=function(e){if(!this._bActionMode&&this._isTopRow(e)){if(this.getFirstVisibleRow()!=0){e.stopImmediatePropagation(true);}if(this.getNavigationMode()===sap.ui.table.NavigationMode.Scrollbar){this._scrollPrevious();}else{this._scrollPageUp();}}e.preventDefault();};D.prototype.onsappagedown=function(e){if(!this._bActionMode){var $=this.$();var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var h=$.find(".sapUiTableColHdrScr>.sapUiTableColHdr").length;if(this.getColumnHeaderVisible()&&i.iFocusedIndex<(i.iColumns*h)){var f=i.iFocusedIndex%i.iColumns;if((i.iFocusedIndex<=(i.iColumns*h)&&i.iFocusedIndex>=(i.iColumns*h)-i.iColumns)||(f===0&&r)){this.setFirstVisibleRow(0);i.focusItem(i.iColumns*h+f,e);}else{i.focusItem(i.iColumns*h-i.iColumns+f,e);}e.stopImmediatePropagation(true);}else{if(this._isBottomRow(e)){this._scrollPageDown();}var F=this.getFixedBottomRowCount();if(this.getFirstVisibleRow()===this._getRowCount()-this.getVisibleRowCount()){F=0;}var g=(i.aItemDomRefs.length/i.iColumns)-F;var f=i.iFocusedIndex%i.iColumns;var j=(g-1)*i.iColumns+f;i.focusItem(j,e);e.stopImmediatePropagation(true);}e.preventDefault();}};D.prototype.onsappagedownmodifiers=function(e){if(!this._bActionMode&&e.altKey){var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var f=i.iFocusedIndex%i.iColumns;var n;if(f==0&&r){n=1;}else{var v=this._aVisibleColumns.length;var m=this._getVisibleColumns().length;if(!r){m--;}if(v===0){n=m;}else{n=Math.min(m,f+v);}}i.focusItem(i.iFocusedIndex-(f-n),e);e.stopImmediatePropagation(true);e.preventDefault();}};D.prototype.onsappageup=function(e){if(!this._bActionMode){var $=this.$();var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var h=$.find(".sapUiTableColHdrScr>.sapUiTableColHdr").length;var f=i.iFocusedIndex%i.iColumns;if(this.getColumnHeaderVisible()&&i.iFocusedIndex<(i.iColumns*h)){if(i.iFocusedIndex>i.iColumns){i.focusItem(f,e);}e.stopImmediatePropagation(true);}else{if(this.getColumnHeaderVisible()&&this.getFirstVisibleRow()==0&&this._isTopRow(e)){if(r&&f===0){i.focusItem(f,e);}else{i.focusItem(i.iColumns*h-i.iColumns+f,e);}e.stopImmediatePropagation(true);}else{var g=this.getColumnHeaderVisible()?i.iColumns*h:0;i.focusItem(g+f,e);e.stopImmediatePropagation(true);if(this._isTopRow(e)){this._scrollPageUp();}}}e.preventDefault();}};D.prototype.onsappageupmodifiers=function(e){if(!this._bActionMode&&e.altKey){var i=this._oItemNavigation;var r=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var f=i.iFocusedIndex%i.iColumns;if(f>0){var n;if(f==1&&r){n=0;}else{var v=this._aVisibleColumns.length;if(v===0){if(r){n=1;}else{n=0;}}else{var m=1;if(!r){m=0;}n=Math.max(m,f-v);}}i.focusItem(i.iFocusedIndex-(f-n),e);}e.stopImmediatePropagation(true);e.preventDefault();}};D.prototype.onsaphome=function(e){var i=(this.getSelectionBehavior()==sap.ui.table.SelectionBehavior.RowOnly);var f=q(e.target).parents(".sapUiTableGroupHeader").length>0;if(f){e.stopImmediatePropagation(true);return;}var F=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=F%g;var o=0;if(!i){o=1;}if(s>this.getFixedColumnCount()+o){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-s+this.getFixedColumnCount()+o,null);}else if(!i){if(s>1){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-s+1,null);}else if(s==1){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(F-1,null);}else{e.stopImmediatePropagation(true);}}};D.prototype.onsapend=function(e){var i=q(e.target).parents(".sapUiTableGroupHeader").length>0;if(i){e.stopImmediatePropagation(true);return;}var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=f%g;var h=(this.getSelectionBehavior()!==sap.ui.table.SelectionBehavior.RowOnly);var o=0;if(!h){o=1;}if(s===0&&h){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(f+1,null);}else if(s<this.getFixedColumnCount()-o){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(f-s+this.getFixedColumnCount()-o,null);}};D.prototype.onsaphomemodifiers=function(e){if(e.metaKey||e.ctrlKey){var $=this.$();var t=$.find(".sapUiTableColHdrCnt")[0];var i=q.contains(t,e.target);if(i){e.stopImmediatePropagation(true);return;}var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=Math.ceil(f/g)-1;var h=f%g;if(this.getColumnHeaderVisible()){if(s==1){e.stopImmediatePropagation(true);this._oItemNavigation.focusItem(h,e);}else if(s>1){e.stopImmediatePropagation(true);this.setFirstVisibleRow(0);var T=h+g;this._oItemNavigation.focusItem(T,e);}}else{e.stopImmediatePropagation(true);this.setFirstVisibleRow(0);var T=f-s*g;this._oItemNavigation.focusItem(T,e);}}};D.prototype.onsapendmodifiers=function(e){if(e.metaKey||e.ctrlKey){var $=this.$();var t=$.find(".sapUiTableColHdrCnt")[0];var i=q.contains(t,e.target);var f=this._oItemNavigation.iFocusedIndex;var g=this._oItemNavigation.iColumns;var s=f%g;e.stopImmediatePropagation(true);if(i){this._oItemNavigation.focusItem(f+g,e);}else{this.setFirstVisibleRow(this._getRowCount()-this.getVisibleRowCount());var T=this._oItemNavigation.aItemDomRefs.length-(g-s);this._oItemNavigation.focusItem(T,e);}}};D.prototype.onsapleft=function(e){this._collapseGroupHeader(e);};D.prototype.onsapright=function(e){this._expandGroupHeader(e);};D.prototype._toggleGroupHeader=function(e){var p=q(e.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&B.isExpanded(r)){B.collapse(r);}else{B.expand(r);}e.preventDefault();e.stopImmediatePropagation();}};D.prototype._collapseGroupHeader=function(e){var p=q(e.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&B.isExpanded(r)){B.collapse(r);}e.preventDefault();e.stopImmediatePropagation();}};D.prototype._expandGroupHeader=function(e){var p=q(e.target).closest('.sapUiTableGroupHeader');if(p.length>0){var r=this.getFirstVisibleRow()+parseInt(p.attr("data-sap-ui-rowindex"),10);var B=this.getBinding("rows");if(B&&!B.isExpanded(r)){B.expand(r);}e.preventDefault();e.stopImmediatePropagation();}};D.prototype.onsapleftmodifiers=function(e){var t=q(e.target);if(t.hasClass('sapUiTableCol')){var f=parseInt(t.attr('data-sap-ui-colindex'),10),v=this._getVisibleColumns(),o=v[this._aVisibleColumns.indexOf(f)];if(e.shiftKey){var n=parseInt(o.getWidth(),10)-16;o.setWidth((n>20?n:20)+"px");e.preventDefault();e.stopImmediatePropagation();}else if(e.ctrlKey||e.metaKey){if(f-1>=0){var N=0;for(var p=this._aVisibleColumns.indexOf(f)-1;p>=0;p--){N=this._aVisibleColumns[p];if(v[p].$().css("display")!=="none"){break;}}this.removeColumn(o);this.insertColumn(o,N);var h=o.getHeaderSpan();if(h>1){for(var i=1;i<h;i++){o=v[f+i];this.removeColumn(o);this.insertColumn(o,N+i);}}}e.preventDefault();e.stopImmediatePropagation();}}};D.prototype.onsaprightmodifiers=function(e){var t=q(e.target);if(t.hasClass('sapUiTableCol')){var f=parseInt(t.attr('data-sap-ui-colindex'),10);var v=this._getVisibleColumns();var p=this._aVisibleColumns.indexOf(f);var o=v[p];if(e.shiftKey){o.setWidth(parseInt(o.getWidth(),10)+16+"px");e.preventDefault();e.stopImmediatePropagation();}else if(e.ctrlKey||e.metaKey){var h=o.getHeaderSpan();if(p<v.length-h){var n=v[p+1].getHeaderSpan(),N=this._aVisibleColumns[p+n];for(var i=h-1;i>=0;i--){o=v[p+i];this.removeColumn(o);this.insertColumn(o,N+i);}}e.preventDefault();e.stopImmediatePropagation();}}};D.prototype.setGroupBy=function(v){var g=v;if(typeof g==="string"){g=sap.ui.getCore().byId(g);}var r=false;if(g&&g instanceof sap.ui.table.Column){if(q.inArray(g,this.getColumns())===-1){throw new Error("Column has to be part of the columns aggregation!");}var e=this.fireGroup({column:g,groupedColumns:[g.getId()],type:sap.ui.table.GroupEventType.group});var o=sap.ui.getCore().byId(this.getGroupBy());if(o){o.setGrouped(false);r=true;}if(e&&g instanceof sap.ui.table.Column){g.setGrouped(true);}}if(!g||r){var B=this.getBindingInfo("rows");delete B.binding;this._bindAggregation("rows",B);}return this.setAssociation("groupBy",g);};D.prototype.getBinding=function(n){n=n||"rows";var B=sap.ui.core.Element.prototype.getBinding.call(this,n);if(B&&this.isTreeBinding(n)&&n==="rows"&&!B.getLength){if(B instanceof sap.ui.model.ClientTreeBinding||B.getModel()instanceof sap.ui.model.odata.ODataModel){var t=this;q.extend(B,{_init:function(e){this._bExpandFirstLevel=e;this.mContextInfo={};this._initContexts();if(e&&!this._bFirstLevelExpanded){this._expandFirstLevel();}},_initContexts:function(s){this.aContexts=this.getRootContexts();for(var i=0,l=this.aContexts.length;i<l;i++){var o=this._getContextInfo(this.aContexts[i]);this._setContextInfo({oContext:this.aContexts[i],iLevel:0,bExpanded:o?o.bExpanded:false});}if(this._bExpandFirstLevel&&!this._bFirstLevelExpanded){this._expandFirstLevel(s);}},_expandFirstLevel:function(s){var t=this;if(this.aContexts&&this.aContexts.length>0){q.each(this.aContexts.slice(),function(i,o){if(!s){t._loadChildContexts(o);}t._getContextInfo(o).bExpanded=true;});this._bFirstLevelExpanded=true;}},_fnFireFilter:B._fireFilter,_fireFilter:function(){this._fnFireFilter.apply(this,arguments);this._initContexts(true);this._restoreContexts(this.aContexts);},_fnFireChange:B._fireChange,_fireChange:function(){this._fnFireChange.apply(this,arguments);this._initContexts(true);this._restoreContexts(this.aContexts);},_restoreContexts:function(e){var t=this;var N=[];q.each(e.slice(),function(i,o){var f=t._getContextInfo(o);if(f&&f.bExpanded){N.push.apply(N,t._loadChildContexts(o));}});if(N.length>0){this._restoreContexts(N);}},_loadChildContexts:function(o){var e=this._getContextInfo(o);var f=q.inArray(o,this.aContexts);var N=this.getNodeContexts(o);for(var i=0,l=N.length;i<l;i++){this.aContexts.splice(f+i+1,0,N[i]);var g=this._getContextInfo(N[i]);this._setContextInfo({oParentContext:o,oContext:N[i],iLevel:e.iLevel+1,bExpanded:g?g.bExpanded:false});}return N;},_getContextInfo:function(o){return o?this.mContextInfo[o.getPath()]:undefined;},_setContextInfo:function(m){if(m&&m.oContext){this.mContextInfo[m.oContext.getPath()]=m;}},getLength:function(){return this.aContexts?this.aContexts.length:0;},getContexts:function(s,l){return this.aContexts.slice(s,s+l);},getContextByIndex:function(r){return this.aContexts[r];},getLevel:function(o){var e=this._getContextInfo(o);return e?e.iLevel:-1;},isExpanded:function(r){var o=this.getContextByIndex(r);var e=this._getContextInfo(o);return e?e.bExpanded:false;},expandContext:function(o){var e=this._getContextInfo(o);if(e&&!e.bExpanded){this.storeSelection();this._loadChildContexts(o);e.bExpanded=true;this._fireChange();this.restoreSelection();}},expand:function(r){this.expandContext(this.getContextByIndex(r));},collapseContext:function(o,s){var e=this._getContextInfo(o);if(e&&e.bExpanded){this.storeSelection();for(var i=this.aContexts.length-1;i>0;i--){if(this._getContextInfo(this.aContexts[i]).oParentContext===o){this.aContexts.splice(i,1);}}e.bExpanded=false;if(!s){this._fireChange();}this.restoreSelection();}},collapse:function(r){this.collapseContext(this.getContextByIndex(r));},collapseToLevel:function(l){if(!l||l<0){l=0;}var e=this.aContexts.slice();for(var i=e.length-1;i>=0;i--){var f=this.getLevel(e[i]);if(f!=-1&&f>=l){this.collapseContext(e[i],true);}}this._fireChange();},toggleContext:function(o){var e=this._getContextInfo(o);if(e){if(e.bExpanded){this.collapseContext(o);}else{this.expandContext(o);}}},toggleIndex:function(r){this.toggleContext(this.getContextByIndex(r));},storeSelection:function(){var s=t.getSelectedIndices();var e=[];q.each(s,function(i,v){e.push(t.getContextByIndex(v));});this._aSelectedContexts=e;},restoreSelection:function(){t.clearSelection();var _=this._aSelectedContexts;q.each(this.aContexts,function(i,o){if(q.inArray(o,_)>=0){t.addSelectionInterval(i,i);}});this._aSelectedContexts=undefined;},attachSelectionChanged:function(){return undefined;},clearSelection:function(){t._oSelection.clearSelection();},attachSort:function(){},detachSort:function(){}});B._init(this.getExpandFirstLevel());}else{O.apply(B);}}return B;};D.prototype.resetGrouping=function(){var B=this.getBinding("rows");if(B&&B._modified){this.$().find(".sapUiTableRowHdrScr").css("display","");this.onclick=D.prototype.onclick;this._modifyRow=undefined;var o=this.getBindingInfo("rows");this.unbindRows();this.bindRows(o);}};D.prototype.setEnableGrouping=function(e){this.setProperty("enableGrouping",e);if(!e){this.resetGrouping();}this._invalidateColumnMenus();return this;};D.prototype.setEnableCustomFilter=function(e){this.setProperty("enableCustomFilter",e);this._invalidateColumnMenus();return this;};D.prototype.setEnableColumnFreeze=function(e){this.setProperty("enableColumnFreeze",e);this._invalidateColumnMenus();return this;};D.prototype.setShowColumnVisibilityMenu=function(s){this.setProperty("showColumnVisibilityMenu",s);this._invalidateColumnMenus();return this;};D.prototype.setFixedColumnCount=function(f){var e=this._getVisibleColumns();var h=e[f-1]&&e[f-1].getHeaderSpan();if(h){var H;if(q.isArray(h)){H=parseInt(h[0],10);}else{H=parseInt(h,10);}f+=H-1;}var $=this.$().find(".sapUiTableCtrlFirstCol > th");for(var i=0;i<f;i++){var o=e[i];if(o){var g=q.inArray(o,this.getColumns());if(!o.getWidth()){o.setWidth($.filter("[data-sap-ui-headcolindex='"+g+"']").width()+"px");}}}this.setProperty("fixedColumnCount",f);this._invalidateColumnMenus();return this;};D.prototype._invalidateColumnMenus=function(){var e=this.getColumns();for(var i=0,l=e.length;i<l;i++){if(e[i].getMenu()){e[i].getMenu()._bInvalidated=true;}}};D.prototype._splitterSelectStart=function(e){e.preventDefault();e.stopPropagation();return false;};D.prototype._isTouchMode=function(e){return!!e.originalEvent["touches"];};D.prototype._onGhostMouseRelease=function(e){var s=this.getDomRef("ghost");var l=this._isTouchMode(e)?e.changedTouches[0].pageY:e.pageY;var n=l-this.$().offset().top;this.setVisibleRowCount(this._calculateRowsToDisplay(n));q(s).remove();this.$("overlay").remove();q(document.body).unbind("selectstart",this._splitterSelectStart);var $=q(document);$.unbind("touchend",this._onGhostMouseRelease);$.unbind("touchmove",this._onGhostMouseMove);$.unbind("mouseup",this._onGhostMouseRelease);$.unbind("mousemove",this._onGhostMouseMove);this._enableTextSelection();};D.prototype._onGhostMouseMove=function(e){var s=this.getDomRef("ghost");var l=this._isTouchMode(e)?e.targetTouches[0].pageY:e.pageY;var m=this.$().offset().top;if(l>m){q(s).css("top",l+"px");}};D.prototype._calculateRowsToDisplay=function(h){var m=this.getMinAutoRowCount()||5;if(!h){return m;}var $=this.$();if(!$.get(0)){return;}var i=$.get(0).getBoundingClientRect().height;var e=$.find('.sapUiTableCCnt').outerHeight();var r=$.find("tr:not(.sapUiAnalyticalTableSum) > td").outerHeight();if(!r){var s="sap.ui.table.Table:sapUiTableRowHeight";if($.parents().hasClass('sapUiSizeCompact')){s="sap.ui.table.Table:sapUiTableCompactRowHeight";}r=parseInt(P.get(s),10);}var M=window.innerHeight-2*r;var f=h-(i-e);var A=Math.min(f,M);return Math.max(m,Math.floor((A+1)/r));};D.prototype.setShowNoData=function(s){this.setProperty('showNoData',s,true);s=this.getProperty('showNoData');if(!s){this.$().removeClass("sapUiTableEmpty");}else{this._updateNoData();}return this;};D.prototype.setNoDataText=function(t){this.setProperty("noDataText",t,true);this.$().find('.sapUiTableCtrlEmptyMsg').text(t);};D.prototype.exportData=function(s){q.sap.require("sap.ui.core.util.Export");s=s||{};if(!s.rows){var B=this.getBinding("rows"),o=this.getBindingInfo("rows");var f=B.aFilters.concat(B.aApplicationFilters);s.rows={path:o.path,model:o.model,sorter:B.aSorters,filters:f,parameters:o.parameters};}if(!s.exportType){q.sap.require("sap.ui.core.util.ExportTypeCSV");s.exportType=new sap.ui.core.util.ExportTypeCSV();}var m=s.rows.model;if(!m){var p=s.rows.path;var e=p.indexOf(">");if(e>0){m=p.substr(0,e);}}if(!s.columns){s.columns=[];var g=this.getColumns();for(var i=0,l=g.length;i<l;i++){var h=g[i];if(h.getSortProperty()){s.columns.push({name:h.getLabel().getText(),template:{content:{path:h.getSortProperty(),model:m}}});}}}var E=new sap.ui.core.util.Export(s);this.addDependent(E);return E;};D.prototype._calculateAutomaticColumnWidth=function(e){var t=["sap.m.Text","sap.m.Label","sap.m.Link","sap.ui.commons.TextView","sap.ui.commons.Label","sap.ui.commons.Link"];var $=this.$();var h=0;var f=$.find('td[headers=\"'+this.getId()+'_col'+e+'\"]').children("div");var o=this.getColumns();var g=o[e];if(!g){return null;}var H=g.getHeaderSpan();var j=g.getLabel();var k=this;var l=g.getTemplate();var m=q.inArray(l.getMetadata().getName(),t)!=-1||sap.ui.commons&&sap.ui.commons.TextField&&l instanceof sap.ui.commons.TextField||sap.m&&sap.m.Input&&l instanceof sap.m.Input;var n=document.createElement("div");document.body.appendChild(n);q(n).addClass("sapUiTableHiddenSizeDetector");var p=g.getMultiLabels();if(p.length==0&&!!j){p=[j];}if(p.length>0){q.each(p,function(u,L){var v;if(!!L.getText()){q(n).text(L.getText());h=n.scrollWidth;}else{h=L.$().scrollWidth;}h=h+$.find("#"+g.getId()+"-icons").first().width();$.find(".sapUiTableColIcons#"+g.getId()+"_"+u+"-icons").first().width();if(H instanceof Array&&H[u]>1){v=H[u];}else if(H>1){v=H;}if(!!v){var i=v-1;while(i>e){h=h-(k._oCalcColumnWidths[e+i]||0);i-=1;}}});}var r=Math.max.apply(null,f.map(function(){var _=q(this);return parseInt(_.css('padding-left'),10)+parseInt(_.css('padding-right'),10)+parseInt(_.css('margin-left'),10)+parseInt(_.css('margin-right'),10);}).get());var s=Math.max.apply(null,f.children().map(function(){var w=0,W=0;var _=q(this);var i=_.text()||_.val();if(m){q(n).text(i);W=n.scrollWidth;}else{W=this.scrollWidth;}if(h>W){W=h;}w=W+parseInt(_.css('margin-left'),10)+parseInt(_.css('margin-right'),10)+r+1;return w;}).get());q(n).remove();return Math.max(s,this._iColMinWidth);};D.prototype._onPersoApplied=function(){var e=this.getColumns();var s=[];for(var i=0,l=e.length;i<l;i++){var o=e[i];if(o.getSorted()){s.push(new sap.ui.model.Sorter(o.getSortProperty(),o.getSortOrder()===sap.ui.table.SortOrder.Descending));}}if(s.length>0&&this.getBinding("rows")){this.getBinding("rows").sort(s);}this.refreshRows();};D.prototype._toggleSelectAll=function(){if(!this.$("selall").hasClass("sapUiTableSelAll")){this.clearSelection();}else{this.selectAll();}if(!!sap.ui.Device.browser.internet_explorer){this.$("selall").focus();}};D.prototype._restoreAppDefaultsColumnHeaderSortFilter=function(){var e=this.getColumns();q.each(e,function(i,o){o._restoreAppDefaults();});};D.prototype._setBusy=function(p){var B,i,s;if(!this.getEnableBusyIndicator()||!this._bBusyIndicatorAllowed){return;}B=this.getBinding("rows");if(!B){return;}this.setBusy(false);if(p){if(p.contexts&&p.contexts.length!==undefined){s=false;for(i=0;i<p.contexts.length;i++){if(p.contexts[i]===undefined){s=true;break;}}}else if(p.changeReason===sap.ui.model.ChangeReason.Expand){this.setBusy(true);}if(s||(B.isInitial()||B._bInitial)||(p.receivedLength===0&&this._iDataRequestedCounter!==0)||(p.receivedLength<p.requestedLength&&p.receivedLength!==B.getLength())){this.setBusy(true);}}};D.prototype.setColumnHeaderVisible=function(e){this.setProperty("columnHeaderVisible",e);this._iLastSelectedDataRow=this._getHeaderRowCount();};D.prototype._attachDataRequestedListeners=function(){var B=this.getBinding("rows");if(B){this._iDataRequestedCounter=0;B.detachDataRequested(this._onBindingDataRequestedListener,this);B.detachDataReceived(this._onBindingDataReceivedListener,this);B.attachDataRequested(this._onBindingDataRequestedListener,this);B.attachDataReceived(this._onBindingDataReceivedListener,this);}};D.prototype._onBindingDataRequestedListener=function(){this._iDataRequestedCounter++;};D.prototype._onBindingDataReceivedListener=function(){this._iDataRequestedCounter--;};D.prototype._attachBindingListener=function(){this._attachDataRequestedListeners();};D.prototype.setCollapseRecursive=function(e){var B=this.getBinding("rows");if(B){if(B.setCollapseRecursive){B.setCollapseRecursive(e);}}this.setProperty("collapseRecursive",!!e,true);return this;};D.prototype.setRootLevel=function(r){this.setFirstVisibleRow(0);var B=this.getBinding("rows");if(B){if(B.setRootLevel){B.setRootLevel(r);}}this.setProperty("rootLevel",r,true);return this;};return D;},true);};
